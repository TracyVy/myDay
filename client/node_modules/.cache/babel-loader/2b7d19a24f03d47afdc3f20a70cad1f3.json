{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _callbacks = require(\"../../core/utils/callbacks\");\n\nvar _callbacks2 = _interopRequireDefault(_callbacks);\n\nvar _translator = require(\"../../animation/translator\");\n\nvar _translator2 = _interopRequireDefault(_translator);\n\nvar _ui = require(\"../widget/ui.errors\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _window2 = _interopRequireDefault(_window);\n\nvar _dialog = require(\"../dialog\");\n\nvar _dialog2 = _interopRequireDefault(_dialog);\n\nvar _utils = require(\"./utils.recurrence\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _dom = require(\"../../core/utils/dom\");\n\nvar _dom2 = _interopRequireDefault(_dom);\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _data2 = _interopRequireDefault(_data);\n\nvar _position = require(\"../../core/utils/position\");\n\nvar _date = require(\"../../core/utils/date\");\n\nvar _date2 = _interopRequireDefault(_date);\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _devices = require(\"../../core/devices\");\n\nvar _devices2 = _interopRequireDefault(_devices);\n\nvar _config = require(\"../../core/config\");\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _date_serialization = require(\"../../core/utils/date_serialization\");\n\nvar _date_serialization2 = _interopRequireDefault(_date_serialization);\n\nvar _date3 = require(\"../../localization/date\");\n\nvar _date4 = _interopRequireDefault(_date3);\n\nvar _ui3 = require(\"../widget/ui.widget\");\n\nvar _ui4 = _interopRequireDefault(_ui3);\n\nvar _uiScheduler = require(\"./ui.scheduler.subscribes\");\n\nvar _uiScheduler2 = _interopRequireDefault(_uiScheduler);\n\nvar _desktopTooltipStrategy = require(\"./tooltip_strategies/desktopTooltipStrategy\");\n\nvar _mobileTooltipStrategy = require(\"./tooltip_strategies/mobileTooltipStrategy\");\n\nvar _appointmentPopup = require(\"./appointmentPopup\");\n\nvar _appointmentPopup2 = _interopRequireDefault(_appointmentPopup);\n\nvar _uiScheduler3 = require(\"./ui.scheduler.header\");\n\nvar _uiScheduler4 = _interopRequireDefault(_uiScheduler3);\n\nvar _uiScheduler5 = require(\"./workspaces/ui.scheduler.work_space_day\");\n\nvar _uiScheduler6 = _interopRequireDefault(_uiScheduler5);\n\nvar _uiScheduler7 = require(\"./workspaces/ui.scheduler.work_space_week\");\n\nvar _uiScheduler8 = _interopRequireDefault(_uiScheduler7);\n\nvar _uiScheduler9 = require(\"./workspaces/ui.scheduler.work_space_work_week\");\n\nvar _uiScheduler10 = _interopRequireDefault(_uiScheduler9);\n\nvar _uiScheduler11 = require(\"./workspaces/ui.scheduler.work_space_month\");\n\nvar _uiScheduler12 = _interopRequireDefault(_uiScheduler11);\n\nvar _uiScheduler13 = require(\"./workspaces/ui.scheduler.timeline_day\");\n\nvar _uiScheduler14 = _interopRequireDefault(_uiScheduler13);\n\nvar _uiScheduler15 = require(\"./workspaces/ui.scheduler.timeline_week\");\n\nvar _uiScheduler16 = _interopRequireDefault(_uiScheduler15);\n\nvar _uiScheduler17 = require(\"./workspaces/ui.scheduler.timeline_work_week\");\n\nvar _uiScheduler18 = _interopRequireDefault(_uiScheduler17);\n\nvar _uiScheduler19 = require(\"./workspaces/ui.scheduler.timeline_month\");\n\nvar _uiScheduler20 = _interopRequireDefault(_uiScheduler19);\n\nvar _uiScheduler21 = require(\"./workspaces/ui.scheduler.agenda\");\n\nvar _uiScheduler22 = _interopRequireDefault(_uiScheduler21);\n\nvar _uiScheduler23 = require(\"./ui.scheduler.resource_manager\");\n\nvar _uiScheduler24 = _interopRequireDefault(_uiScheduler23);\n\nvar _uiScheduler25 = require(\"./ui.scheduler.appointment_model\");\n\nvar _uiScheduler26 = _interopRequireDefault(_uiScheduler25);\n\nvar _uiScheduler27 = require(\"./ui.scheduler.appointments\");\n\nvar _uiScheduler28 = _interopRequireDefault(_uiScheduler27);\n\nvar _uiSchedulerAppointments = require(\"./ui.scheduler.appointments.layout_manager\");\n\nvar _uiSchedulerAppointments2 = _interopRequireDefault(_uiSchedulerAppointments);\n\nvar _compactAppointmentsHelper = require(\"./compactAppointmentsHelper\");\n\nvar _data_helper = require(\"../../data_helper\");\n\nvar _data_helper2 = _interopRequireDefault(_data_helper);\n\nvar _ui5 = require(\"./ui.loading\");\n\nvar _ui6 = _interopRequireDefault(_ui5);\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _deferred2 = _interopRequireDefault(_deferred);\n\nvar _empty_template = require(\"../../core/templates/empty_template\");\n\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\n\nvar _themes = require(\"../themes\");\n\nvar _themes2 = _interopRequireDefault(_themes);\n\nvar _browser = require(\"../../core/utils/browser\");\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _support = require(\"../../core/utils/support\");\n\nvar _utils3 = require(\"./utils.timeZone\");\n\nvar _utils4 = _interopRequireDefault(_utils3);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar when = _deferred2.default.when;\nvar Deferred = _deferred2.default.Deferred;\nvar toMs = _date2.default.dateToMilliseconds;\nvar MINUTES_IN_HOUR = 60;\nvar WIDGET_CLASS = \"dx-scheduler\";\nvar WIDGET_SMALL_CLASS = \"\".concat(WIDGET_CLASS, \"-small\");\nvar WIDGET_ADAPTIVE_CLASS = \"\".concat(WIDGET_CLASS, \"-adaptive\");\nvar WIDGET_WIN_NO_TOUCH_CLASS = \"\".concat(WIDGET_CLASS, \"-win-no-touch\");\nvar WIDGET_READONLY_CLASS = \"\".concat(WIDGET_CLASS, \"-readonly\");\nvar WIDGET_SMALL_WIDTH = 400;\nvar FULL_DATE_FORMAT = \"yyyyMMddTHHmmss\";\nvar UTC_FULL_DATE_FORMAT = FULL_DATE_FORMAT + \"Z\";\nvar VIEWS_CONFIG = {\n  day: {\n    workSpace: _uiScheduler6.default,\n    renderingStrategy: \"vertical\"\n  },\n  week: {\n    workSpace: _uiScheduler8.default,\n    renderingStrategy: \"vertical\"\n  },\n  workWeek: {\n    workSpace: _uiScheduler10.default,\n    renderingStrategy: \"vertical\"\n  },\n  month: {\n    workSpace: _uiScheduler12.default,\n    renderingStrategy: \"horizontalMonth\"\n  },\n  timelineDay: {\n    workSpace: _uiScheduler14.default,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineWeek: {\n    workSpace: _uiScheduler16.default,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineWorkWeek: {\n    workSpace: _uiScheduler18.default,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineMonth: {\n    workSpace: _uiScheduler20.default,\n    renderingStrategy: \"horizontalMonthLine\"\n  },\n  agenda: {\n    workSpace: _uiScheduler22.default,\n    renderingStrategy: \"agenda\"\n  }\n};\n\nvar Scheduler = _ui4.default.inherit({\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      views: [\"day\", \"week\"],\n      currentView: \"day\",\n      currentDate: _date2.default.trimTime(new Date()),\n      min: void 0,\n      max: void 0,\n      dateSerializationFormat: void 0,\n      firstDayOfWeek: void 0,\n      groups: [],\n      resources: [],\n      dataSource: null,\n      customizeDateNavigatorText: void 0,\n      appointmentTemplate: \"item\",\n      dropDownAppointmentTemplate: \"dropDownAppointment\",\n      appointmentCollectorTemplate: \"appointmentCollector\",\n      dataCellTemplate: null,\n      timeCellTemplate: null,\n      resourceCellTemplate: null,\n      dateCellTemplate: null,\n      startDayHour: 0,\n      endDayHour: 24,\n      editing: {\n        allowAdding: true,\n        allowDeleting: true,\n        allowDragging: true,\n        allowResizing: true,\n        allowUpdating: true,\n        allowTimeZoneEditing: false,\n        allowEditingTimeZones: false\n      },\n      showAllDayPanel: true,\n      showCurrentTimeIndicator: true,\n      shadeUntilCurrentTime: false,\n      indicatorUpdateInterval: 3e5,\n      indicatorTime: void 0,\n      recurrenceEditMode: \"dialog\",\n      cellDuration: 30,\n      maxAppointmentsPerCell: \"auto\",\n      selectedCellData: [],\n      groupByDate: false,\n      onAppointmentRendered: null,\n      onAppointmentClick: null,\n      onAppointmentDblClick: null,\n      onAppointmentContextMenu: null,\n      onCellClick: null,\n      onCellContextMenu: null,\n      onAppointmentAdding: null,\n      onAppointmentAdded: null,\n      onAppointmentUpdating: null,\n      onAppointmentUpdated: null,\n      onAppointmentDeleting: null,\n      onAppointmentDeleted: null,\n      onAppointmentFormOpening: null,\n      appointmentTooltipTemplate: \"appointmentTooltip\",\n      appointmentPopupTemplate: \"appointmentPopup\",\n      crossScrollingEnabled: false,\n      useDropDownViewSwitcher: false,\n      startDateExpr: \"startDate\",\n      endDateExpr: \"endDate\",\n      textExpr: \"text\",\n      descriptionExpr: \"description\",\n      allDayExpr: \"allDay\",\n      recurrenceRuleExpr: \"recurrenceRule\",\n      recurrenceExceptionExpr: \"recurrenceException\",\n      remoteFiltering: false,\n      timeZone: \"\",\n      startDateTimeZoneExpr: \"startDateTimeZone\",\n      endDateTimeZoneExpr: \"endDateTimeZone\",\n      noDataText: _message2.default.format(\"dxCollectionWidget-noDataText\"),\n      adaptivityEnabled: false,\n      allowMultipleCellSelection: true,\n      _appointmentTooltipOffset: {\n        x: 0,\n        y: 0\n      },\n      _appointmentTooltipButtonsPosition: \"bottom\",\n      _appointmentTooltipOpenButtonText: _message2.default.format(\"dxScheduler-openAppointment\"),\n      _dropDownButtonIcon: \"overflow\",\n      _appointmentCountPerCell: 2,\n      _collectorOffset: 0,\n      _appointmentOffset: 26\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return \"desktop\" === _devices2.default.real().deviceType && !_devices2.default.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }, {\n      device: function () {\n        return !_devices2.default.current().generic;\n      },\n      options: {\n        useDropDownViewSwitcher: true,\n        editing: {\n          allowDragging: false,\n          allowResizing: false\n        }\n      }\n    }, {\n      device: function () {\n        return _themes2.default.isMaterial();\n      },\n      options: {\n        useDropDownViewSwitcher: true,\n        dateCellTemplate: function (data, index, element) {\n          var text = data.text;\n          text.split(\" \").forEach(function (text, index) {\n            var span = (0, _renderer2.default)(\"<span>\").text(text).addClass(\"dx-scheduler-header-panel-cell-date\");\n            (0, _renderer2.default)(element).append(span);\n\n            if (!index) {\n              (0, _renderer2.default)(element).append(\" \");\n            }\n          });\n        },\n        _appointmentTooltipOffset: {\n          x: 0,\n          y: 11\n        },\n        _appointmentTooltipButtonsPosition: \"top\",\n        _appointmentTooltipOpenButtonText: null,\n        _dropDownButtonIcon: \"chevrondown\",\n        _appointmentCountPerCell: 1,\n        _collectorOffset: 20,\n        _appointmentOffset: 30\n      }\n    }]);\n  },\n  _setDeprecatedOptions: function () {\n    this.callBase();\n    (0, _extend.extend)(this._deprecatedOptions, {\n      onAppointmentFormCreated: {\n        since: \"18.2\",\n        alias: \"onAppointmentFormOpening\"\n      },\n      dropDownAppointmentTemplate: {\n        since: \"19.2\",\n        message: \"appointmentTooltipTemplate\"\n      },\n      allowEditingTimeZones: {\n        since: \"20.1\",\n        alias: \"allowTimeZoneEditing\"\n      }\n    });\n  },\n  _postponeDataSourceLoading: function (promise) {\n    this.postponedOperations.add(\"_reloadDataSource\", this._reloadDataSource.bind(this), promise);\n  },\n  _postponeResourceLoading: function () {\n    var _this = this;\n\n    var whenLoaded = this.postponedOperations.add(\"_loadResources\", function () {\n      return _this._loadResources();\n    });\n    var resolveCallbacks = new Deferred();\n    whenLoaded.done(function (resources) {\n      resolveCallbacks.resolve(resources);\n    });\n\n    this._postponeDataSourceLoading(whenLoaded);\n\n    return resolveCallbacks.promise();\n  },\n  _optionChanged: function (args) {\n    var _this2 = this;\n\n    var value = args.value;\n    var name = args.name;\n\n    switch (args.name) {\n      case \"customizeDateNavigatorText\":\n        this._updateOption(\"header\", name, value);\n\n        break;\n\n      case \"firstDayOfWeek\":\n        this._updateOption(\"workSpace\", name, value);\n\n        this._updateOption(\"header\", name, value);\n\n        break;\n\n      case \"currentDate\":\n        value = this._dateOption(name);\n        value = _date2.default.trimTime(new Date(value));\n        this.option(\"selectedCellData\", []);\n\n        this._workSpace.option(name, new Date(value));\n\n        this._header.option(name, new Date(value));\n\n        this._header.option(\"displayedDate\", this._workSpace._getViewStartByOptions());\n\n        this._appointments.option(\"items\", []);\n\n        this._filterAppointmentsByDate();\n\n        this._postponeDataSourceLoading();\n\n        break;\n\n      case \"dataSource\":\n        this._initDataSource();\n\n        this._appointmentModel.setDataSource(this._dataSource);\n\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._filterAppointmentsByDate();\n\n          _this2._updateOption(\"workSpace\", \"showAllDayPanel\", _this2.option(\"showAllDayPanel\"));\n        });\n\n        break;\n\n      case \"min\":\n      case \"max\":\n        value = this._dateOption(name);\n\n        this._updateOption(\"header\", name, new Date(value));\n\n        this._updateOption(\"workSpace\", name, new Date(value));\n\n        break;\n\n      case \"views\":\n        this._processCurrentView();\n\n        if (this._getCurrentViewOptions()) {\n          this.repaint();\n        } else {\n          this._header.option(name, value);\n        }\n\n        break;\n\n      case \"useDropDownViewSwitcher\":\n        this._header.option(name, value);\n\n        break;\n\n      case \"currentView\":\n        this._processCurrentView();\n\n        this.fire(\"validateDayHours\");\n        this.getLayoutManager().initRenderingStrategy(this._getAppointmentsRenderingStrategy());\n\n        this._validateCellDuration();\n\n        this._appointments.option({\n          items: [],\n          allowDrag: this._allowDragging(),\n          allowResize: this._allowResizing(),\n          itemTemplate: this._getAppointmentTemplate(\"appointmentTemplate\")\n        });\n\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._refreshWorkSpace(resources);\n\n          _this2._updateHeader();\n\n          _this2._filterAppointmentsByDate();\n\n          _this2._appointments.option(\"allowAllDayResize\", \"day\" !== value);\n        });\n\n        break;\n\n      case \"appointmentTemplate\":\n        this._appointments.option(\"itemTemplate\", value);\n\n        break;\n\n      case \"dateCellTemplate\":\n      case \"resourceCellTemplate\":\n      case \"dataCellTemplate\":\n      case \"timeCellTemplate\":\n        this._updateOption(\"workSpace\", name, value);\n\n        this.repaint();\n        break;\n\n      case \"groups\":\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._refreshWorkSpace(resources);\n\n          _this2._filterAppointmentsByDate();\n        });\n\n        break;\n\n      case \"resources\":\n        this._resourcesManager.setResources(this.option(\"resources\"));\n\n        this._appointmentModel.setDataAccessors(this._combineDataAccessors());\n\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._appointments.option(\"items\", []);\n\n          _this2._refreshWorkSpace(resources);\n\n          _this2._filterAppointmentsByDate();\n        });\n\n        break;\n\n      case \"startDayHour\":\n      case \"endDayHour\":\n        this.fire(\"validateDayHours\");\n\n        this._appointments.option(\"items\", []);\n\n        this._updateOption(\"workSpace\", name, value);\n\n        this._appointments.repaint();\n\n        this._filterAppointmentsByDate();\n\n        this._postponeDataSourceLoading();\n\n        break;\n\n      case \"onAppointmentAdding\":\n      case \"onAppointmentAdded\":\n      case \"onAppointmentUpdating\":\n      case \"onAppointmentUpdated\":\n      case \"onAppointmentDeleting\":\n      case \"onAppointmentDeleted\":\n      case \"onAppointmentFormOpening\":\n        this._actions[name] = this._createActionByOption(name);\n        break;\n\n      case \"onAppointmentRendered\":\n        this._appointments.option(\"onItemRendered\", this._getAppointmentRenderedAction());\n\n        break;\n\n      case \"onAppointmentClick\":\n        this._appointments.option(\"onItemClick\", this._createActionByOption(name));\n\n        break;\n\n      case \"onAppointmentDblClick\":\n        this._appointments.option(name, this._createActionByOption(name));\n\n        break;\n\n      case \"onAppointmentContextMenu\":\n        this._appointments.option(\"onItemContextMenu\", this._createActionByOption(name));\n\n        break;\n\n      case \"noDataText\":\n      case \"allowMultipleCellSelection\":\n      case \"selectedCellData\":\n      case \"accessKey\":\n      case \"onCellClick\":\n        this._workSpace.option(name, value);\n\n        break;\n\n      case \"onCellContextMenu\":\n        this._workSpace.option(name, value);\n\n        break;\n\n      case \"crossScrollingEnabled\":\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._appointments.option(\"items\", []);\n\n          _this2._refreshWorkSpace(resources);\n\n          if (_this2._readyToRenderAppointments) {\n            _this2._appointments.option(\"items\", _this2._getAppointmentsToRepaint());\n          }\n        });\n\n        break;\n\n      case \"cellDuration\":\n        this._validateCellDuration();\n\n        this._appointments.option(\"items\", []);\n\n        if (this._readyToRenderAppointments) {\n          this._updateOption(\"workSpace\", \"hoursInterval\", value / 60);\n\n          this._appointments.option(\"items\", this._getAppointmentsToRepaint());\n        }\n\n        break;\n\n      case \"tabIndex\":\n      case \"focusStateEnabled\":\n        this._updateOption(\"header\", name, value);\n\n        this._updateOption(\"workSpace\", name, value);\n\n        this._appointments.option(name, value);\n\n        this.callBase(args);\n        break;\n\n      case \"width\":\n        this._updateOption(\"header\", name, value);\n\n        if (this.option(\"crossScrollingEnabled\")) {\n          this._updateOption(\"workSpace\", \"width\", value);\n        }\n\n        this.callBase(args);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"height\":\n        this.callBase(args);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"editing\":\n        this._initEditing();\n\n        var editing = this._editing;\n\n        this._bringEditingModeToAppointments(editing);\n\n        this.hideAppointmentTooltip();\n\n        this._cleanPopup();\n\n        break;\n\n      case \"showAllDayPanel\":\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._filterAppointmentsByDate();\n\n          _this2._updateOption(\"workSpace\", \"allDayExpanded\", value);\n\n          _this2._updateOption(\"workSpace\", name, value);\n        });\n\n        break;\n\n      case \"showCurrentTimeIndicator\":\n      case \"indicatorTime\":\n      case \"indicatorUpdateInterval\":\n      case \"shadeUntilCurrentTime\":\n      case \"groupByDate\":\n        this._updateOption(\"workSpace\", name, value);\n\n        this.repaint();\n        break;\n\n      case \"appointmentDragging\":\n      case \"appointmentTooltipTemplate\":\n      case \"appointmentPopupTemplate\":\n      case \"recurrenceEditMode\":\n      case \"remoteFiltering\":\n      case \"timeZone\":\n      case \"dropDownAppointmentTemplate\":\n      case \"appointmentCollectorTemplate\":\n      case \"_appointmentTooltipOffset\":\n      case \"_appointmentTooltipButtonsPosition\":\n      case \"_appointmentTooltipOpenButtonText\":\n      case \"_dropDownButtonIcon\":\n      case \"_appointmentCountPerCell\":\n      case \"_collectorOffset\":\n      case \"_appointmentOffset\":\n        this.repaint();\n        break;\n\n      case \"dateSerializationFormat\":\n        break;\n\n      case \"maxAppointmentsPerCell\":\n        break;\n\n      case \"startDateExpr\":\n      case \"endDateExpr\":\n      case \"startDateTimeZoneExpr\":\n      case \"endDateTimeZoneExpr\":\n      case \"textExpr\":\n      case \"descriptionExpr\":\n      case \"allDayExpr\":\n      case \"recurrenceRuleExpr\":\n      case \"recurrenceExceptionExpr\":\n        this._updateExpression(name, value);\n\n        this._appointmentModel.setDataAccessors(this._combineDataAccessors());\n\n        this._initAppointmentTemplate();\n\n        this.repaint();\n        break;\n\n      case \"adaptivityEnabled\":\n        this._toggleAdaptiveClass();\n\n        this.repaint();\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _updateHeader: function () {\n    var viewCountConfig = this._getViewCountConfig();\n\n    this._header.option(\"intervalCount\", viewCountConfig.intervalCount);\n\n    this._header.option(\"displayedDate\", this._workSpace._getViewStartByOptions());\n\n    this._header.option(\"min\", this._dateOption(\"min\"));\n\n    this._header.option(\"max\", this._dateOption(\"max\"));\n\n    this._header.option(\"currentDate\", this._dateOption(\"currentDate\"));\n\n    this._header.option(\"firstDayOfWeek\", this._getCurrentViewOption(\"firstDayOfWeek\"));\n\n    this._header.option(\"currentView\", this._currentView);\n  },\n  _dateOption: function (optionName) {\n    var optionValue = this._getCurrentViewOption(optionName);\n\n    return _date_serialization2.default.deserializeDate(optionValue);\n  },\n  _getSerializationFormat: function (optionName) {\n    var value = this._getCurrentViewOption(optionName);\n\n    if (\"number\" === typeof value) {\n      return \"number\";\n    }\n\n    if (!_type2.default.isString(value)) {\n      return;\n    }\n\n    return _date_serialization2.default.getDateSerializationFormat(value);\n  },\n  _bringEditingModeToAppointments: function (editing) {\n    var editingConfig = {\n      allowDelete: editing.allowUpdating && editing.allowDeleting\n    };\n\n    if (!this._isAgenda()) {\n      editingConfig.allowDrag = editing.allowDragging;\n      editingConfig.allowResize = editing.allowResizing;\n      editingConfig.allowAllDayResize = editing.allowResizing && this._supportAllDayResizing();\n    }\n\n    this._appointments.option(editingConfig);\n\n    this.repaint();\n  },\n  _isAgenda: function () {\n    return \"agenda\" === this._getAppointmentsRenderingStrategy();\n  },\n  _allowDragging: function () {\n    return this._editing.allowDragging && !this._isAgenda();\n  },\n  _allowResizing: function () {\n    return this._editing.allowResizing && !this._isAgenda();\n  },\n  _allowAllDayResizing: function () {\n    return this._editing.allowResizing && this._supportAllDayResizing();\n  },\n  _supportAllDayResizing: function () {\n    return \"day\" !== this._getCurrentViewType() || this._currentView.intervalCount > 1;\n  },\n  _isAllDayExpanded: function (items) {\n    return this.option(\"showAllDayPanel\") && this._appointmentModel.hasAllDayAppointments(items, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"));\n  },\n  _getTimezoneOffsetByOption: function (date) {\n    return _utils4.default.calculateTimezoneByValue(this.option(\"timeZone\"), date);\n  },\n  getCorrectedDatesByDaylightOffsets: function (originalStartDate, dates, appointmentData) {\n    var _this3 = this;\n\n    var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", appointmentData);\n\n    var needCheckTimezoneOffset = _type2.default.isDefined(startDateTimeZone) && _type2.default.isDefined(this._getTimezoneOffsetByOption(originalStartDate));\n\n    var convertedOriginalStartDate = this.fire(\"convertDateByTimezoneBack\", new Date(originalStartDate.getTime()), startDateTimeZone);\n\n    if (needCheckTimezoneOffset) {\n      dates = dates.map(function (date) {\n        var convertedDate = _this3.fire(\"convertDateByTimezoneBack\", new Date(date.getTime()), startDateTimeZone);\n\n        return _utils4.default.getCorrectedDateByDaylightOffsets(convertedOriginalStartDate, convertedDate, date, _this3.option(\"timeZone\"), startDateTimeZone);\n      });\n    }\n\n    return dates;\n  },\n  _filterAppointmentsByDate: function () {\n    var dateRange = this._workSpace.getDateRange();\n\n    this._appointmentModel.filterByDate(dateRange[0], dateRange[1], this.option(\"remoteFiltering\"), this.option(\"dateSerializationFormat\"));\n  },\n  _loadResources: function () {\n    var groups = this._getCurrentViewOption(\"groups\");\n\n    var result = new Deferred();\n\n    this._resourcesManager.loadResources(groups).done(function (resources) {\n      this._loadedResources = resources;\n      result.resolve(resources);\n    }.bind(this));\n\n    return result.promise();\n  },\n  _dataSourceLoadedCallback: (0, _callbacks2.default)(),\n  _reloadDataSource: function () {\n    var result = new Deferred();\n\n    if (this._dataSource) {\n      this._dataSource.load().done(function () {\n        _ui6.default.hide();\n\n        this._fireContentReadyAction(result);\n      }.bind(this)).fail(function () {\n        _ui6.default.hide();\n\n        result.reject();\n      });\n\n      this._dataSource.isLoading() && _ui6.default.show({\n        container: this.$element(),\n        position: {\n          of: this.$element()\n        }\n      });\n    } else {\n      this._fireContentReadyAction(result);\n    }\n\n    return result.promise();\n  },\n  _fireContentReadyAction: function (result) {\n    var contentReadyBase = this.callBase.bind(this);\n\n    var fireContentReady = function () {\n      contentReadyBase();\n      null === result || void 0 === result ? void 0 : result.resolve();\n    };\n\n    if (this._workSpaceRecalculation) {\n      var _this$_workSpaceRecal;\n\n      null === (_this$_workSpaceRecal = this._workSpaceRecalculation) || void 0 === _this$_workSpaceRecal ? void 0 : _this$_workSpaceRecal.done(function () {\n        fireContentReady();\n      });\n    } else {\n      fireContentReady();\n    }\n  },\n  _dimensionChanged: function () {\n    var filteredItems = this.getFilteredItems();\n\n    this._toggleSmallClass();\n\n    if (!this._isAgenda() && filteredItems && this._isVisible()) {\n      this._workSpace._cleanAllowedPositions();\n\n      this._workSpace.option(\"allDayExpanded\", this._isAllDayExpanded(filteredItems));\n\n      this._workSpace._dimensionChanged();\n\n      var appointments = this._layoutManager.createAppointmentsMap(filteredItems);\n\n      this._appointments.option(\"items\", appointments);\n    }\n\n    this.hideAppointmentTooltip();\n\n    this._appointmentPopup.triggerResize();\n\n    this._appointmentPopup.updatePopupFullScreenMode();\n  },\n  _clean: function () {\n    this._cleanPopup();\n\n    this.callBase();\n  },\n  _toggleSmallClass: function () {\n    var width = (0, _position.getBoundingRect)(this.$element().get(0)).width;\n    this.$element().toggleClass(WIDGET_SMALL_CLASS, width < WIDGET_SMALL_WIDTH);\n  },\n  _toggleAdaptiveClass: function () {\n    this.$element().toggleClass(WIDGET_ADAPTIVE_CLASS, this.option(\"adaptivityEnabled\"));\n  },\n  _visibilityChanged: function (visible) {\n    visible && this._dimensionChanged();\n  },\n  _dataSourceOptions: function () {\n    return {\n      paginate: false\n    };\n  },\n  _init: function () {\n    this._initExpressions({\n      startDate: this.option(\"startDateExpr\"),\n      endDate: this.option(\"endDateExpr\"),\n      startDateTimeZone: this.option(\"startDateTimeZoneExpr\"),\n      endDateTimeZone: this.option(\"endDateTimeZoneExpr\"),\n      allDay: this.option(\"allDayExpr\"),\n      text: this.option(\"textExpr\"),\n      description: this.option(\"descriptionExpr\"),\n      recurrenceRule: this.option(\"recurrenceRuleExpr\"),\n      recurrenceException: this.option(\"recurrenceExceptionExpr\")\n    });\n\n    this.callBase();\n\n    this._initDataSource();\n\n    this._loadedResources = [];\n    this.$element().addClass(WIDGET_CLASS).toggleClass(WIDGET_WIN_NO_TOUCH_CLASS, !!(_browser2.default.msie && _support.touch));\n\n    this._initEditing();\n\n    this._resourcesManager = new _uiScheduler24.default(this.option(\"resources\"));\n\n    var combinedDataAccessors = this._combineDataAccessors();\n\n    this._appointmentModel = new _uiScheduler26.default(this._dataSource, combinedDataAccessors, this.getAppointmentDurationInMinutes());\n\n    this._initActions();\n\n    this._compactAppointmentsHelper = new _compactAppointmentsHelper.CompactAppointmentsHelper(this);\n    this._asyncTemplatesTimers = [];\n    this._subscribes = _uiScheduler2.default;\n  },\n  _initTemplates: function () {\n    this._initAppointmentTemplate();\n\n    this._templateManager.addDefaultTemplates({\n      appointmentTooltip: new _empty_template.EmptyTemplate(),\n      dropDownAppointment: new _empty_template.EmptyTemplate()\n    });\n\n    this.callBase();\n  },\n  _initAppointmentTemplate: function () {\n    var _this4 = this;\n\n    var expr = this._dataAccessors.expr;\n\n    var createGetter = function (property) {\n      return _data2.default.compileGetter(\"appointmentData.\".concat(property));\n    };\n\n    this._templateManager.addDefaultTemplates(_defineProperty({}, \"item\", new _bindable_template.BindableTemplate(function ($container, data, model) {\n      _this4.getAppointmentsInstance()._renderAppointmentTemplate($container, data, model);\n    }, [\"html\", \"text\", \"startDate\", \"endDate\", \"allDay\", \"description\", \"recurrenceRule\", \"recurrenceException\", \"startDateTimeZone\", \"endDateTimeZone\"], this.option(\"integrationOptions.watchMethod\"), {\n      text: createGetter(expr.textExpr),\n      startDate: createGetter(expr.startDateExpr),\n      endDate: createGetter(expr.endDateExpr),\n      startDateTimeZone: createGetter(expr.startDateTimeZoneExpr),\n      endDateTimeZone: createGetter(expr.endDateTimeZoneExpr),\n      allDay: createGetter(expr.allDayExpr),\n      recurrenceRule: createGetter(expr.recurrenceRuleExpr)\n    })));\n  },\n  _combineDataAccessors: function () {\n    var resourcesDataAccessors = this._resourcesManager._dataAccessors;\n    var result = (0, _extend.extend)(true, {}, this._dataAccessors);\n    (0, _iterator.each)(resourcesDataAccessors, function (type, accessor) {\n      result[type].resources = accessor;\n    }.bind(this));\n    return result;\n  },\n  _renderContent: function () {\n    this._renderContentImpl();\n  },\n  _dataSourceChangedHandler: function (result) {\n    if (this._readyToRenderAppointments) {\n      this._workSpaceRecalculation.done(function () {\n        this._filteredItems = this.fire(\"prerenderFilter\");\n\n        this._workSpace.option(\"allDayExpanded\", this._isAllDayExpanded(this._filteredItems));\n\n        if (this._isAgenda()) {\n          this.getRenderingStrategyInstance().calculateRows(this._filteredItems, 7, this.option(\"currentDate\"), true);\n        }\n\n        if (this._filteredItems.length && this._isVisible()) {\n          this._appointments.option(\"items\", this._getAppointmentsToRepaint());\n\n          this._appointmentModel.cleanModelState();\n        } else {\n          this._appointments.option(\"items\", []);\n        }\n\n        if (this._isAgenda()) {\n          this._workSpace._renderView();\n\n          this._dataSourceLoadedCallback.fireWith(this, [result]);\n        }\n      }.bind(this));\n    }\n  },\n  _getAppointmentsToRepaint: function () {\n    var appointments = this._layoutManager.createAppointmentsMap(this._filteredItems);\n\n    return this._layoutManager.getRepaintedAppointments(appointments, this.getAppointmentsInstance().option(\"items\"));\n  },\n  _initExpressions: function (fields) {\n    var isDateField = function (field) {\n      return \"startDate\" === field || \"endDate\" === field;\n    };\n\n    if (!this._dataAccessors) {\n      this._dataAccessors = {\n        getter: {},\n        setter: {},\n        expr: {}\n      };\n    }\n\n    (0, _iterator.each)(fields, function (name, expr) {\n      if (expr) {\n        var getter = _data2.default.compileGetter(expr);\n\n        var setter = _data2.default.compileSetter(expr);\n\n        var dateGetter;\n        var dateSetter;\n\n        if (isDateField(name)) {\n          var that = this;\n\n          dateGetter = function () {\n            var value = getter.apply(this, arguments);\n\n            if ((0, _config2.default)().forceIsoDateParsing) {\n              if (!that.option(\"dateSerializationFormat\")) {\n                var format = _date_serialization2.default.getDateSerializationFormat(value);\n\n                if (format) {\n                  that.option(\"dateSerializationFormat\", format);\n                }\n              }\n\n              value = _date_serialization2.default.deserializeDate(value);\n            }\n\n            return value;\n          };\n\n          dateSetter = function (object, value) {\n            if ((0, _config2.default)().forceIsoDateParsing || that.option(\"dateSerializationFormat\")) {\n              value = _date_serialization2.default.serializeDate(value, that.option(\"dateSerializationFormat\"));\n            }\n\n            setter.call(this, object, value);\n          };\n        }\n\n        this._dataAccessors.getter[name] = dateGetter || getter;\n        this._dataAccessors.setter[name] = dateSetter || setter;\n        this._dataAccessors.expr[name + \"Expr\"] = expr;\n      } else {\n        delete this._dataAccessors.getter[name];\n        delete this._dataAccessors.setter[name];\n        delete this._dataAccessors.expr[name + \"Expr\"];\n      }\n    }.bind(this));\n  },\n  _updateExpression: function (name, value) {\n    var exprObj = {};\n    exprObj[name.replace(\"Expr\", \"\")] = value;\n\n    this._initExpressions(exprObj);\n  },\n  _initEditing: function () {\n    var editing = this.option(\"editing\");\n    this._editing = {\n      allowAdding: !!editing,\n      allowUpdating: !!editing,\n      allowDeleting: !!editing,\n      allowResizing: !!editing,\n      allowDragging: !!editing\n    };\n\n    if (_type2.default.isObject(editing)) {\n      this._editing = (0, _extend.extend)(this._editing, editing);\n    }\n\n    this._editing.allowDragging = this._editing.allowDragging && this._editing.allowUpdating;\n    this._editing.allowResizing = this._editing.allowResizing && this._editing.allowUpdating;\n    this.$element().toggleClass(WIDGET_READONLY_CLASS, this._isReadOnly());\n  },\n  _isReadOnly: function () {\n    var result = true;\n    var editing = this._editing;\n\n    for (var prop in editing) {\n      if (Object.prototype.hasOwnProperty.call(editing, prop)) {\n        result = result && !editing[prop];\n      }\n    }\n\n    return result;\n  },\n  _dispose: function () {\n    this._appointmentTooltip && this._appointmentTooltip.dispose();\n    this.hideAppointmentPopup();\n    this.hideAppointmentTooltip();\n\n    this._asyncTemplatesTimers.forEach(clearTimeout);\n\n    this._asyncTemplatesTimers = [];\n    this.callBase();\n  },\n  _initActions: function () {\n    this._actions = {\n      onAppointmentAdding: this._createActionByOption(\"onAppointmentAdding\"),\n      onAppointmentAdded: this._createActionByOption(\"onAppointmentAdded\"),\n      onAppointmentUpdating: this._createActionByOption(\"onAppointmentUpdating\"),\n      onAppointmentUpdated: this._createActionByOption(\"onAppointmentUpdated\"),\n      onAppointmentDeleting: this._createActionByOption(\"onAppointmentDeleting\"),\n      onAppointmentDeleted: this._createActionByOption(\"onAppointmentDeleted\"),\n      onAppointmentFormOpening: this._createActionByOption(\"onAppointmentFormOpening\")\n    };\n  },\n  _getAppointmentRenderedAction: function () {\n    return this._createActionByOption(\"onAppointmentRendered\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n  },\n  _renderFocusTarget: _common.noop,\n  _initMarkup: function () {\n    this.callBase();\n    this.fire(\"validateDayHours\");\n\n    this._validateCellDuration();\n\n    this._processCurrentView();\n\n    this._renderHeader();\n\n    this._layoutManager = new _uiSchedulerAppointments2.default(this, this._getAppointmentsRenderingStrategy());\n    this._appointments = this._createComponent(\"<div>\", _uiScheduler28.default, this._appointmentsConfig());\n\n    this._appointments.option(\"itemTemplate\", this._getAppointmentTemplate(\"appointmentTemplate\"));\n\n    this._appointmentTooltip = new (this.option(\"adaptivityEnabled\") ? _mobileTooltipStrategy.MobileTooltipStrategy : _desktopTooltipStrategy.DesktopTooltipStrategy)(this._getAppointmentTooltipOptions());\n    this._appointmentPopup = new _appointmentPopup2.default(this);\n\n    if (this._isLoaded()) {\n      this._initMarkupCore(this._loadedResources);\n\n      this._dataSourceChangedHandler(this._dataSource.items());\n\n      this._fireContentReadyAction();\n    } else {\n      this._loadResources().done(function (resources) {\n        this._initMarkupCore(resources);\n\n        this._reloadDataSource();\n      }.bind(this));\n    }\n  },\n  _getAppointmentTooltipOptions: function () {\n    var _this5 = this;\n\n    var that = this;\n    return {\n      createComponent: that._createComponent.bind(that),\n      container: that.$element(),\n      getScrollableContainer: that.getWorkSpaceScrollableContainer.bind(that),\n      addDefaultTemplates: that._templateManager.addDefaultTemplates.bind(that._templateManager),\n      getAppointmentTemplate: that._getAppointmentTemplate.bind(that),\n      showAppointmentPopup: that.showAppointmentPopup.bind(that),\n      getTextAndFormatDate: function (data, currentData, format) {\n        return that.fire(\"getTextAndFormatDate\", data, currentData, format);\n      },\n      checkAndDeleteAppointment: that.checkAndDeleteAppointment.bind(that),\n      isAppointmentInAllDayPanel: that.isAppointmentInAllDayPanel.bind(that),\n      getSingleAppointmentData: function (appointmentData, targetElement) {\n        var $appointment = (0, _renderer2.default)(targetElement);\n        return _this5._getAppointmentData(appointmentData, {\n          data: appointmentData,\n          target: $appointment.get(0),\n          $appointment: $appointment,\n          skipHoursProcessing: true\n        });\n      }\n    };\n  },\n  checkAndDeleteAppointment: function (data, appointmentData) {\n    var that = this;\n    var startDate = that.fire(\"getField\", \"startDate\", appointmentData);\n\n    that._checkRecurringAppointment(data, appointmentData, startDate, function () {\n      that.deleteAppointment(data);\n    }, true);\n  },\n  _getExtraAppointmentTooltipOptions: function () {\n    return {\n      rtlEnabled: this.option(\"rtlEnabled\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      editing: this.option(\"editing\"),\n      offset: this.option(\"_appointmentTooltipOffset\")\n    };\n  },\n  isAppointmentInAllDayPanel: function (appointmentData) {\n    var workSpace = this._workSpace;\n    var itTakesAllDay = this.appointmentTakesAllDay(appointmentData);\n    return itTakesAllDay && workSpace.supportAllDayRow() && workSpace.option(\"showAllDayPanel\");\n  },\n  _initMarkupCore: function (resources) {\n    var _this6 = this;\n\n    this._readyToRenderAppointments = _window2.default.hasWindow();\n    this._workSpace && this._cleanWorkspace();\n\n    this._renderWorkSpace(resources);\n\n    this._appointments.option({\n      fixedContainer: this._workSpace.getFixedContainer(),\n      allDayContainer: this._workSpace.getAllDayContainer()\n    });\n\n    this._waitAsyncTemplate(function () {\n      var _this6$_workSpaceReca;\n\n      return null === (_this6$_workSpaceReca = _this6._workSpaceRecalculation) || void 0 === _this6$_workSpaceReca ? void 0 : _this6$_workSpaceReca.resolve();\n    });\n\n    this._filterAppointmentsByDate();\n  },\n  _isLoaded: function () {\n    return this._isResourcesLoaded() && this._isDataSourceLoaded();\n  },\n  _isResourcesLoaded: function () {\n    return _type2.default.isDefined(this._loadedResources);\n  },\n  _isDataSourceLoaded: function () {\n    return this._dataSource && this._dataSource.isLoaded();\n  },\n  _render: function () {\n    this._toggleSmallClass();\n\n    this._toggleAdaptiveClass();\n\n    this.callBase();\n  },\n  _renderHeader: function () {\n    var $header = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\n    this._header = this._createComponent($header, _uiScheduler4.default, this._headerConfig());\n  },\n  _headerConfig: function () {\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    var countConfig = this._getViewCountConfig();\n\n    var result = (0, _extend.extend)({\n      isAdaptive: this.option(\"adaptivityEnabled\"),\n      firstDayOfWeek: this.option(\"firstDayOfWeek\"),\n      currentView: this._currentView,\n      tabIndex: this.option(\"tabIndex\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      width: this.option(\"width\"),\n      rtlEnabled: this.option(\"rtlEnabled\"),\n      useDropDownViewSwitcher: this.option(\"useDropDownViewSwitcher\"),\n      _dropDownButtonIcon: this.option(\"_dropDownButtonIcon\"),\n      customizeDateNavigatorText: this.option(\"customizeDateNavigatorText\")\n    }, currentViewOptions);\n    result.observer = this;\n    result.intervalCount = countConfig.intervalCount;\n    result.views = this.option(\"views\");\n    result.min = new Date(this._dateOption(\"min\"));\n    result.max = new Date(this._dateOption(\"max\"));\n    result.currentDate = _date2.default.trimTime(new Date(this._dateOption(\"currentDate\")));\n    return result;\n  },\n  _appointmentsConfig: function () {\n    var that = this;\n    var config = {\n      observer: this,\n      onItemRendered: this._getAppointmentRenderedAction(),\n      onItemClick: this._createActionByOption(\"onAppointmentClick\"),\n      onItemContextMenu: this._createActionByOption(\"onAppointmentContextMenu\"),\n      onAppointmentDblClick: this._createActionByOption(\"onAppointmentDblClick\"),\n      tabIndex: this.option(\"tabIndex\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      allowDrag: this._allowDragging(),\n      allowDelete: this._editing.allowUpdating && this._editing.allowDeleting,\n      allowResize: this._allowResizing(),\n      allowAllDayResize: this._allowAllDayResizing(),\n      rtlEnabled: this.option(\"rtlEnabled\"),\n      currentView: this.option(\"currentView\"),\n      onContentReady: function () {\n        that._workSpace && that._workSpace.option(\"allDayExpanded\", that._isAllDayExpanded(that.getFilteredItems()));\n      }\n    };\n    return config;\n  },\n  getCollectorOffset: function () {\n    if (this._workSpace.needApplyCollectorOffset() && !this.option(\"adaptivityEnabled\")) {\n      return this.option(\"_collectorOffset\");\n    } else {\n      return 0;\n    }\n  },\n  getAppointmentDurationInMinutes: function () {\n    return this._getCurrentViewOption(\"cellDuration\");\n  },\n  _processCurrentView: function () {\n    var views = this.option(\"views\");\n    var currentView = this.option(\"currentView\");\n    var that = this;\n    this._currentView = currentView;\n    (0, _iterator.each)(views, function (_, view) {\n      var isViewIsObject = _type2.default.isObject(view);\n\n      var viewName = isViewIsObject ? view.name : view;\n      var viewType = view.type;\n\n      if (currentView === viewName || currentView === viewType) {\n        that._currentView = view;\n        return false;\n      }\n    });\n  },\n  _validateCellDuration: function () {\n    var endDayHour = this._getCurrentViewOption(\"endDayHour\");\n\n    var startDayHour = this._getCurrentViewOption(\"startDayHour\");\n\n    var cellDuration = this._getCurrentViewOption(\"cellDuration\");\n\n    if ((endDayHour - startDayHour) * MINUTES_IN_HOUR % cellDuration !== 0) {\n      _ui2.default.log(\"W1015\");\n    }\n  },\n  _getCurrentViewType: function () {\n    return this._currentView.type || this._currentView;\n  },\n  _getAppointmentsRenderingStrategy: function () {\n    return VIEWS_CONFIG[this._getCurrentViewType()].renderingStrategy;\n  },\n  _renderWorkSpace: function (groups) {\n    this._readyToRenderAppointments && this._toggleSmallClass();\n    var $workSpace = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\n\n    var countConfig = this._getViewCountConfig();\n\n    this._workSpace = this._createComponent($workSpace, VIEWS_CONFIG[this._getCurrentViewType()].workSpace, this._workSpaceConfig(groups, countConfig));\n    this._allowDragging() && this._workSpace.initDragBehavior(this);\n\n    this._workSpace._attachTablesEvents();\n\n    this._workSpace.getWorkArea().append(this._appointments.$element());\n\n    this._recalculateWorkspace();\n\n    countConfig.startDate && this._header && this._header.option(\"currentDate\", this._workSpace._getHeaderDate());\n\n    this._appointments.option(\"_collectorOffset\", this.getCollectorOffset());\n  },\n  _getViewCountConfig: function () {\n    var currentView = this.option(\"currentView\");\n\n    var view = this._getViewByName(currentView);\n\n    var viewCount = view && view.intervalCount || 1;\n    var startDate = view && view.startDate || null;\n    return {\n      intervalCount: viewCount,\n      startDate: startDate\n    };\n  },\n  _getViewByName: function (name) {\n    var views = this.option(\"views\");\n\n    for (var i = 0; i < views.length; i++) {\n      if (views[i].name === name || views[i].type === name || views[i] === name) {\n        return views[i];\n      }\n    }\n  },\n  _recalculateWorkspace: function () {\n    var _this7 = this;\n\n    this._workSpaceRecalculation = new Deferred();\n\n    this._waitAsyncTemplate(function () {\n      _dom2.default.triggerResizeEvent(_this7._workSpace.$element());\n\n      _this7._workSpace._refreshDateTimeIndication();\n    });\n  },\n  _workSpaceConfig: function (groups, countConfig) {\n    var _this8 = this;\n\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    var result = (0, _extend.extend)({\n      noDataText: this.option(\"noDataText\"),\n      firstDayOfWeek: this.option(\"firstDayOfWeek\"),\n      startDayHour: this.option(\"startDayHour\"),\n      endDayHour: this.option(\"endDayHour\"),\n      tabIndex: this.option(\"tabIndex\"),\n      accessKey: this.option(\"accessKey\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      cellDuration: this.option(\"cellDuration\"),\n      showAllDayPanel: this.option(\"showAllDayPanel\"),\n      showCurrentTimeIndicator: this.option(\"showCurrentTimeIndicator\"),\n      indicatorTime: this.option(\"indicatorTime\"),\n      indicatorUpdateInterval: this.option(\"indicatorUpdateInterval\"),\n      shadeUntilCurrentTime: this.option(\"shadeUntilCurrentTime\"),\n      allDayExpanded: this._appointments.option(\"items\"),\n      crossScrollingEnabled: this.option(\"crossScrollingEnabled\"),\n      dataCellTemplate: this.option(\"dataCellTemplate\"),\n      timeCellTemplate: this.option(\"timeCellTemplate\"),\n      resourceCellTemplate: this.option(\"resourceCellTemplate\"),\n      dateCellTemplate: this.option(\"dateCellTemplate\"),\n      allowMultipleCellSelection: this.option(\"allowMultipleCellSelection\"),\n      selectedCellData: this.option(\"selectedCellData\"),\n      onSelectionChanged: function (args) {\n        _this8.option(\"selectedCellData\", args.selectedCellData);\n      },\n      groupByDate: this._getCurrentViewOption(\"groupByDate\")\n    }, currentViewOptions);\n    result.observer = this;\n    result.intervalCount = countConfig.intervalCount;\n    result.startDate = countConfig.startDate;\n    result.groups = groups;\n    result.onCellClick = this._createActionByOption(\"onCellClick\");\n    result.onCellContextMenu = this._createActionByOption(\"onCellContextMenu\");\n    result.min = new Date(this._dateOption(\"min\"));\n    result.max = new Date(this._dateOption(\"max\"));\n    result.currentDate = _date2.default.trimTime(new Date(this._dateOption(\"currentDate\")));\n    result.hoursInterval = result.cellDuration / 60;\n    result.allDayExpanded = this._isAllDayExpanded(this.getFilteredItems());\n    result.dataCellTemplate = result.dataCellTemplate ? this._getTemplate(result.dataCellTemplate) : null;\n    result.timeCellTemplate = result.timeCellTemplate ? this._getTemplate(result.timeCellTemplate) : null;\n    result.resourceCellTemplate = result.resourceCellTemplate ? this._getTemplate(result.resourceCellTemplate) : null;\n    result.dateCellTemplate = result.dateCellTemplate ? this._getTemplate(result.dateCellTemplate) : null;\n    return result;\n  },\n  _waitAsyncTemplate: function (callback) {\n    if (this._options.silent(\"templatesRenderAsynchronously\")) {\n      var timer = setTimeout(function () {\n        callback();\n        clearTimeout(timer);\n      });\n\n      this._asyncTemplatesTimers.push(timer);\n    } else {\n      callback();\n    }\n  },\n  _getCurrentViewOptions: function () {\n    return this._currentView;\n  },\n  _getCurrentViewOption: function (optionName) {\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    if (currentViewOptions && void 0 !== currentViewOptions[optionName]) {\n      return currentViewOptions[optionName];\n    }\n\n    return this.option(optionName);\n  },\n  _getAppointmentTemplate: function (optionName) {\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    if (currentViewOptions && currentViewOptions[optionName]) {\n      return this._getTemplate(currentViewOptions[optionName]);\n    }\n\n    return this._getTemplateByOption(optionName);\n  },\n  _updateOption: function (viewName, optionName, value) {\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    if (!currentViewOptions || !_type2.default.isDefined(currentViewOptions[optionName])) {\n      this[\"_\" + viewName].option(optionName, value);\n    }\n  },\n  _refreshWorkSpace: function (groups) {\n    var _this9 = this;\n\n    this._cleanWorkspace();\n\n    delete this._workSpace;\n\n    this._renderWorkSpace(groups);\n\n    if (this._readyToRenderAppointments) {\n      this._appointments.option({\n        fixedContainer: this._workSpace.getFixedContainer(),\n        allDayContainer: this._workSpace.getAllDayContainer()\n      });\n\n      this._waitAsyncTemplate(function () {\n        return _this9._workSpaceRecalculation.resolve();\n      });\n    }\n  },\n  _cleanWorkspace: function () {\n    this._appointments.$element().detach();\n\n    this._workSpace._dispose();\n\n    this._workSpace.$element().remove();\n\n    this.option(\"selectedCellData\", []);\n  },\n  getWorkSpaceScrollable: function () {\n    return this._workSpace.getScrollable();\n  },\n  getWorkSpaceScrollableScrollTop: function (allDay) {\n    return this._workSpace.getGroupedScrollableScrollTop(allDay);\n  },\n  getWorkSpaceScrollableScrollLeft: function () {\n    return this._workSpace.getScrollableScrollLeft();\n  },\n  getWorkSpaceScrollableContainer: function () {\n    return this._workSpace.getScrollableContainer();\n  },\n  getWorkSpaceAllDayHeight: function () {\n    return this._workSpace.getAllDayHeight();\n  },\n  getWorkSpaceAllDayOffset: function () {\n    return this._workSpace.getAllDayOffset();\n  },\n  getWorkSpaceHeaderPanelHeight: function () {\n    return this._workSpace.getHeaderPanelHeight();\n  },\n  getWorkSpaceDateTableOffset: function () {\n    return !this.option(\"crossScrollingEnabled\") || this.option(\"rtlEnabled\") ? this._workSpace.getWorkSpaceLeftOffset() : 0;\n  },\n  getWorkSpace: function () {\n    return this._workSpace;\n  },\n  getAppointmentModel: function () {\n    return this._appointmentModel;\n  },\n  getHeader: function () {\n    return this._header;\n  },\n  getMaxAppointmentsPerCell: function () {\n    return this._getCurrentViewOption(\"maxAppointmentsPerCell\");\n  },\n  _cleanPopup: function () {\n    this._appointmentPopup && this._appointmentPopup.dispose();\n  },\n  _convertDatesByTimezoneBack: function (applyAppointmentTimezone, sourceAppointmentData, targetAppointmentData) {\n    targetAppointmentData = targetAppointmentData || sourceAppointmentData;\n    var processedStartDate = this.fire(\"convertDateByTimezoneBack\", this.fire(\"getField\", \"startDate\", sourceAppointmentData), applyAppointmentTimezone && this.fire(\"getField\", \"startDateTimeZone\", sourceAppointmentData));\n    var processedEndDate = this.fire(\"convertDateByTimezoneBack\", this.fire(\"getField\", \"endDate\", sourceAppointmentData), applyAppointmentTimezone && this.fire(\"getField\", \"endDateTimeZone\", sourceAppointmentData));\n    this.fire(\"setField\", \"startDate\", targetAppointmentData, processedStartDate);\n    this.fire(\"setField\", \"endDate\", targetAppointmentData, processedEndDate);\n  },\n  _checkRecurringAppointment: function (targetAppointment, singleAppointment, exceptionDate, callback, isDeleted, isPopupEditing, dragEvent) {\n    delete this._updatedRecAppointment;\n    var recurrenceRule = this.fire(\"getField\", \"recurrenceRule\", targetAppointment);\n\n    if (!_utils2.default.getRecurrenceRule(recurrenceRule).isValid || !this._editing.allowUpdating) {\n      callback();\n      return;\n    }\n\n    var editMode = this.option(\"recurrenceEditMode\");\n\n    switch (editMode) {\n      case \"series\":\n        callback();\n        break;\n\n      case \"occurrence\":\n        this._singleAppointmentChangesHandler(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent);\n\n        break;\n\n      default:\n        if (dragEvent) {\n          dragEvent.cancel = new Deferred();\n        }\n\n        this._showRecurrenceChangeConfirm(isDeleted).done(function (result) {\n          result && callback();\n          !result && this._singleAppointmentChangesHandler(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent);\n        }.bind(this)).fail(function () {\n          this._appointments.moveAppointmentBack(dragEvent);\n        }.bind(this));\n\n    }\n  },\n  _singleAppointmentChangesHandler: function (targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent) {\n    exceptionDate = new Date(exceptionDate);\n\n    function processAppointmentDates(appointment, commonTimezoneOffset) {\n      var startDate = this.fire(\"getField\", \"startDate\", appointment);\n      var processedStartDate = this.fire(\"convertDateByTimezoneBack\", startDate, this.fire(\"getField\", \"startDateTimeZone\", appointment));\n      var endDate = this.fire(\"getField\", \"endDate\", appointment);\n      var processedEndDate = this.fire(\"convertDateByTimezoneBack\", endDate, this.fire(\"getField\", \"endDateTimeZone\", appointment));\n\n      if (\"number\" === typeof commonTimezoneOffset && !isNaN(commonTimezoneOffset)) {\n        var startDateClientTzOffset = -(this._subscribes.getClientTimezoneOffset(startDate) / toMs(\"hour\"));\n        var endDateClientTzOffset = -(this._subscribes.getClientTimezoneOffset(endDate) / toMs(\"hour\"));\n        var processedStartDateInUTC = processedStartDate.getTime() - startDateClientTzOffset * toMs(\"hour\");\n        var processedEndDateInUTC = processedEndDate.getTime() - endDateClientTzOffset * toMs(\"hour\");\n        processedStartDate = new Date(processedStartDateInUTC + commonTimezoneOffset * toMs(\"hour\"));\n        processedEndDate = new Date(processedEndDateInUTC + commonTimezoneOffset * toMs(\"hour\"));\n      }\n\n      this.fire(\"setField\", \"startDate\", appointment, processedStartDate);\n      this.fire(\"setField\", \"endDate\", appointment, processedEndDate);\n    }\n\n    this.fire(\"setField\", \"recurrenceRule\", singleAppointment, \"\");\n    this.fire(\"setField\", \"recurrenceException\", singleAppointment, \"\");\n\n    if (!isDeleted && !isPopupEditing) {\n      processAppointmentDates.call(this, singleAppointment, this._getTimezoneOffsetByOption());\n      this.addAppointment(singleAppointment);\n    }\n\n    var recurrenceException = this._makeDateAsRecurrenceException(exceptionDate, targetAppointment);\n\n    var updatedAppointment = (0, _extend.extend)({}, targetAppointment);\n    this.fire(\"setField\", \"recurrenceException\", updatedAppointment, recurrenceException);\n\n    if (isPopupEditing) {\n      this._updatedRecAppointment = updatedAppointment;\n\n      this._showAppointmentPopup(singleAppointment, true, false);\n\n      this._editAppointmentData = targetAppointment;\n    } else {\n      this._updateAppointment(targetAppointment, updatedAppointment, function () {\n        this._appointments.moveAppointmentBack(dragEvent);\n      }, dragEvent);\n    }\n  },\n  _makeDateAsRecurrenceException: function (exceptionDate, targetAppointment) {\n    var startDate = this._getStartDate(targetAppointment, true);\n\n    var isAllDay = this.fire(\"getField\", \"allDay\", targetAppointment);\n    var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", targetAppointment);\n\n    var exceptionByDate = this._getRecurrenceExceptionDate(exceptionDate, startDate, startDateTimeZone, isAllDay);\n\n    var recurrenceException = this.fire(\"getField\", \"recurrenceException\", targetAppointment);\n    return recurrenceException ? recurrenceException + \",\" + exceptionByDate : exceptionByDate;\n  },\n  _getRecurrenceExceptionDate: function (exceptionStartDate, targetStartDate, startDateTimeZone, isAllDay) {\n    exceptionStartDate = this.fire(\"convertDateByTimezoneBack\", exceptionStartDate, startDateTimeZone);\n    var appointmentStartDate = this.fire(\"convertDateByTimezoneBack\", targetStartDate, startDateTimeZone);\n    exceptionStartDate = _utils4.default.correctRecurrenceExceptionByTimezone(exceptionStartDate, appointmentStartDate, this.option(\"timeZone\"), startDateTimeZone, true);\n    isAllDay && exceptionStartDate.setHours(appointmentStartDate.getHours(), appointmentStartDate.getMinutes(), appointmentStartDate.getSeconds(), appointmentStartDate.getMilliseconds());\n    return _date_serialization2.default.serializeDate(exceptionStartDate, UTC_FULL_DATE_FORMAT);\n  },\n  _showRecurrenceChangeConfirm: function (isDeleted) {\n    var message = _message2.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteMessage\" : \"dxScheduler-confirmRecurrenceEditMessage\");\n\n    var seriesText = _message2.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteSeries\" : \"dxScheduler-confirmRecurrenceEditSeries\");\n\n    var occurrenceText = _message2.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteOccurrence\" : \"dxScheduler-confirmRecurrenceEditOccurrence\");\n\n    return _dialog2.default.custom({\n      messageHtml: message,\n      showCloseButton: true,\n      showTitle: true,\n      buttons: [{\n        text: seriesText,\n        onClick: function () {\n          return true;\n        }\n      }, {\n        text: occurrenceText,\n        onClick: function () {\n          return false;\n        }\n      }]\n    }).show();\n  },\n  _getUpdatedData: function (options) {\n    var target = options.data || options;\n    var cellData = this.getTargetCellData();\n    var targetAllDay = this.fire(\"getField\", \"allDay\", target);\n    var targetStartDate = new Date(this.fire(\"getField\", \"startDate\", target));\n    var targetEndDate = new Date(this.fire(\"getField\", \"endDate\", target));\n    var date = cellData.date || targetStartDate;\n    var duration = targetEndDate.getTime() - targetStartDate.getTime();\n\n    if (this._workSpace.keepOriginalHours() && !isNaN(targetStartDate.getTime())) {\n      var diff = targetStartDate.getTime() - _date2.default.trimTime(targetStartDate).getTime();\n\n      date = new Date(_date2.default.trimTime(date).getTime() + diff);\n    }\n\n    var updatedData = {};\n    var allDay = cellData.allDay;\n    this.fire(\"setField\", \"allDay\", updatedData, allDay);\n    this.fire(\"setField\", \"startDate\", updatedData, date);\n    var endDate = new Date(date.getTime() + duration);\n\n    if (this.appointmentTakesAllDay(target) && !updatedData.allDay && this._workSpace.supportAllDayRow()) {\n      endDate = this._workSpace.calculateEndDate(date);\n    }\n\n    if (targetAllDay && !this._workSpace.supportAllDayRow() && !this._workSpace.keepOriginalHours()) {\n      var dateCopy = new Date(date);\n      dateCopy.setHours(0);\n      endDate = new Date(dateCopy.getTime() + duration);\n\n      if (0 !== endDate.getHours()) {\n        endDate.setHours(this._getCurrentViewOption(\"endDayHour\"));\n      }\n    }\n\n    endDate = new Date(endDate.getTime() - _utils4.default.getTimezoneOffsetChangeInMs(targetStartDate, targetEndDate, date, endDate));\n    this.fire(\"setField\", \"endDate\", updatedData, endDate);\n\n    this._resourcesManager.setResourcesToItem(updatedData, cellData.groups);\n\n    return updatedData;\n  },\n  _getCoordinates: function (initialDates, dates, appointmentResources, allDay) {\n    var result = [];\n\n    for (var i = 0; i < dates.length; i++) {\n      var currentCoords = this._workSpace.getCoordinatesByDateInGroup(dates[i], appointmentResources, allDay);\n\n      for (var j = 0; j < currentCoords.length; j++) {\n        (0, _extend.extend)(currentCoords[j], {\n          startDate: dates[i],\n          initialStartDate: initialDates[i]\n        });\n      }\n\n      result = result.concat(currentCoords);\n    }\n\n    return result;\n  },\n  _isAppointmentRecurrence: function (appointmentData) {\n    var recurrenceRule = this.fire(\"getField\", \"recurrenceRule\", appointmentData);\n    return recurrenceRule && _utils2.default.getRecurrenceRule(recurrenceRule).isValid;\n  },\n  _getAppointmentData: function (appointmentData, options) {\n    options = options || {};\n    var $appointment = options.$appointment;\n    var updatedData = options.skipDateCalculation ? {} : this._getUpdatedData(options);\n    var resultAppointmentData = (0, _extend.extend)({}, appointmentData, updatedData);\n    var allDay = this.fire(\"getField\", \"allDay\", appointmentData);\n    var isAllDay = this._workSpace.supportAllDayRow() && allDay;\n    var startDate = new Date(this.fire(\"getField\", \"startDate\", resultAppointmentData));\n    var endDate = new Date(this.fire(\"getField\", \"endDate\", resultAppointmentData));\n    var appointmentDuration = endDate.getTime() - startDate.getTime();\n    var updatedStartDate = startDate;\n    var appointmentStartDate;\n    var appointmentEndDate;\n\n    if (_type2.default.isDefined($appointment)) {\n      var apptDataCalculator = this.getRenderingStrategyInstance().getAppointmentDataCalculator();\n\n      if (_type2.default.isFunction(apptDataCalculator) && this._isAppointmentRecurrence(appointmentData)) {\n        updatedStartDate = apptDataCalculator($appointment, startDate).startDate;\n      } else {\n        if (options.isAppointmentResized) {\n          var coordinates = _translator2.default.locate($appointment);\n\n          updatedStartDate = new Date(this._workSpace.getCellDataByCoordinates(coordinates, isAllDay).startDate);\n        } else {\n          var settings = $appointment.data(\"dxAppointmentSettings\");\n          appointmentStartDate = settings && settings.originalAppointmentStartDate;\n          appointmentEndDate = settings && settings.originalAppointmentEndDate;\n\n          if (this._isAppointmentRecurrence(appointmentData)) {\n            appointmentStartDate = settings && settings.startDate;\n            appointmentEndDate = settings && settings.endDate;\n          }\n\n          if (appointmentStartDate) {\n            updatedStartDate = appointmentStartDate;\n          }\n        }\n      }\n    }\n\n    this.fire(\"setField\", \"startDate\", resultAppointmentData, updatedStartDate);\n    this.fire(\"setField\", \"endDate\", resultAppointmentData, appointmentEndDate || new Date(updatedStartDate.getTime() + appointmentDuration));\n\n    if (!options.skipHoursProcessing && !options.isAppointmentResized) {\n      this._convertDatesByTimezoneBack(false, resultAppointmentData);\n    }\n\n    return resultAppointmentData;\n  },\n  subscribe: function (subject, action) {\n    this._subscribes[subject] = _uiScheduler2.default[subject] = action;\n  },\n  fire: function (subject) {\n    var callback = this._subscribes[subject];\n    var args = Array.prototype.slice.call(arguments);\n\n    if (!_type2.default.isFunction(callback)) {\n      throw _ui2.default.Error(\"E1031\", subject);\n    }\n\n    return callback.apply(this, args.slice(1));\n  },\n  getTargetCellData: function () {\n    return this._workSpace.getDataByDroppableCell();\n  },\n  _updateAppointment: function (target, appointment, onUpdatePrevented, dragEvent) {\n    var updatingOptions = {\n      newData: appointment,\n      oldData: (0, _extend.extend)({}, target),\n      cancel: false\n    };\n\n    var performFailAction = function (err) {\n      if (_type2.default.isFunction(onUpdatePrevented)) {\n        onUpdatePrevented.call(this);\n      }\n\n      if (err && \"Error\" === err.name) {\n        throw err;\n      }\n    }.bind(this);\n\n    this._actions.onAppointmentUpdating(updatingOptions);\n\n    if (dragEvent && !_type2.default.isDeferred(dragEvent.cancel)) {\n      dragEvent.cancel = new Deferred();\n    }\n\n    return this._processActionResult(updatingOptions, function (canceled) {\n      var deferred = new Deferred();\n\n      if (!canceled) {\n        this._expandAllDayPanel(appointment);\n\n        try {\n          deferred = this._appointmentModel.update(target, appointment).done(function () {\n            dragEvent && dragEvent.cancel.resolve(false);\n          }).always(function (e) {\n            this._executeActionWhenOperationIsCompleted(this._actions.onAppointmentUpdated, appointment, e);\n          }.bind(this)).fail(function () {\n            performFailAction();\n          });\n        } catch (err) {\n          performFailAction(err);\n        }\n      } else {\n        performFailAction();\n      }\n\n      return deferred.promise();\n    });\n  },\n  _processActionResult: function (actionOptions, callback) {\n    var _this10 = this;\n\n    var deferred = new Deferred();\n\n    var resolveCallback = function (callbackResult) {\n      when(_deferred2.default.fromPromise(callbackResult)).always(deferred.resolve);\n    };\n\n    if (_type2.default.isPromise(actionOptions.cancel)) {\n      when(_deferred2.default.fromPromise(actionOptions.cancel)).always(function (cancel) {\n        if (!_type2.default.isDefined(cancel)) {\n          cancel = \"rejected\" === actionOptions.cancel.state();\n        }\n\n        resolveCallback(callback.call(_this10, cancel));\n      });\n    } else {\n      resolveCallback(callback.call(this, actionOptions.cancel));\n    }\n\n    return deferred.promise();\n  },\n  _expandAllDayPanel: function (appointment) {\n    if (!this._isAllDayExpanded(this.getFilteredItems()) && this.appointmentTakesAllDay(appointment)) {\n      this._workSpace.option(\"allDayExpanded\", true);\n    }\n  },\n  _executeActionWhenOperationIsCompleted: function (action, appointment, e) {\n    var options = {\n      appointmentData: appointment\n    };\n    var isError = e && \"Error\" === e.name;\n\n    if (isError) {\n      options.error = e;\n    } else {\n      this._appointmentPopup.isVisible() && this._appointmentPopup.hide();\n    }\n\n    action(options);\n\n    this._fireContentReadyAction();\n  },\n  _showAppointmentPopup: function (data, visibleButtons, isProcessTimeZone) {\n    this._appointmentPopup.show(data, visibleButtons, isProcessTimeZone);\n  },\n  getAppointmentPopup: function () {\n    return this._appointmentPopup.getPopup();\n  },\n  getUpdatedAppointment: function () {\n    return this._appointmentModel.getUpdatedAppointment();\n  },\n  getUpdatedAppointmentKeys: function () {\n    return this._appointmentModel.getUpdatedAppointmentKeys();\n  },\n  getAppointmentsInstance: function () {\n    return this._appointments;\n  },\n  getResourceManager: function () {\n    return this._resourcesManager;\n  },\n  getLayoutManager: function () {\n    return this._layoutManager;\n  },\n  getRenderingStrategyInstance: function () {\n    return this._layoutManager.getRenderingStrategyInstance();\n  },\n  getFilteredItems: function () {\n    return this._filteredItems;\n  },\n  getActions: function () {\n    return this._actions;\n  },\n  appointmentTakesAllDay: function (appointment) {\n    return this._appointmentModel.appointmentTakesAllDay(appointment, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"));\n  },\n  _getStartDate: function (appointment, skipNormalize) {\n    var startDate = this.fire(\"getField\", \"startDate\", appointment);\n    var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", appointment);\n    startDate = this.fire(\"convertDateByTimezone\", _date2.default.makeDate(startDate), startDateTimeZone);\n    return !skipNormalize ? this.fire(\"updateAppointmentStartDate\", {\n      startDate: startDate,\n      appointment: appointment\n    }) : startDate;\n  },\n  _getEndDate: function (appointment, skipNormalize) {\n    var endDate = new Date(this.fire(\"getField\", \"endDate\", appointment));\n    var startDate = new Date(this.fire(\"getField\", \"startDate\", appointment));\n\n    var isSameDate = _date2.default.sameDate(startDate, endDate);\n\n    if (endDate) {\n      var endDateTimeZone = this.fire(\"getField\", \"endDateTimeZone\", appointment);\n      endDate = this.fire(\"convertDateByTimezone\", _date2.default.makeDate(endDate), endDateTimeZone);\n      return !skipNormalize ? this.fire(\"updateAppointmentEndDate\", {\n        endDate: endDate,\n        isSameDate: isSameDate\n      }) : endDate;\n    }\n\n    return endDate;\n  },\n  _getRecurrenceException: function (appointmentData) {\n    var recurrenceException = this.fire(\"getField\", \"recurrenceException\", appointmentData);\n\n    if (recurrenceException) {\n      var startDate = this.fire(\"getField\", \"startDate\", appointmentData);\n      var exceptions = recurrenceException.split(\",\");\n      var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", appointmentData);\n\n      for (var i = 0; i < exceptions.length; i++) {\n        exceptions[i] = this._convertRecurrenceException(exceptions[i], startDate, startDateTimeZone);\n      }\n\n      recurrenceException = exceptions.join();\n    }\n\n    return recurrenceException;\n  },\n  _convertRecurrenceException: function (exceptionString, startDate, startDateTimeZone) {\n    exceptionString = exceptionString.replace(/\\s/g, \"\");\n\n    var exceptionDate = _date_serialization2.default.deserializeDate(exceptionString);\n\n    var convertedStartDate = this.fire(\"convertDateByTimezone\", startDate, startDateTimeZone);\n    var convertedExceptionDate = this.fire(\"convertDateByTimezone\", exceptionDate, startDateTimeZone);\n    convertedExceptionDate = _utils4.default.correctRecurrenceExceptionByTimezone(convertedExceptionDate, convertedStartDate, this.option(\"timeZone\"), startDateTimeZone);\n    exceptionString = _date_serialization2.default.serializeDate(convertedExceptionDate, FULL_DATE_FORMAT);\n    return exceptionString;\n  },\n  dayHasAppointment: function (day, appointment, trimTime) {\n    var startDate = new Date(this.fire(\"getField\", \"startDate\", appointment));\n    var endDate = new Date(this.fire(\"getField\", \"endDate\", appointment));\n    var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", appointment);\n    var endDateTimeZone = this.fire(\"getField\", \"endDateTimeZone\", appointment);\n    startDate = this.fire(\"convertDateByTimezone\", startDate, startDateTimeZone);\n    endDate = this.fire(\"convertDateByTimezone\", endDate, endDateTimeZone);\n\n    if (day.getTime() === endDate.getTime()) {\n      return startDate.getTime() === endDate.getTime();\n    }\n\n    if (trimTime) {\n      day = _date2.default.trimTime(day);\n      startDate = _date2.default.trimTime(startDate);\n      endDate = _date2.default.trimTime(endDate);\n    }\n\n    var dayTimeStamp = day.getTime();\n    var startDateTimeStamp = startDate.getTime();\n    var endDateTimeStamp = endDate.getTime();\n    return (0, _array.inArray)(dayTimeStamp, [startDateTimeStamp, endDateTimeStamp]) > -1 || startDateTimeStamp < dayTimeStamp && endDateTimeStamp > dayTimeStamp;\n  },\n  setTargetedAppointmentResources: function (targetedAppointment, appointmentElement, appointmentIndex) {\n    var groups = this._getCurrentViewOption(\"groups\");\n\n    if (groups && groups.length) {\n      var resourcesSetter = this._resourcesManager._dataAccessors.setter;\n      var workSpace = this._workSpace;\n      var getGroups;\n      var setResourceCallback;\n\n      if (this._isAgenda()) {\n        getGroups = function () {\n          var apptSettings = this.getLayoutManager()._positionMap[appointmentIndex];\n\n          return workSpace._getCellGroups(apptSettings[0].groupIndex);\n        };\n\n        setResourceCallback = function (_, group) {\n          resourcesSetter[group.name](targetedAppointment, group.id);\n        };\n      } else {\n        getGroups = function () {\n          var setting = (0, _renderer2.default)(appointmentElement).data(\"dxAppointmentSettings\") || {};\n          return workSpace.getCellDataByCoordinates({\n            left: setting.left,\n            top: setting.top\n          }).groups;\n        };\n\n        setResourceCallback = function (field, value) {\n          resourcesSetter[field](targetedAppointment, value);\n        };\n      }\n\n      (0, _iterator.each)(getGroups.call(this), setResourceCallback);\n    }\n  },\n  getStartViewDate: function () {\n    return this._workSpace.getStartViewDate();\n  },\n  getEndViewDate: function () {\n    return this._workSpace.getEndViewDate();\n  },\n  showAppointmentPopup: function (appointmentData, createNewAppointment, currentAppointmentData) {\n    var singleAppointment = currentAppointmentData || this._getAppointmentData(appointmentData, {\n      skipDateCalculation: true\n    });\n\n    var startDate = this.fire(\"getField\", \"startDate\", currentAppointmentData || appointmentData);\n\n    this._checkRecurringAppointment(appointmentData, singleAppointment, startDate, function () {\n      if (createNewAppointment || _type2.default.isEmptyObject(appointmentData)) {\n        delete this._editAppointmentData;\n        this._editing.allowAdding && this._showAppointmentPopup(appointmentData, true, true);\n      } else {\n        this._editAppointmentData = appointmentData;\n\n        this._showAppointmentPopup(appointmentData, this._editing.allowUpdating, true);\n      }\n    }.bind(this), false, true);\n  },\n  hideAppointmentPopup: function (saveChanges) {\n    if (this._appointmentPopup && this._appointmentPopup.isVisible()) {\n      saveChanges && this._appointmentPopup.saveChanges();\n\n      this._appointmentPopup.hide();\n    }\n  },\n  showAppointmentTooltip: function (appointmentData, target, currentAppointmentData) {\n    if (appointmentData) {\n      this.showAppointmentTooltipCore(target, [{\n        color: this._appointments._tryGetAppointmentColor(target),\n        data: appointmentData,\n        currentData: currentAppointmentData\n      }]);\n    }\n  },\n  showAppointmentTooltipCore: function (target, data, options) {\n    if (this._appointmentTooltip.isAlreadyShown(target)) {\n      this.hideAppointmentTooltip();\n    } else {\n      this._appointmentTooltip.show(target, data, (0, _extend.extend)(this._getExtraAppointmentTooltipOptions(), options));\n    }\n  },\n  hideAppointmentTooltip: function () {\n    this._appointmentTooltip && this._appointmentTooltip.hide();\n  },\n  scrollToTime: function (hours, minutes, date) {\n    this._workSpace.scrollToTime(hours, minutes, date);\n  },\n  addAppointment: function (appointment) {\n    var _this11 = this;\n\n    var text = this.fire(\"getField\", \"text\", appointment);\n\n    if (!text) {\n      this.fire(\"setField\", \"text\", appointment, \"\");\n    }\n\n    this._convertDatesByTimezoneBack(true, appointment);\n\n    var addingOptions = {\n      appointmentData: appointment,\n      cancel: false\n    };\n\n    this._actions.onAppointmentAdding(addingOptions);\n\n    return this._processActionResult(addingOptions, function (canceled) {\n      if (canceled) {\n        return new Deferred().resolve();\n      }\n\n      _this11._expandAllDayPanel(appointment);\n\n      return _this11._appointmentModel.add(appointment, {\n        value: _this11._getTimezoneOffsetByOption(),\n        clientOffset: _this11.fire(\"getClientTimezoneOffset\")\n      }).always(function (e) {\n        return _this11._executeActionWhenOperationIsCompleted(_this11._actions.onAppointmentAdded, appointment, e);\n      });\n    });\n  },\n  updateAppointment: function (target, appointment) {\n    return this._updateAppointment(target, appointment);\n  },\n  deleteAppointment: function (appointment) {\n    var deletingOptions = {\n      appointmentData: appointment,\n      cancel: false\n    };\n\n    this._actions.onAppointmentDeleting(deletingOptions);\n\n    this._processActionResult(deletingOptions, function (canceled) {\n      if (!canceled) {\n        this._appointmentModel.remove(appointment).always(function (e) {\n          this._executeActionWhenOperationIsCompleted(this._actions.onAppointmentDeleted, appointment, e);\n        }.bind(this));\n      }\n    });\n  },\n  focus: function () {\n    if (this._editAppointmentData) {\n      this._appointments.focus();\n    } else {\n      this._workSpace.focus();\n    }\n  },\n  getFirstDayOfWeek: function () {\n    return _type2.default.isDefined(this.option(\"firstDayOfWeek\")) ? this.option(\"firstDayOfWeek\") : _date4.default.firstDayOfWeekIndex();\n  }\n}).include(_data_helper2.default);\n\n(0, _component_registrator2.default)(\"dxScheduler\", Scheduler);\nmodule.exports = Scheduler;","map":{"version":3,"sources":["/Users/tracyvy/Desktop/calendar/client/node_modules/devextreme/ui/scheduler/ui.scheduler.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_callbacks","_callbacks2","_translator","_translator2","_ui","_ui2","_window","_window2","_dialog","_dialog2","_utils","_utils2","_dom","_dom2","_common","_data","_data2","_position","_date","_date2","_iterator","_extend","_array","_type","_type2","_devices","_devices2","_config","_config2","_component_registrator","_component_registrator2","_message","_message2","_date_serialization","_date_serialization2","_date3","_date4","_ui3","_ui4","_uiScheduler","_uiScheduler2","_desktopTooltipStrategy","_mobileTooltipStrategy","_appointmentPopup","_appointmentPopup2","_uiScheduler3","_uiScheduler4","_uiScheduler5","_uiScheduler6","_uiScheduler7","_uiScheduler8","_uiScheduler9","_uiScheduler10","_uiScheduler11","_uiScheduler12","_uiScheduler13","_uiScheduler14","_uiScheduler15","_uiScheduler16","_uiScheduler17","_uiScheduler18","_uiScheduler19","_uiScheduler20","_uiScheduler21","_uiScheduler22","_uiScheduler23","_uiScheduler24","_uiScheduler25","_uiScheduler26","_uiScheduler27","_uiScheduler28","_uiSchedulerAppointments","_uiSchedulerAppointments2","_compactAppointmentsHelper","_data_helper","_data_helper2","_ui5","_ui6","_deferred","_deferred2","_empty_template","_bindable_template","_themes","_themes2","_browser","_browser2","_support","_utils3","_utils4","obj","__esModule","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","when","default","Deferred","toMs","dateToMilliseconds","MINUTES_IN_HOUR","WIDGET_CLASS","WIDGET_SMALL_CLASS","concat","WIDGET_ADAPTIVE_CLASS","WIDGET_WIN_NO_TOUCH_CLASS","WIDGET_READONLY_CLASS","WIDGET_SMALL_WIDTH","FULL_DATE_FORMAT","UTC_FULL_DATE_FORMAT","VIEWS_CONFIG","day","workSpace","renderingStrategy","week","workWeek","month","timelineDay","timelineWeek","timelineWorkWeek","timelineMonth","agenda","Scheduler","inherit","_getDefaultOptions","extend","callBase","views","currentView","currentDate","trimTime","Date","min","max","dateSerializationFormat","firstDayOfWeek","groups","resources","dataSource","customizeDateNavigatorText","appointmentTemplate","dropDownAppointmentTemplate","appointmentCollectorTemplate","dataCellTemplate","timeCellTemplate","resourceCellTemplate","dateCellTemplate","startDayHour","endDayHour","editing","allowAdding","allowDeleting","allowDragging","allowResizing","allowUpdating","allowTimeZoneEditing","allowEditingTimeZones","showAllDayPanel","showCurrentTimeIndicator","shadeUntilCurrentTime","indicatorUpdateInterval","indicatorTime","recurrenceEditMode","cellDuration","maxAppointmentsPerCell","selectedCellData","groupByDate","onAppointmentRendered","onAppointmentClick","onAppointmentDblClick","onAppointmentContextMenu","onCellClick","onCellContextMenu","onAppointmentAdding","onAppointmentAdded","onAppointmentUpdating","onAppointmentUpdated","onAppointmentDeleting","onAppointmentDeleted","onAppointmentFormOpening","appointmentTooltipTemplate","appointmentPopupTemplate","crossScrollingEnabled","useDropDownViewSwitcher","startDateExpr","endDateExpr","textExpr","descriptionExpr","allDayExpr","recurrenceRuleExpr","recurrenceExceptionExpr","remoteFiltering","timeZone","startDateTimeZoneExpr","endDateTimeZoneExpr","noDataText","format","adaptivityEnabled","allowMultipleCellSelection","_appointmentTooltipOffset","x","y","_appointmentTooltipButtonsPosition","_appointmentTooltipOpenButtonText","_dropDownButtonIcon","_appointmentCountPerCell","_collectorOffset","_appointmentOffset","_defaultOptionsRules","device","real","deviceType","isSimulator","options","focusStateEnabled","current","generic","isMaterial","data","index","element","text","split","forEach","span","addClass","append","_setDeprecatedOptions","_deprecatedOptions","onAppointmentFormCreated","since","alias","message","_postponeDataSourceLoading","promise","postponedOperations","add","_reloadDataSource","bind","_postponeResourceLoading","_this","whenLoaded","_loadResources","resolveCallbacks","done","resolve","_optionChanged","args","_this2","name","_updateOption","_dateOption","option","_workSpace","_header","_getViewStartByOptions","_appointments","_filterAppointmentsByDate","_initDataSource","_appointmentModel","setDataSource","_dataSource","_processCurrentView","_getCurrentViewOptions","repaint","fire","getLayoutManager","initRenderingStrategy","_getAppointmentsRenderingStrategy","_validateCellDuration","items","allowDrag","_allowDragging","allowResize","_allowResizing","itemTemplate","_getAppointmentTemplate","_refreshWorkSpace","_updateHeader","_resourcesManager","setResources","setDataAccessors","_combineDataAccessors","_actions","_createActionByOption","_getAppointmentRenderedAction","_readyToRenderAppointments","_getAppointmentsToRepaint","_dimensionChanged","_initEditing","_editing","_bringEditingModeToAppointments","hideAppointmentTooltip","_cleanPopup","_updateExpression","_initAppointmentTemplate","_toggleAdaptiveClass","viewCountConfig","_getViewCountConfig","intervalCount","_getCurrentViewOption","_currentView","optionName","optionValue","deserializeDate","_getSerializationFormat","isString","getDateSerializationFormat","editingConfig","allowDelete","_isAgenda","allowAllDayResize","_supportAllDayResizing","_allowAllDayResizing","_getCurrentViewType","_isAllDayExpanded","hasAllDayAppointments","_getTimezoneOffsetByOption","date","calculateTimezoneByValue","getCorrectedDatesByDaylightOffsets","originalStartDate","dates","appointmentData","_this3","startDateTimeZone","needCheckTimezoneOffset","isDefined","convertedOriginalStartDate","getTime","map","convertedDate","getCorrectedDateByDaylightOffsets","dateRange","getDateRange","filterByDate","result","loadResources","_loadedResources","_dataSourceLoadedCallback","load","hide","_fireContentReadyAction","fail","reject","isLoading","show","container","$element","position","of","contentReadyBase","fireContentReady","_workSpaceRecalculation","_this$_workSpaceRecal","filteredItems","getFilteredItems","_toggleSmallClass","_isVisible","_cleanAllowedPositions","appointments","_layoutManager","createAppointmentsMap","triggerResize","updatePopupFullScreenMode","_clean","width","getBoundingRect","get","toggleClass","_visibilityChanged","visible","_dataSourceOptions","paginate","_init","_initExpressions","startDate","endDate","endDateTimeZone","allDay","description","recurrenceRule","recurrenceException","msie","touch","combinedDataAccessors","getAppointmentDurationInMinutes","_initActions","CompactAppointmentsHelper","_asyncTemplatesTimers","_subscribes","_initTemplates","_templateManager","addDefaultTemplates","appointmentTooltip","EmptyTemplate","dropDownAppointment","_this4","expr","_dataAccessors","createGetter","property","compileGetter","BindableTemplate","$container","model","getAppointmentsInstance","_renderAppointmentTemplate","resourcesDataAccessors","each","type","accessor","_renderContent","_renderContentImpl","_dataSourceChangedHandler","_filteredItems","getRenderingStrategyInstance","calculateRows","length","cleanModelState","_renderView","fireWith","getRepaintedAppointments","fields","isDateField","field","getter","setter","compileSetter","dateGetter","dateSetter","that","apply","arguments","forceIsoDateParsing","object","serializeDate","call","exprObj","replace","isObject","_isReadOnly","prop","prototype","hasOwnProperty","_dispose","_appointmentTooltip","dispose","hideAppointmentPopup","clearTimeout","excludeValidators","_renderFocusTarget","noop","_initMarkup","_renderHeader","_createComponent","_appointmentsConfig","MobileTooltipStrategy","DesktopTooltipStrategy","_getAppointmentTooltipOptions","_isLoaded","_initMarkupCore","_this5","createComponent","getScrollableContainer","getWorkSpaceScrollableContainer","getAppointmentTemplate","showAppointmentPopup","getTextAndFormatDate","currentData","checkAndDeleteAppointment","isAppointmentInAllDayPanel","getSingleAppointmentData","targetElement","$appointment","_getAppointmentData","target","skipHoursProcessing","_checkRecurringAppointment","deleteAppointment","_getExtraAppointmentTooltipOptions","rtlEnabled","offset","itTakesAllDay","appointmentTakesAllDay","supportAllDayRow","_this6","hasWindow","_cleanWorkspace","_renderWorkSpace","fixedContainer","getFixedContainer","allDayContainer","getAllDayContainer","_waitAsyncTemplate","_this6$_workSpaceReca","_isResourcesLoaded","_isDataSourceLoaded","isLoaded","_render","$header","appendTo","_headerConfig","currentViewOptions","countConfig","isAdaptive","tabIndex","observer","config","onItemRendered","onItemClick","onItemContextMenu","onContentReady","getCollectorOffset","needApplyCollectorOffset","_","view","isViewIsObject","viewName","viewType","log","$workSpace","_workSpaceConfig","initDragBehavior","_attachTablesEvents","getWorkArea","_recalculateWorkspace","_getHeaderDate","_getViewByName","viewCount","i","_this7","triggerResizeEvent","_refreshDateTimeIndication","_this8","accessKey","allDayExpanded","onSelectionChanged","hoursInterval","_getTemplate","callback","_options","silent","timer","setTimeout","push","_getTemplateByOption","_this9","detach","remove","getWorkSpaceScrollable","getScrollable","getWorkSpaceScrollableScrollTop","getGroupedScrollableScrollTop","getWorkSpaceScrollableScrollLeft","getScrollableScrollLeft","getWorkSpaceAllDayHeight","getAllDayHeight","getWorkSpaceAllDayOffset","getAllDayOffset","getWorkSpaceHeaderPanelHeight","getHeaderPanelHeight","getWorkSpaceDateTableOffset","getWorkSpaceLeftOffset","getWorkSpace","getAppointmentModel","getHeader","getMaxAppointmentsPerCell","_convertDatesByTimezoneBack","applyAppointmentTimezone","sourceAppointmentData","targetAppointmentData","processedStartDate","processedEndDate","targetAppointment","singleAppointment","exceptionDate","isDeleted","isPopupEditing","dragEvent","_updatedRecAppointment","getRecurrenceRule","isValid","editMode","_singleAppointmentChangesHandler","cancel","_showRecurrenceChangeConfirm","moveAppointmentBack","processAppointmentDates","appointment","commonTimezoneOffset","isNaN","startDateClientTzOffset","getClientTimezoneOffset","endDateClientTzOffset","processedStartDateInUTC","processedEndDateInUTC","addAppointment","_makeDateAsRecurrenceException","updatedAppointment","_showAppointmentPopup","_editAppointmentData","_updateAppointment","_getStartDate","isAllDay","exceptionByDate","_getRecurrenceExceptionDate","exceptionStartDate","targetStartDate","appointmentStartDate","correctRecurrenceExceptionByTimezone","setHours","getHours","getMinutes","getSeconds","getMilliseconds","seriesText","occurrenceText","custom","messageHtml","showCloseButton","showTitle","buttons","onClick","_getUpdatedData","cellData","getTargetCellData","targetAllDay","targetEndDate","duration","keepOriginalHours","diff","updatedData","calculateEndDate","dateCopy","getTimezoneOffsetChangeInMs","setResourcesToItem","_getCoordinates","initialDates","appointmentResources","currentCoords","getCoordinatesByDateInGroup","j","initialStartDate","_isAppointmentRecurrence","skipDateCalculation","resultAppointmentData","appointmentDuration","updatedStartDate","appointmentEndDate","apptDataCalculator","getAppointmentDataCalculator","isFunction","isAppointmentResized","coordinates","locate","getCellDataByCoordinates","settings","originalAppointmentStartDate","originalAppointmentEndDate","subscribe","subject","action","Array","slice","Error","getDataByDroppableCell","onUpdatePrevented","updatingOptions","newData","oldData","performFailAction","err","isDeferred","_processActionResult","canceled","deferred","_expandAllDayPanel","update","always","e","_executeActionWhenOperationIsCompleted","actionOptions","_this10","resolveCallback","callbackResult","fromPromise","isPromise","state","isError","error","isVisible","visibleButtons","isProcessTimeZone","getAppointmentPopup","getPopup","getUpdatedAppointment","getUpdatedAppointmentKeys","getResourceManager","getActions","skipNormalize","makeDate","_getEndDate","isSameDate","sameDate","_getRecurrenceException","exceptions","_convertRecurrenceException","join","exceptionString","convertedStartDate","convertedExceptionDate","dayHasAppointment","dayTimeStamp","startDateTimeStamp","endDateTimeStamp","inArray","setTargetedAppointmentResources","targetedAppointment","appointmentElement","appointmentIndex","resourcesSetter","getGroups","setResourceCallback","apptSettings","_positionMap","_getCellGroups","groupIndex","group","id","setting","left","top","getStartViewDate","getEndViewDate","createNewAppointment","currentAppointmentData","isEmptyObject","saveChanges","showAppointmentTooltip","showAppointmentTooltipCore","color","_tryGetAppointmentColor","isAlreadyShown","scrollToTime","hours","minutes","_this11","addingOptions","clientOffset","updateAppointment","deletingOptions","focus","getFirstDayOfWeek","firstDayOfWeekIndex","include","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _callbacks = require(\"../../core/utils/callbacks\");\r\nvar _callbacks2 = _interopRequireDefault(_callbacks);\r\nvar _translator = require(\"../../animation/translator\");\r\nvar _translator2 = _interopRequireDefault(_translator);\r\nvar _ui = require(\"../widget/ui.errors\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _window2 = _interopRequireDefault(_window);\r\nvar _dialog = require(\"../dialog\");\r\nvar _dialog2 = _interopRequireDefault(_dialog);\r\nvar _utils = require(\"./utils.recurrence\");\r\nvar _utils2 = _interopRequireDefault(_utils);\r\nvar _dom = require(\"../../core/utils/dom\");\r\nvar _dom2 = _interopRequireDefault(_dom);\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _data2 = _interopRequireDefault(_data);\r\nvar _position = require(\"../../core/utils/position\");\r\nvar _date = require(\"../../core/utils/date\");\r\nvar _date2 = _interopRequireDefault(_date);\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _type2 = _interopRequireDefault(_type);\r\nvar _devices = require(\"../../core/devices\");\r\nvar _devices2 = _interopRequireDefault(_devices);\r\nvar _config = require(\"../../core/config\");\r\nvar _config2 = _interopRequireDefault(_config);\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _date_serialization = require(\"../../core/utils/date_serialization\");\r\nvar _date_serialization2 = _interopRequireDefault(_date_serialization);\r\nvar _date3 = require(\"../../localization/date\");\r\nvar _date4 = _interopRequireDefault(_date3);\r\nvar _ui3 = require(\"../widget/ui.widget\");\r\nvar _ui4 = _interopRequireDefault(_ui3);\r\nvar _uiScheduler = require(\"./ui.scheduler.subscribes\");\r\nvar _uiScheduler2 = _interopRequireDefault(_uiScheduler);\r\nvar _desktopTooltipStrategy = require(\"./tooltip_strategies/desktopTooltipStrategy\");\r\nvar _mobileTooltipStrategy = require(\"./tooltip_strategies/mobileTooltipStrategy\");\r\nvar _appointmentPopup = require(\"./appointmentPopup\");\r\nvar _appointmentPopup2 = _interopRequireDefault(_appointmentPopup);\r\nvar _uiScheduler3 = require(\"./ui.scheduler.header\");\r\nvar _uiScheduler4 = _interopRequireDefault(_uiScheduler3);\r\nvar _uiScheduler5 = require(\"./workspaces/ui.scheduler.work_space_day\");\r\nvar _uiScheduler6 = _interopRequireDefault(_uiScheduler5);\r\nvar _uiScheduler7 = require(\"./workspaces/ui.scheduler.work_space_week\");\r\nvar _uiScheduler8 = _interopRequireDefault(_uiScheduler7);\r\nvar _uiScheduler9 = require(\"./workspaces/ui.scheduler.work_space_work_week\");\r\nvar _uiScheduler10 = _interopRequireDefault(_uiScheduler9);\r\nvar _uiScheduler11 = require(\"./workspaces/ui.scheduler.work_space_month\");\r\nvar _uiScheduler12 = _interopRequireDefault(_uiScheduler11);\r\nvar _uiScheduler13 = require(\"./workspaces/ui.scheduler.timeline_day\");\r\nvar _uiScheduler14 = _interopRequireDefault(_uiScheduler13);\r\nvar _uiScheduler15 = require(\"./workspaces/ui.scheduler.timeline_week\");\r\nvar _uiScheduler16 = _interopRequireDefault(_uiScheduler15);\r\nvar _uiScheduler17 = require(\"./workspaces/ui.scheduler.timeline_work_week\");\r\nvar _uiScheduler18 = _interopRequireDefault(_uiScheduler17);\r\nvar _uiScheduler19 = require(\"./workspaces/ui.scheduler.timeline_month\");\r\nvar _uiScheduler20 = _interopRequireDefault(_uiScheduler19);\r\nvar _uiScheduler21 = require(\"./workspaces/ui.scheduler.agenda\");\r\nvar _uiScheduler22 = _interopRequireDefault(_uiScheduler21);\r\nvar _uiScheduler23 = require(\"./ui.scheduler.resource_manager\");\r\nvar _uiScheduler24 = _interopRequireDefault(_uiScheduler23);\r\nvar _uiScheduler25 = require(\"./ui.scheduler.appointment_model\");\r\nvar _uiScheduler26 = _interopRequireDefault(_uiScheduler25);\r\nvar _uiScheduler27 = require(\"./ui.scheduler.appointments\");\r\nvar _uiScheduler28 = _interopRequireDefault(_uiScheduler27);\r\nvar _uiSchedulerAppointments = require(\"./ui.scheduler.appointments.layout_manager\");\r\nvar _uiSchedulerAppointments2 = _interopRequireDefault(_uiSchedulerAppointments);\r\nvar _compactAppointmentsHelper = require(\"./compactAppointmentsHelper\");\r\nvar _data_helper = require(\"../../data_helper\");\r\nvar _data_helper2 = _interopRequireDefault(_data_helper);\r\nvar _ui5 = require(\"./ui.loading\");\r\nvar _ui6 = _interopRequireDefault(_ui5);\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _deferred2 = _interopRequireDefault(_deferred);\r\nvar _empty_template = require(\"../../core/templates/empty_template\");\r\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\r\nvar _themes = require(\"../themes\");\r\nvar _themes2 = _interopRequireDefault(_themes);\r\nvar _browser = require(\"../../core/utils/browser\");\r\nvar _browser2 = _interopRequireDefault(_browser);\r\nvar _support = require(\"../../core/utils/support\");\r\nvar _utils3 = require(\"./utils.timeZone\");\r\nvar _utils4 = _interopRequireDefault(_utils3);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n        Object.defineProperty(obj, key, {\r\n            value: value,\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true\r\n        })\r\n    } else {\r\n        obj[key] = value\r\n    }\r\n    return obj\r\n}\r\nvar when = _deferred2.default.when;\r\nvar Deferred = _deferred2.default.Deferred;\r\nvar toMs = _date2.default.dateToMilliseconds;\r\nvar MINUTES_IN_HOUR = 60;\r\nvar WIDGET_CLASS = \"dx-scheduler\";\r\nvar WIDGET_SMALL_CLASS = \"\".concat(WIDGET_CLASS, \"-small\");\r\nvar WIDGET_ADAPTIVE_CLASS = \"\".concat(WIDGET_CLASS, \"-adaptive\");\r\nvar WIDGET_WIN_NO_TOUCH_CLASS = \"\".concat(WIDGET_CLASS, \"-win-no-touch\");\r\nvar WIDGET_READONLY_CLASS = \"\".concat(WIDGET_CLASS, \"-readonly\");\r\nvar WIDGET_SMALL_WIDTH = 400;\r\nvar FULL_DATE_FORMAT = \"yyyyMMddTHHmmss\";\r\nvar UTC_FULL_DATE_FORMAT = FULL_DATE_FORMAT + \"Z\";\r\nvar VIEWS_CONFIG = {\r\n    day: {\r\n        workSpace: _uiScheduler6.default,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    week: {\r\n        workSpace: _uiScheduler8.default,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    workWeek: {\r\n        workSpace: _uiScheduler10.default,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    month: {\r\n        workSpace: _uiScheduler12.default,\r\n        renderingStrategy: \"horizontalMonth\"\r\n    },\r\n    timelineDay: {\r\n        workSpace: _uiScheduler14.default,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineWeek: {\r\n        workSpace: _uiScheduler16.default,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineWorkWeek: {\r\n        workSpace: _uiScheduler18.default,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineMonth: {\r\n        workSpace: _uiScheduler20.default,\r\n        renderingStrategy: \"horizontalMonthLine\"\r\n    },\r\n    agenda: {\r\n        workSpace: _uiScheduler22.default,\r\n        renderingStrategy: \"agenda\"\r\n    }\r\n};\r\nvar Scheduler = _ui4.default.inherit({\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            views: [\"day\", \"week\"],\r\n            currentView: \"day\",\r\n            currentDate: _date2.default.trimTime(new Date),\r\n            min: void 0,\r\n            max: void 0,\r\n            dateSerializationFormat: void 0,\r\n            firstDayOfWeek: void 0,\r\n            groups: [],\r\n            resources: [],\r\n            dataSource: null,\r\n            customizeDateNavigatorText: void 0,\r\n            appointmentTemplate: \"item\",\r\n            dropDownAppointmentTemplate: \"dropDownAppointment\",\r\n            appointmentCollectorTemplate: \"appointmentCollector\",\r\n            dataCellTemplate: null,\r\n            timeCellTemplate: null,\r\n            resourceCellTemplate: null,\r\n            dateCellTemplate: null,\r\n            startDayHour: 0,\r\n            endDayHour: 24,\r\n            editing: {\r\n                allowAdding: true,\r\n                allowDeleting: true,\r\n                allowDragging: true,\r\n                allowResizing: true,\r\n                allowUpdating: true,\r\n                allowTimeZoneEditing: false,\r\n                allowEditingTimeZones: false\r\n            },\r\n            showAllDayPanel: true,\r\n            showCurrentTimeIndicator: true,\r\n            shadeUntilCurrentTime: false,\r\n            indicatorUpdateInterval: 3e5,\r\n            indicatorTime: void 0,\r\n            recurrenceEditMode: \"dialog\",\r\n            cellDuration: 30,\r\n            maxAppointmentsPerCell: \"auto\",\r\n            selectedCellData: [],\r\n            groupByDate: false,\r\n            onAppointmentRendered: null,\r\n            onAppointmentClick: null,\r\n            onAppointmentDblClick: null,\r\n            onAppointmentContextMenu: null,\r\n            onCellClick: null,\r\n            onCellContextMenu: null,\r\n            onAppointmentAdding: null,\r\n            onAppointmentAdded: null,\r\n            onAppointmentUpdating: null,\r\n            onAppointmentUpdated: null,\r\n            onAppointmentDeleting: null,\r\n            onAppointmentDeleted: null,\r\n            onAppointmentFormOpening: null,\r\n            appointmentTooltipTemplate: \"appointmentTooltip\",\r\n            appointmentPopupTemplate: \"appointmentPopup\",\r\n            crossScrollingEnabled: false,\r\n            useDropDownViewSwitcher: false,\r\n            startDateExpr: \"startDate\",\r\n            endDateExpr: \"endDate\",\r\n            textExpr: \"text\",\r\n            descriptionExpr: \"description\",\r\n            allDayExpr: \"allDay\",\r\n            recurrenceRuleExpr: \"recurrenceRule\",\r\n            recurrenceExceptionExpr: \"recurrenceException\",\r\n            remoteFiltering: false,\r\n            timeZone: \"\",\r\n            startDateTimeZoneExpr: \"startDateTimeZone\",\r\n            endDateTimeZoneExpr: \"endDateTimeZone\",\r\n            noDataText: _message2.default.format(\"dxCollectionWidget-noDataText\"),\r\n            adaptivityEnabled: false,\r\n            allowMultipleCellSelection: true,\r\n            _appointmentTooltipOffset: {\r\n                x: 0,\r\n                y: 0\r\n            },\r\n            _appointmentTooltipButtonsPosition: \"bottom\",\r\n            _appointmentTooltipOpenButtonText: _message2.default.format(\"dxScheduler-openAppointment\"),\r\n            _dropDownButtonIcon: \"overflow\",\r\n            _appointmentCountPerCell: 2,\r\n            _collectorOffset: 0,\r\n            _appointmentOffset: 26\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return \"desktop\" === _devices2.default.real().deviceType && !_devices2.default.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return !_devices2.default.current().generic\r\n            },\r\n            options: {\r\n                useDropDownViewSwitcher: true,\r\n                editing: {\r\n                    allowDragging: false,\r\n                    allowResizing: false\r\n                }\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return _themes2.default.isMaterial()\r\n            },\r\n            options: {\r\n                useDropDownViewSwitcher: true,\r\n                dateCellTemplate: function(data, index, element) {\r\n                    var text = data.text;\r\n                    text.split(\" \").forEach(function(text, index) {\r\n                        var span = (0, _renderer2.default)(\"<span>\").text(text).addClass(\"dx-scheduler-header-panel-cell-date\");\r\n                        (0, _renderer2.default)(element).append(span);\r\n                        if (!index) {\r\n                            (0, _renderer2.default)(element).append(\" \")\r\n                        }\r\n                    })\r\n                },\r\n                _appointmentTooltipOffset: {\r\n                    x: 0,\r\n                    y: 11\r\n                },\r\n                _appointmentTooltipButtonsPosition: \"top\",\r\n                _appointmentTooltipOpenButtonText: null,\r\n                _dropDownButtonIcon: \"chevrondown\",\r\n                _appointmentCountPerCell: 1,\r\n                _collectorOffset: 20,\r\n                _appointmentOffset: 30\r\n            }\r\n        }])\r\n    },\r\n    _setDeprecatedOptions: function() {\r\n        this.callBase();\r\n        (0, _extend.extend)(this._deprecatedOptions, {\r\n            onAppointmentFormCreated: {\r\n                since: \"18.2\",\r\n                alias: \"onAppointmentFormOpening\"\r\n            },\r\n            dropDownAppointmentTemplate: {\r\n                since: \"19.2\",\r\n                message: \"appointmentTooltipTemplate\"\r\n            },\r\n            allowEditingTimeZones: {\r\n                since: \"20.1\",\r\n                alias: \"allowTimeZoneEditing\"\r\n            }\r\n        })\r\n    },\r\n    _postponeDataSourceLoading: function(promise) {\r\n        this.postponedOperations.add(\"_reloadDataSource\", this._reloadDataSource.bind(this), promise)\r\n    },\r\n    _postponeResourceLoading: function() {\r\n        var _this = this;\r\n        var whenLoaded = this.postponedOperations.add(\"_loadResources\", function() {\r\n            return _this._loadResources()\r\n        });\r\n        var resolveCallbacks = new Deferred;\r\n        whenLoaded.done(function(resources) {\r\n            resolveCallbacks.resolve(resources)\r\n        });\r\n        this._postponeDataSourceLoading(whenLoaded);\r\n        return resolveCallbacks.promise()\r\n    },\r\n    _optionChanged: function(args) {\r\n        var _this2 = this;\r\n        var value = args.value;\r\n        var name = args.name;\r\n        switch (args.name) {\r\n            case \"customizeDateNavigatorText\":\r\n                this._updateOption(\"header\", name, value);\r\n                break;\r\n            case \"firstDayOfWeek\":\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this._updateOption(\"header\", name, value);\r\n                break;\r\n            case \"currentDate\":\r\n                value = this._dateOption(name);\r\n                value = _date2.default.trimTime(new Date(value));\r\n                this.option(\"selectedCellData\", []);\r\n                this._workSpace.option(name, new Date(value));\r\n                this._header.option(name, new Date(value));\r\n                this._header.option(\"displayedDate\", this._workSpace._getViewStartByOptions());\r\n                this._appointments.option(\"items\", []);\r\n                this._filterAppointmentsByDate();\r\n                this._postponeDataSourceLoading();\r\n                break;\r\n            case \"dataSource\":\r\n                this._initDataSource();\r\n                this._appointmentModel.setDataSource(this._dataSource);\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._filterAppointmentsByDate();\r\n                    _this2._updateOption(\"workSpace\", \"showAllDayPanel\", _this2.option(\"showAllDayPanel\"))\r\n                });\r\n                break;\r\n            case \"min\":\r\n            case \"max\":\r\n                value = this._dateOption(name);\r\n                this._updateOption(\"header\", name, new Date(value));\r\n                this._updateOption(\"workSpace\", name, new Date(value));\r\n                break;\r\n            case \"views\":\r\n                this._processCurrentView();\r\n                if (this._getCurrentViewOptions()) {\r\n                    this.repaint()\r\n                } else {\r\n                    this._header.option(name, value)\r\n                }\r\n                break;\r\n            case \"useDropDownViewSwitcher\":\r\n                this._header.option(name, value);\r\n                break;\r\n            case \"currentView\":\r\n                this._processCurrentView();\r\n                this.fire(\"validateDayHours\");\r\n                this.getLayoutManager().initRenderingStrategy(this._getAppointmentsRenderingStrategy());\r\n                this._validateCellDuration();\r\n                this._appointments.option({\r\n                    items: [],\r\n                    allowDrag: this._allowDragging(),\r\n                    allowResize: this._allowResizing(),\r\n                    itemTemplate: this._getAppointmentTemplate(\"appointmentTemplate\")\r\n                });\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._refreshWorkSpace(resources);\r\n                    _this2._updateHeader();\r\n                    _this2._filterAppointmentsByDate();\r\n                    _this2._appointments.option(\"allowAllDayResize\", \"day\" !== value)\r\n                });\r\n                break;\r\n            case \"appointmentTemplate\":\r\n                this._appointments.option(\"itemTemplate\", value);\r\n                break;\r\n            case \"dateCellTemplate\":\r\n            case \"resourceCellTemplate\":\r\n            case \"dataCellTemplate\":\r\n            case \"timeCellTemplate\":\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this.repaint();\r\n                break;\r\n            case \"groups\":\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._refreshWorkSpace(resources);\r\n                    _this2._filterAppointmentsByDate()\r\n                });\r\n                break;\r\n            case \"resources\":\r\n                this._resourcesManager.setResources(this.option(\"resources\"));\r\n                this._appointmentModel.setDataAccessors(this._combineDataAccessors());\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._appointments.option(\"items\", []);\r\n                    _this2._refreshWorkSpace(resources);\r\n                    _this2._filterAppointmentsByDate()\r\n                });\r\n                break;\r\n            case \"startDayHour\":\r\n            case \"endDayHour\":\r\n                this.fire(\"validateDayHours\");\r\n                this._appointments.option(\"items\", []);\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this._appointments.repaint();\r\n                this._filterAppointmentsByDate();\r\n                this._postponeDataSourceLoading();\r\n                break;\r\n            case \"onAppointmentAdding\":\r\n            case \"onAppointmentAdded\":\r\n            case \"onAppointmentUpdating\":\r\n            case \"onAppointmentUpdated\":\r\n            case \"onAppointmentDeleting\":\r\n            case \"onAppointmentDeleted\":\r\n            case \"onAppointmentFormOpening\":\r\n                this._actions[name] = this._createActionByOption(name);\r\n                break;\r\n            case \"onAppointmentRendered\":\r\n                this._appointments.option(\"onItemRendered\", this._getAppointmentRenderedAction());\r\n                break;\r\n            case \"onAppointmentClick\":\r\n                this._appointments.option(\"onItemClick\", this._createActionByOption(name));\r\n                break;\r\n            case \"onAppointmentDblClick\":\r\n                this._appointments.option(name, this._createActionByOption(name));\r\n                break;\r\n            case \"onAppointmentContextMenu\":\r\n                this._appointments.option(\"onItemContextMenu\", this._createActionByOption(name));\r\n                break;\r\n            case \"noDataText\":\r\n            case \"allowMultipleCellSelection\":\r\n            case \"selectedCellData\":\r\n            case \"accessKey\":\r\n            case \"onCellClick\":\r\n                this._workSpace.option(name, value);\r\n                break;\r\n            case \"onCellContextMenu\":\r\n                this._workSpace.option(name, value);\r\n                break;\r\n            case \"crossScrollingEnabled\":\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._appointments.option(\"items\", []);\r\n                    _this2._refreshWorkSpace(resources);\r\n                    if (_this2._readyToRenderAppointments) {\r\n                        _this2._appointments.option(\"items\", _this2._getAppointmentsToRepaint())\r\n                    }\r\n                });\r\n                break;\r\n            case \"cellDuration\":\r\n                this._validateCellDuration();\r\n                this._appointments.option(\"items\", []);\r\n                if (this._readyToRenderAppointments) {\r\n                    this._updateOption(\"workSpace\", \"hoursInterval\", value / 60);\r\n                    this._appointments.option(\"items\", this._getAppointmentsToRepaint())\r\n                }\r\n                break;\r\n            case \"tabIndex\":\r\n            case \"focusStateEnabled\":\r\n                this._updateOption(\"header\", name, value);\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this._appointments.option(name, value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"width\":\r\n                this._updateOption(\"header\", name, value);\r\n                if (this.option(\"crossScrollingEnabled\")) {\r\n                    this._updateOption(\"workSpace\", \"width\", value)\r\n                }\r\n                this.callBase(args);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"height\":\r\n                this.callBase(args);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"editing\":\r\n                this._initEditing();\r\n                var editing = this._editing;\r\n                this._bringEditingModeToAppointments(editing);\r\n                this.hideAppointmentTooltip();\r\n                this._cleanPopup();\r\n                break;\r\n            case \"showAllDayPanel\":\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._filterAppointmentsByDate();\r\n                    _this2._updateOption(\"workSpace\", \"allDayExpanded\", value);\r\n                    _this2._updateOption(\"workSpace\", name, value)\r\n                });\r\n                break;\r\n            case \"showCurrentTimeIndicator\":\r\n            case \"indicatorTime\":\r\n            case \"indicatorUpdateInterval\":\r\n            case \"shadeUntilCurrentTime\":\r\n            case \"groupByDate\":\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this.repaint();\r\n                break;\r\n            case \"appointmentDragging\":\r\n            case \"appointmentTooltipTemplate\":\r\n            case \"appointmentPopupTemplate\":\r\n            case \"recurrenceEditMode\":\r\n            case \"remoteFiltering\":\r\n            case \"timeZone\":\r\n            case \"dropDownAppointmentTemplate\":\r\n            case \"appointmentCollectorTemplate\":\r\n            case \"_appointmentTooltipOffset\":\r\n            case \"_appointmentTooltipButtonsPosition\":\r\n            case \"_appointmentTooltipOpenButtonText\":\r\n            case \"_dropDownButtonIcon\":\r\n            case \"_appointmentCountPerCell\":\r\n            case \"_collectorOffset\":\r\n            case \"_appointmentOffset\":\r\n                this.repaint();\r\n                break;\r\n            case \"dateSerializationFormat\":\r\n                break;\r\n            case \"maxAppointmentsPerCell\":\r\n                break;\r\n            case \"startDateExpr\":\r\n            case \"endDateExpr\":\r\n            case \"startDateTimeZoneExpr\":\r\n            case \"endDateTimeZoneExpr\":\r\n            case \"textExpr\":\r\n            case \"descriptionExpr\":\r\n            case \"allDayExpr\":\r\n            case \"recurrenceRuleExpr\":\r\n            case \"recurrenceExceptionExpr\":\r\n                this._updateExpression(name, value);\r\n                this._appointmentModel.setDataAccessors(this._combineDataAccessors());\r\n                this._initAppointmentTemplate();\r\n                this.repaint();\r\n                break;\r\n            case \"adaptivityEnabled\":\r\n                this._toggleAdaptiveClass();\r\n                this.repaint();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _updateHeader: function() {\r\n        var viewCountConfig = this._getViewCountConfig();\r\n        this._header.option(\"intervalCount\", viewCountConfig.intervalCount);\r\n        this._header.option(\"displayedDate\", this._workSpace._getViewStartByOptions());\r\n        this._header.option(\"min\", this._dateOption(\"min\"));\r\n        this._header.option(\"max\", this._dateOption(\"max\"));\r\n        this._header.option(\"currentDate\", this._dateOption(\"currentDate\"));\r\n        this._header.option(\"firstDayOfWeek\", this._getCurrentViewOption(\"firstDayOfWeek\"));\r\n        this._header.option(\"currentView\", this._currentView)\r\n    },\r\n    _dateOption: function(optionName) {\r\n        var optionValue = this._getCurrentViewOption(optionName);\r\n        return _date_serialization2.default.deserializeDate(optionValue)\r\n    },\r\n    _getSerializationFormat: function(optionName) {\r\n        var value = this._getCurrentViewOption(optionName);\r\n        if (\"number\" === typeof value) {\r\n            return \"number\"\r\n        }\r\n        if (!_type2.default.isString(value)) {\r\n            return\r\n        }\r\n        return _date_serialization2.default.getDateSerializationFormat(value)\r\n    },\r\n    _bringEditingModeToAppointments: function(editing) {\r\n        var editingConfig = {\r\n            allowDelete: editing.allowUpdating && editing.allowDeleting\r\n        };\r\n        if (!this._isAgenda()) {\r\n            editingConfig.allowDrag = editing.allowDragging;\r\n            editingConfig.allowResize = editing.allowResizing;\r\n            editingConfig.allowAllDayResize = editing.allowResizing && this._supportAllDayResizing()\r\n        }\r\n        this._appointments.option(editingConfig);\r\n        this.repaint()\r\n    },\r\n    _isAgenda: function() {\r\n        return \"agenda\" === this._getAppointmentsRenderingStrategy()\r\n    },\r\n    _allowDragging: function() {\r\n        return this._editing.allowDragging && !this._isAgenda()\r\n    },\r\n    _allowResizing: function() {\r\n        return this._editing.allowResizing && !this._isAgenda()\r\n    },\r\n    _allowAllDayResizing: function() {\r\n        return this._editing.allowResizing && this._supportAllDayResizing()\r\n    },\r\n    _supportAllDayResizing: function() {\r\n        return \"day\" !== this._getCurrentViewType() || this._currentView.intervalCount > 1\r\n    },\r\n    _isAllDayExpanded: function(items) {\r\n        return this.option(\"showAllDayPanel\") && this._appointmentModel.hasAllDayAppointments(items, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"))\r\n    },\r\n    _getTimezoneOffsetByOption: function(date) {\r\n        return _utils4.default.calculateTimezoneByValue(this.option(\"timeZone\"), date)\r\n    },\r\n    getCorrectedDatesByDaylightOffsets: function(originalStartDate, dates, appointmentData) {\r\n        var _this3 = this;\r\n        var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", appointmentData);\r\n        var needCheckTimezoneOffset = _type2.default.isDefined(startDateTimeZone) && _type2.default.isDefined(this._getTimezoneOffsetByOption(originalStartDate));\r\n        var convertedOriginalStartDate = this.fire(\"convertDateByTimezoneBack\", new Date(originalStartDate.getTime()), startDateTimeZone);\r\n        if (needCheckTimezoneOffset) {\r\n            dates = dates.map(function(date) {\r\n                var convertedDate = _this3.fire(\"convertDateByTimezoneBack\", new Date(date.getTime()), startDateTimeZone);\r\n                return _utils4.default.getCorrectedDateByDaylightOffsets(convertedOriginalStartDate, convertedDate, date, _this3.option(\"timeZone\"), startDateTimeZone)\r\n            })\r\n        }\r\n        return dates\r\n    },\r\n    _filterAppointmentsByDate: function() {\r\n        var dateRange = this._workSpace.getDateRange();\r\n        this._appointmentModel.filterByDate(dateRange[0], dateRange[1], this.option(\"remoteFiltering\"), this.option(\"dateSerializationFormat\"))\r\n    },\r\n    _loadResources: function() {\r\n        var groups = this._getCurrentViewOption(\"groups\");\r\n        var result = new Deferred;\r\n        this._resourcesManager.loadResources(groups).done(function(resources) {\r\n            this._loadedResources = resources;\r\n            result.resolve(resources)\r\n        }.bind(this));\r\n        return result.promise()\r\n    },\r\n    _dataSourceLoadedCallback: (0, _callbacks2.default)(),\r\n    _reloadDataSource: function() {\r\n        var result = new Deferred;\r\n        if (this._dataSource) {\r\n            this._dataSource.load().done(function() {\r\n                _ui6.default.hide();\r\n                this._fireContentReadyAction(result)\r\n            }.bind(this)).fail(function() {\r\n                _ui6.default.hide();\r\n                result.reject()\r\n            });\r\n            this._dataSource.isLoading() && _ui6.default.show({\r\n                container: this.$element(),\r\n                position: {\r\n                    of: this.$element()\r\n                }\r\n            })\r\n        } else {\r\n            this._fireContentReadyAction(result)\r\n        }\r\n        return result.promise()\r\n    },\r\n    _fireContentReadyAction: function(result) {\r\n        var contentReadyBase = this.callBase.bind(this);\r\n        var fireContentReady = function() {\r\n            contentReadyBase();\r\n            null === result || void 0 === result ? void 0 : result.resolve()\r\n        };\r\n        if (this._workSpaceRecalculation) {\r\n            var _this$_workSpaceRecal;\r\n            null === (_this$_workSpaceRecal = this._workSpaceRecalculation) || void 0 === _this$_workSpaceRecal ? void 0 : _this$_workSpaceRecal.done(function() {\r\n                fireContentReady()\r\n            })\r\n        } else {\r\n            fireContentReady()\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        var filteredItems = this.getFilteredItems();\r\n        this._toggleSmallClass();\r\n        if (!this._isAgenda() && filteredItems && this._isVisible()) {\r\n            this._workSpace._cleanAllowedPositions();\r\n            this._workSpace.option(\"allDayExpanded\", this._isAllDayExpanded(filteredItems));\r\n            this._workSpace._dimensionChanged();\r\n            var appointments = this._layoutManager.createAppointmentsMap(filteredItems);\r\n            this._appointments.option(\"items\", appointments)\r\n        }\r\n        this.hideAppointmentTooltip();\r\n        this._appointmentPopup.triggerResize();\r\n        this._appointmentPopup.updatePopupFullScreenMode()\r\n    },\r\n    _clean: function() {\r\n        this._cleanPopup();\r\n        this.callBase()\r\n    },\r\n    _toggleSmallClass: function() {\r\n        var width = (0, _position.getBoundingRect)(this.$element().get(0)).width;\r\n        this.$element().toggleClass(WIDGET_SMALL_CLASS, width < WIDGET_SMALL_WIDTH)\r\n    },\r\n    _toggleAdaptiveClass: function() {\r\n        this.$element().toggleClass(WIDGET_ADAPTIVE_CLASS, this.option(\"adaptivityEnabled\"))\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        visible && this._dimensionChanged()\r\n    },\r\n    _dataSourceOptions: function() {\r\n        return {\r\n            paginate: false\r\n        }\r\n    },\r\n    _init: function() {\r\n        this._initExpressions({\r\n            startDate: this.option(\"startDateExpr\"),\r\n            endDate: this.option(\"endDateExpr\"),\r\n            startDateTimeZone: this.option(\"startDateTimeZoneExpr\"),\r\n            endDateTimeZone: this.option(\"endDateTimeZoneExpr\"),\r\n            allDay: this.option(\"allDayExpr\"),\r\n            text: this.option(\"textExpr\"),\r\n            description: this.option(\"descriptionExpr\"),\r\n            recurrenceRule: this.option(\"recurrenceRuleExpr\"),\r\n            recurrenceException: this.option(\"recurrenceExceptionExpr\")\r\n        });\r\n        this.callBase();\r\n        this._initDataSource();\r\n        this._loadedResources = [];\r\n        this.$element().addClass(WIDGET_CLASS).toggleClass(WIDGET_WIN_NO_TOUCH_CLASS, !!(_browser2.default.msie && _support.touch));\r\n        this._initEditing();\r\n        this._resourcesManager = new _uiScheduler24.default(this.option(\"resources\"));\r\n        var combinedDataAccessors = this._combineDataAccessors();\r\n        this._appointmentModel = new _uiScheduler26.default(this._dataSource, combinedDataAccessors, this.getAppointmentDurationInMinutes());\r\n        this._initActions();\r\n        this._compactAppointmentsHelper = new _compactAppointmentsHelper.CompactAppointmentsHelper(this);\r\n        this._asyncTemplatesTimers = [];\r\n        this._subscribes = _uiScheduler2.default\r\n    },\r\n    _initTemplates: function() {\r\n        this._initAppointmentTemplate();\r\n        this._templateManager.addDefaultTemplates({\r\n            appointmentTooltip: new _empty_template.EmptyTemplate,\r\n            dropDownAppointment: new _empty_template.EmptyTemplate\r\n        });\r\n        this.callBase()\r\n    },\r\n    _initAppointmentTemplate: function() {\r\n        var _this4 = this;\r\n        var expr = this._dataAccessors.expr;\r\n        var createGetter = function(property) {\r\n            return _data2.default.compileGetter(\"appointmentData.\".concat(property))\r\n        };\r\n        this._templateManager.addDefaultTemplates(_defineProperty({}, \"item\", new _bindable_template.BindableTemplate(function($container, data, model) {\r\n            _this4.getAppointmentsInstance()._renderAppointmentTemplate($container, data, model)\r\n        }, [\"html\", \"text\", \"startDate\", \"endDate\", \"allDay\", \"description\", \"recurrenceRule\", \"recurrenceException\", \"startDateTimeZone\", \"endDateTimeZone\"], this.option(\"integrationOptions.watchMethod\"), {\r\n            text: createGetter(expr.textExpr),\r\n            startDate: createGetter(expr.startDateExpr),\r\n            endDate: createGetter(expr.endDateExpr),\r\n            startDateTimeZone: createGetter(expr.startDateTimeZoneExpr),\r\n            endDateTimeZone: createGetter(expr.endDateTimeZoneExpr),\r\n            allDay: createGetter(expr.allDayExpr),\r\n            recurrenceRule: createGetter(expr.recurrenceRuleExpr)\r\n        })))\r\n    },\r\n    _combineDataAccessors: function() {\r\n        var resourcesDataAccessors = this._resourcesManager._dataAccessors;\r\n        var result = (0, _extend.extend)(true, {}, this._dataAccessors);\r\n        (0, _iterator.each)(resourcesDataAccessors, function(type, accessor) {\r\n            result[type].resources = accessor\r\n        }.bind(this));\r\n        return result\r\n    },\r\n    _renderContent: function() {\r\n        this._renderContentImpl()\r\n    },\r\n    _dataSourceChangedHandler: function(result) {\r\n        if (this._readyToRenderAppointments) {\r\n            this._workSpaceRecalculation.done(function() {\r\n                this._filteredItems = this.fire(\"prerenderFilter\");\r\n                this._workSpace.option(\"allDayExpanded\", this._isAllDayExpanded(this._filteredItems));\r\n                if (this._isAgenda()) {\r\n                    this.getRenderingStrategyInstance().calculateRows(this._filteredItems, 7, this.option(\"currentDate\"), true)\r\n                }\r\n                if (this._filteredItems.length && this._isVisible()) {\r\n                    this._appointments.option(\"items\", this._getAppointmentsToRepaint());\r\n                    this._appointmentModel.cleanModelState()\r\n                } else {\r\n                    this._appointments.option(\"items\", [])\r\n                }\r\n                if (this._isAgenda()) {\r\n                    this._workSpace._renderView();\r\n                    this._dataSourceLoadedCallback.fireWith(this, [result])\r\n                }\r\n            }.bind(this))\r\n        }\r\n    },\r\n    _getAppointmentsToRepaint: function() {\r\n        var appointments = this._layoutManager.createAppointmentsMap(this._filteredItems);\r\n        return this._layoutManager.getRepaintedAppointments(appointments, this.getAppointmentsInstance().option(\"items\"))\r\n    },\r\n    _initExpressions: function(fields) {\r\n        var isDateField = function(field) {\r\n            return \"startDate\" === field || \"endDate\" === field\r\n        };\r\n        if (!this._dataAccessors) {\r\n            this._dataAccessors = {\r\n                getter: {},\r\n                setter: {},\r\n                expr: {}\r\n            }\r\n        }(0, _iterator.each)(fields, function(name, expr) {\r\n            if (expr) {\r\n                var getter = _data2.default.compileGetter(expr);\r\n                var setter = _data2.default.compileSetter(expr);\r\n                var dateGetter;\r\n                var dateSetter;\r\n                if (isDateField(name)) {\r\n                    var that = this;\r\n                    dateGetter = function() {\r\n                        var value = getter.apply(this, arguments);\r\n                        if ((0, _config2.default)().forceIsoDateParsing) {\r\n                            if (!that.option(\"dateSerializationFormat\")) {\r\n                                var format = _date_serialization2.default.getDateSerializationFormat(value);\r\n                                if (format) {\r\n                                    that.option(\"dateSerializationFormat\", format)\r\n                                }\r\n                            }\r\n                            value = _date_serialization2.default.deserializeDate(value)\r\n                        }\r\n                        return value\r\n                    };\r\n                    dateSetter = function(object, value) {\r\n                        if ((0, _config2.default)().forceIsoDateParsing || that.option(\"dateSerializationFormat\")) {\r\n                            value = _date_serialization2.default.serializeDate(value, that.option(\"dateSerializationFormat\"))\r\n                        }\r\n                        setter.call(this, object, value)\r\n                    }\r\n                }\r\n                this._dataAccessors.getter[name] = dateGetter || getter;\r\n                this._dataAccessors.setter[name] = dateSetter || setter;\r\n                this._dataAccessors.expr[name + \"Expr\"] = expr\r\n            } else {\r\n                delete this._dataAccessors.getter[name];\r\n                delete this._dataAccessors.setter[name];\r\n                delete this._dataAccessors.expr[name + \"Expr\"]\r\n            }\r\n        }.bind(this))\r\n    },\r\n    _updateExpression: function(name, value) {\r\n        var exprObj = {};\r\n        exprObj[name.replace(\"Expr\", \"\")] = value;\r\n        this._initExpressions(exprObj)\r\n    },\r\n    _initEditing: function() {\r\n        var editing = this.option(\"editing\");\r\n        this._editing = {\r\n            allowAdding: !!editing,\r\n            allowUpdating: !!editing,\r\n            allowDeleting: !!editing,\r\n            allowResizing: !!editing,\r\n            allowDragging: !!editing\r\n        };\r\n        if (_type2.default.isObject(editing)) {\r\n            this._editing = (0, _extend.extend)(this._editing, editing)\r\n        }\r\n        this._editing.allowDragging = this._editing.allowDragging && this._editing.allowUpdating;\r\n        this._editing.allowResizing = this._editing.allowResizing && this._editing.allowUpdating;\r\n        this.$element().toggleClass(WIDGET_READONLY_CLASS, this._isReadOnly())\r\n    },\r\n    _isReadOnly: function() {\r\n        var result = true;\r\n        var editing = this._editing;\r\n        for (var prop in editing) {\r\n            if (Object.prototype.hasOwnProperty.call(editing, prop)) {\r\n                result = result && !editing[prop]\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _dispose: function() {\r\n        this._appointmentTooltip && this._appointmentTooltip.dispose();\r\n        this.hideAppointmentPopup();\r\n        this.hideAppointmentTooltip();\r\n        this._asyncTemplatesTimers.forEach(clearTimeout);\r\n        this._asyncTemplatesTimers = [];\r\n        this.callBase()\r\n    },\r\n    _initActions: function() {\r\n        this._actions = {\r\n            onAppointmentAdding: this._createActionByOption(\"onAppointmentAdding\"),\r\n            onAppointmentAdded: this._createActionByOption(\"onAppointmentAdded\"),\r\n            onAppointmentUpdating: this._createActionByOption(\"onAppointmentUpdating\"),\r\n            onAppointmentUpdated: this._createActionByOption(\"onAppointmentUpdated\"),\r\n            onAppointmentDeleting: this._createActionByOption(\"onAppointmentDeleting\"),\r\n            onAppointmentDeleted: this._createActionByOption(\"onAppointmentDeleted\"),\r\n            onAppointmentFormOpening: this._createActionByOption(\"onAppointmentFormOpening\")\r\n        }\r\n    },\r\n    _getAppointmentRenderedAction: function() {\r\n        return this._createActionByOption(\"onAppointmentRendered\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        })\r\n    },\r\n    _renderFocusTarget: _common.noop,\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this.fire(\"validateDayHours\");\r\n        this._validateCellDuration();\r\n        this._processCurrentView();\r\n        this._renderHeader();\r\n        this._layoutManager = new _uiSchedulerAppointments2.default(this, this._getAppointmentsRenderingStrategy());\r\n        this._appointments = this._createComponent(\"<div>\", _uiScheduler28.default, this._appointmentsConfig());\r\n        this._appointments.option(\"itemTemplate\", this._getAppointmentTemplate(\"appointmentTemplate\"));\r\n        this._appointmentTooltip = new(this.option(\"adaptivityEnabled\") ? _mobileTooltipStrategy.MobileTooltipStrategy : _desktopTooltipStrategy.DesktopTooltipStrategy)(this._getAppointmentTooltipOptions());\r\n        this._appointmentPopup = new _appointmentPopup2.default(this);\r\n        if (this._isLoaded()) {\r\n            this._initMarkupCore(this._loadedResources);\r\n            this._dataSourceChangedHandler(this._dataSource.items());\r\n            this._fireContentReadyAction()\r\n        } else {\r\n            this._loadResources().done(function(resources) {\r\n                this._initMarkupCore(resources);\r\n                this._reloadDataSource()\r\n            }.bind(this))\r\n        }\r\n    },\r\n    _getAppointmentTooltipOptions: function() {\r\n        var _this5 = this;\r\n        var that = this;\r\n        return {\r\n            createComponent: that._createComponent.bind(that),\r\n            container: that.$element(),\r\n            getScrollableContainer: that.getWorkSpaceScrollableContainer.bind(that),\r\n            addDefaultTemplates: that._templateManager.addDefaultTemplates.bind(that._templateManager),\r\n            getAppointmentTemplate: that._getAppointmentTemplate.bind(that),\r\n            showAppointmentPopup: that.showAppointmentPopup.bind(that),\r\n            getTextAndFormatDate: function(data, currentData, format) {\r\n                return that.fire(\"getTextAndFormatDate\", data, currentData, format)\r\n            },\r\n            checkAndDeleteAppointment: that.checkAndDeleteAppointment.bind(that),\r\n            isAppointmentInAllDayPanel: that.isAppointmentInAllDayPanel.bind(that),\r\n            getSingleAppointmentData: function(appointmentData, targetElement) {\r\n                var $appointment = (0, _renderer2.default)(targetElement);\r\n                return _this5._getAppointmentData(appointmentData, {\r\n                    data: appointmentData,\r\n                    target: $appointment.get(0),\r\n                    $appointment: $appointment,\r\n                    skipHoursProcessing: true\r\n                })\r\n            }\r\n        }\r\n    },\r\n    checkAndDeleteAppointment: function(data, appointmentData) {\r\n        var that = this;\r\n        var startDate = that.fire(\"getField\", \"startDate\", appointmentData);\r\n        that._checkRecurringAppointment(data, appointmentData, startDate, function() {\r\n            that.deleteAppointment(data)\r\n        }, true)\r\n    },\r\n    _getExtraAppointmentTooltipOptions: function() {\r\n        return {\r\n            rtlEnabled: this.option(\"rtlEnabled\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            editing: this.option(\"editing\"),\r\n            offset: this.option(\"_appointmentTooltipOffset\")\r\n        }\r\n    },\r\n    isAppointmentInAllDayPanel: function(appointmentData) {\r\n        var workSpace = this._workSpace;\r\n        var itTakesAllDay = this.appointmentTakesAllDay(appointmentData);\r\n        return itTakesAllDay && workSpace.supportAllDayRow() && workSpace.option(\"showAllDayPanel\")\r\n    },\r\n    _initMarkupCore: function(resources) {\r\n        var _this6 = this;\r\n        this._readyToRenderAppointments = _window2.default.hasWindow();\r\n        this._workSpace && this._cleanWorkspace();\r\n        this._renderWorkSpace(resources);\r\n        this._appointments.option({\r\n            fixedContainer: this._workSpace.getFixedContainer(),\r\n            allDayContainer: this._workSpace.getAllDayContainer()\r\n        });\r\n        this._waitAsyncTemplate(function() {\r\n            var _this6$_workSpaceReca;\r\n            return null === (_this6$_workSpaceReca = _this6._workSpaceRecalculation) || void 0 === _this6$_workSpaceReca ? void 0 : _this6$_workSpaceReca.resolve()\r\n        });\r\n        this._filterAppointmentsByDate()\r\n    },\r\n    _isLoaded: function() {\r\n        return this._isResourcesLoaded() && this._isDataSourceLoaded()\r\n    },\r\n    _isResourcesLoaded: function() {\r\n        return _type2.default.isDefined(this._loadedResources)\r\n    },\r\n    _isDataSourceLoaded: function() {\r\n        return this._dataSource && this._dataSource.isLoaded();\r\n    },\r\n    _render: function() {\r\n        this._toggleSmallClass();\r\n        this._toggleAdaptiveClass();\r\n        this.callBase()\r\n    },\r\n    _renderHeader: function() {\r\n        var $header = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\r\n        this._header = this._createComponent($header, _uiScheduler4.default, this._headerConfig())\r\n    },\r\n    _headerConfig: function() {\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        var countConfig = this._getViewCountConfig();\r\n        var result = (0, _extend.extend)({\r\n            isAdaptive: this.option(\"adaptivityEnabled\"),\r\n            firstDayOfWeek: this.option(\"firstDayOfWeek\"),\r\n            currentView: this._currentView,\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            width: this.option(\"width\"),\r\n            rtlEnabled: this.option(\"rtlEnabled\"),\r\n            useDropDownViewSwitcher: this.option(\"useDropDownViewSwitcher\"),\r\n            _dropDownButtonIcon: this.option(\"_dropDownButtonIcon\"),\r\n            customizeDateNavigatorText: this.option(\"customizeDateNavigatorText\")\r\n        }, currentViewOptions);\r\n        result.observer = this;\r\n        result.intervalCount = countConfig.intervalCount;\r\n        result.views = this.option(\"views\");\r\n        result.min = new Date(this._dateOption(\"min\"));\r\n        result.max = new Date(this._dateOption(\"max\"));\r\n        result.currentDate = _date2.default.trimTime(new Date(this._dateOption(\"currentDate\")));\r\n        return result\r\n    },\r\n    _appointmentsConfig: function() {\r\n        var that = this;\r\n        var config = {\r\n            observer: this,\r\n            onItemRendered: this._getAppointmentRenderedAction(),\r\n            onItemClick: this._createActionByOption(\"onAppointmentClick\"),\r\n            onItemContextMenu: this._createActionByOption(\"onAppointmentContextMenu\"),\r\n            onAppointmentDblClick: this._createActionByOption(\"onAppointmentDblClick\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            allowDrag: this._allowDragging(),\r\n            allowDelete: this._editing.allowUpdating && this._editing.allowDeleting,\r\n            allowResize: this._allowResizing(),\r\n            allowAllDayResize: this._allowAllDayResizing(),\r\n            rtlEnabled: this.option(\"rtlEnabled\"),\r\n            currentView: this.option(\"currentView\"),\r\n            onContentReady: function() {\r\n                that._workSpace && that._workSpace.option(\"allDayExpanded\", that._isAllDayExpanded(that.getFilteredItems()))\r\n            }\r\n        };\r\n        return config\r\n    },\r\n    getCollectorOffset: function() {\r\n        if (this._workSpace.needApplyCollectorOffset() && !this.option(\"adaptivityEnabled\")) {\r\n            return this.option(\"_collectorOffset\")\r\n        } else {\r\n            return 0\r\n        }\r\n    },\r\n    getAppointmentDurationInMinutes: function() {\r\n        return this._getCurrentViewOption(\"cellDuration\")\r\n    },\r\n    _processCurrentView: function() {\r\n        var views = this.option(\"views\");\r\n        var currentView = this.option(\"currentView\");\r\n        var that = this;\r\n        this._currentView = currentView;\r\n        (0, _iterator.each)(views, function(_, view) {\r\n            var isViewIsObject = _type2.default.isObject(view);\r\n            var viewName = isViewIsObject ? view.name : view;\r\n            var viewType = view.type;\r\n            if (currentView === viewName || currentView === viewType) {\r\n                that._currentView = view;\r\n                return false\r\n            }\r\n        })\r\n    },\r\n    _validateCellDuration: function() {\r\n        var endDayHour = this._getCurrentViewOption(\"endDayHour\");\r\n        var startDayHour = this._getCurrentViewOption(\"startDayHour\");\r\n        var cellDuration = this._getCurrentViewOption(\"cellDuration\");\r\n        if ((endDayHour - startDayHour) * MINUTES_IN_HOUR % cellDuration !== 0) {\r\n            _ui2.default.log(\"W1015\")\r\n        }\r\n    },\r\n    _getCurrentViewType: function() {\r\n        return this._currentView.type || this._currentView\r\n    },\r\n    _getAppointmentsRenderingStrategy: function() {\r\n        return VIEWS_CONFIG[this._getCurrentViewType()].renderingStrategy\r\n    },\r\n    _renderWorkSpace: function(groups) {\r\n        this._readyToRenderAppointments && this._toggleSmallClass();\r\n        var $workSpace = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\r\n        var countConfig = this._getViewCountConfig();\r\n        this._workSpace = this._createComponent($workSpace, VIEWS_CONFIG[this._getCurrentViewType()].workSpace, this._workSpaceConfig(groups, countConfig));\r\n        this._allowDragging() && this._workSpace.initDragBehavior(this);\r\n        this._workSpace._attachTablesEvents();\r\n        this._workSpace.getWorkArea().append(this._appointments.$element());\r\n        this._recalculateWorkspace();\r\n        countConfig.startDate && this._header && this._header.option(\"currentDate\", this._workSpace._getHeaderDate());\r\n        this._appointments.option(\"_collectorOffset\", this.getCollectorOffset())\r\n    },\r\n    _getViewCountConfig: function() {\r\n        var currentView = this.option(\"currentView\");\r\n        var view = this._getViewByName(currentView);\r\n        var viewCount = view && view.intervalCount || 1;\r\n        var startDate = view && view.startDate || null;\r\n        return {\r\n            intervalCount: viewCount,\r\n            startDate: startDate\r\n        }\r\n    },\r\n    _getViewByName: function(name) {\r\n        var views = this.option(\"views\");\r\n        for (var i = 0; i < views.length; i++) {\r\n            if (views[i].name === name || views[i].type === name || views[i] === name) {\r\n                return views[i]\r\n            }\r\n        }\r\n    },\r\n    _recalculateWorkspace: function() {\r\n        var _this7 = this;\r\n        this._workSpaceRecalculation = new Deferred;\r\n        this._waitAsyncTemplate(function() {\r\n            _dom2.default.triggerResizeEvent(_this7._workSpace.$element());\r\n            _this7._workSpace._refreshDateTimeIndication()\r\n        })\r\n    },\r\n    _workSpaceConfig: function(groups, countConfig) {\r\n        var _this8 = this;\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        var result = (0, _extend.extend)({\r\n            noDataText: this.option(\"noDataText\"),\r\n            firstDayOfWeek: this.option(\"firstDayOfWeek\"),\r\n            startDayHour: this.option(\"startDayHour\"),\r\n            endDayHour: this.option(\"endDayHour\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            accessKey: this.option(\"accessKey\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            cellDuration: this.option(\"cellDuration\"),\r\n            showAllDayPanel: this.option(\"showAllDayPanel\"),\r\n            showCurrentTimeIndicator: this.option(\"showCurrentTimeIndicator\"),\r\n            indicatorTime: this.option(\"indicatorTime\"),\r\n            indicatorUpdateInterval: this.option(\"indicatorUpdateInterval\"),\r\n            shadeUntilCurrentTime: this.option(\"shadeUntilCurrentTime\"),\r\n            allDayExpanded: this._appointments.option(\"items\"),\r\n            crossScrollingEnabled: this.option(\"crossScrollingEnabled\"),\r\n            dataCellTemplate: this.option(\"dataCellTemplate\"),\r\n            timeCellTemplate: this.option(\"timeCellTemplate\"),\r\n            resourceCellTemplate: this.option(\"resourceCellTemplate\"),\r\n            dateCellTemplate: this.option(\"dateCellTemplate\"),\r\n            allowMultipleCellSelection: this.option(\"allowMultipleCellSelection\"),\r\n            selectedCellData: this.option(\"selectedCellData\"),\r\n            onSelectionChanged: function(args) {\r\n                _this8.option(\"selectedCellData\", args.selectedCellData)\r\n            },\r\n            groupByDate: this._getCurrentViewOption(\"groupByDate\")\r\n        }, currentViewOptions);\r\n        result.observer = this;\r\n        result.intervalCount = countConfig.intervalCount;\r\n        result.startDate = countConfig.startDate;\r\n        result.groups = groups;\r\n        result.onCellClick = this._createActionByOption(\"onCellClick\");\r\n        result.onCellContextMenu = this._createActionByOption(\"onCellContextMenu\");\r\n        result.min = new Date(this._dateOption(\"min\"));\r\n        result.max = new Date(this._dateOption(\"max\"));\r\n        result.currentDate = _date2.default.trimTime(new Date(this._dateOption(\"currentDate\")));\r\n        result.hoursInterval = result.cellDuration / 60;\r\n        result.allDayExpanded = this._isAllDayExpanded(this.getFilteredItems());\r\n        result.dataCellTemplate = result.dataCellTemplate ? this._getTemplate(result.dataCellTemplate) : null;\r\n        result.timeCellTemplate = result.timeCellTemplate ? this._getTemplate(result.timeCellTemplate) : null;\r\n        result.resourceCellTemplate = result.resourceCellTemplate ? this._getTemplate(result.resourceCellTemplate) : null;\r\n        result.dateCellTemplate = result.dateCellTemplate ? this._getTemplate(result.dateCellTemplate) : null;\r\n        return result\r\n    },\r\n    _waitAsyncTemplate: function(callback) {\r\n        if (this._options.silent(\"templatesRenderAsynchronously\")) {\r\n            var timer = setTimeout(function() {\r\n                callback();\r\n                clearTimeout(timer)\r\n            });\r\n            this._asyncTemplatesTimers.push(timer)\r\n        } else {\r\n            callback()\r\n        }\r\n    },\r\n    _getCurrentViewOptions: function() {\r\n        return this._currentView\r\n    },\r\n    _getCurrentViewOption: function(optionName) {\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        if (currentViewOptions && void 0 !== currentViewOptions[optionName]) {\r\n            return currentViewOptions[optionName]\r\n        }\r\n        return this.option(optionName)\r\n    },\r\n    _getAppointmentTemplate: function(optionName) {\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        if (currentViewOptions && currentViewOptions[optionName]) {\r\n            return this._getTemplate(currentViewOptions[optionName])\r\n        }\r\n        return this._getTemplateByOption(optionName)\r\n    },\r\n    _updateOption: function(viewName, optionName, value) {\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        if (!currentViewOptions || !_type2.default.isDefined(currentViewOptions[optionName])) {\r\n            this[\"_\" + viewName].option(optionName, value)\r\n        }\r\n    },\r\n    _refreshWorkSpace: function(groups) {\r\n        var _this9 = this;\r\n        this._cleanWorkspace();\r\n        delete this._workSpace;\r\n        this._renderWorkSpace(groups);\r\n        if (this._readyToRenderAppointments) {\r\n            this._appointments.option({\r\n                fixedContainer: this._workSpace.getFixedContainer(),\r\n                allDayContainer: this._workSpace.getAllDayContainer()\r\n            });\r\n            this._waitAsyncTemplate(function() {\r\n                return _this9._workSpaceRecalculation.resolve()\r\n            })\r\n        }\r\n    },\r\n    _cleanWorkspace: function() {\r\n        this._appointments.$element().detach();\r\n        this._workSpace._dispose();\r\n        this._workSpace.$element().remove();\r\n        this.option(\"selectedCellData\", [])\r\n    },\r\n    getWorkSpaceScrollable: function() {\r\n        return this._workSpace.getScrollable()\r\n    },\r\n    getWorkSpaceScrollableScrollTop: function(allDay) {\r\n        return this._workSpace.getGroupedScrollableScrollTop(allDay)\r\n    },\r\n    getWorkSpaceScrollableScrollLeft: function() {\r\n        return this._workSpace.getScrollableScrollLeft()\r\n    },\r\n    getWorkSpaceScrollableContainer: function() {\r\n        return this._workSpace.getScrollableContainer()\r\n    },\r\n    getWorkSpaceAllDayHeight: function() {\r\n        return this._workSpace.getAllDayHeight()\r\n    },\r\n    getWorkSpaceAllDayOffset: function() {\r\n        return this._workSpace.getAllDayOffset()\r\n    },\r\n    getWorkSpaceHeaderPanelHeight: function() {\r\n        return this._workSpace.getHeaderPanelHeight()\r\n    },\r\n    getWorkSpaceDateTableOffset: function() {\r\n        return !this.option(\"crossScrollingEnabled\") || this.option(\"rtlEnabled\") ? this._workSpace.getWorkSpaceLeftOffset() : 0\r\n    },\r\n    getWorkSpace: function() {\r\n        return this._workSpace\r\n    },\r\n    getAppointmentModel: function() {\r\n        return this._appointmentModel\r\n    },\r\n    getHeader: function() {\r\n        return this._header\r\n    },\r\n    getMaxAppointmentsPerCell: function() {\r\n        return this._getCurrentViewOption(\"maxAppointmentsPerCell\")\r\n    },\r\n    _cleanPopup: function() {\r\n        this._appointmentPopup && this._appointmentPopup.dispose()\r\n    },\r\n    _convertDatesByTimezoneBack: function(applyAppointmentTimezone, sourceAppointmentData, targetAppointmentData) {\r\n        targetAppointmentData = targetAppointmentData || sourceAppointmentData;\r\n        var processedStartDate = this.fire(\"convertDateByTimezoneBack\", this.fire(\"getField\", \"startDate\", sourceAppointmentData), applyAppointmentTimezone && this.fire(\"getField\", \"startDateTimeZone\", sourceAppointmentData));\r\n        var processedEndDate = this.fire(\"convertDateByTimezoneBack\", this.fire(\"getField\", \"endDate\", sourceAppointmentData), applyAppointmentTimezone && this.fire(\"getField\", \"endDateTimeZone\", sourceAppointmentData));\r\n        this.fire(\"setField\", \"startDate\", targetAppointmentData, processedStartDate);\r\n        this.fire(\"setField\", \"endDate\", targetAppointmentData, processedEndDate)\r\n    },\r\n    _checkRecurringAppointment: function(targetAppointment, singleAppointment, exceptionDate, callback, isDeleted, isPopupEditing, dragEvent) {\r\n        delete this._updatedRecAppointment;\r\n        var recurrenceRule = this.fire(\"getField\", \"recurrenceRule\", targetAppointment);\r\n        if (!_utils2.default.getRecurrenceRule(recurrenceRule).isValid || !this._editing.allowUpdating) {\r\n            callback();\r\n            return\r\n        }\r\n        var editMode = this.option(\"recurrenceEditMode\");\r\n        switch (editMode) {\r\n            case \"series\":\r\n                callback();\r\n                break;\r\n            case \"occurrence\":\r\n                this._singleAppointmentChangesHandler(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent);\r\n                break;\r\n            default:\r\n                if (dragEvent) {\r\n                    dragEvent.cancel = new Deferred\r\n                }\r\n                this._showRecurrenceChangeConfirm(isDeleted).done(function(result) {\r\n                    result && callback();\r\n                    !result && this._singleAppointmentChangesHandler(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent)\r\n                }.bind(this)).fail(function() {\r\n                    this._appointments.moveAppointmentBack(dragEvent)\r\n                }.bind(this))\r\n        }\r\n    },\r\n    _singleAppointmentChangesHandler: function(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent) {\r\n        exceptionDate = new Date(exceptionDate);\r\n\r\n        function processAppointmentDates(appointment, commonTimezoneOffset) {\r\n            var startDate = this.fire(\"getField\", \"startDate\", appointment);\r\n            var processedStartDate = this.fire(\"convertDateByTimezoneBack\", startDate, this.fire(\"getField\", \"startDateTimeZone\", appointment));\r\n            var endDate = this.fire(\"getField\", \"endDate\", appointment);\r\n            var processedEndDate = this.fire(\"convertDateByTimezoneBack\", endDate, this.fire(\"getField\", \"endDateTimeZone\", appointment));\r\n            if (\"number\" === typeof commonTimezoneOffset && !isNaN(commonTimezoneOffset)) {\r\n                var startDateClientTzOffset = -(this._subscribes.getClientTimezoneOffset(startDate) / toMs(\"hour\"));\r\n                var endDateClientTzOffset = -(this._subscribes.getClientTimezoneOffset(endDate) / toMs(\"hour\"));\r\n                var processedStartDateInUTC = processedStartDate.getTime() - startDateClientTzOffset * toMs(\"hour\");\r\n                var processedEndDateInUTC = processedEndDate.getTime() - endDateClientTzOffset * toMs(\"hour\");\r\n                processedStartDate = new Date(processedStartDateInUTC + commonTimezoneOffset * toMs(\"hour\"));\r\n                processedEndDate = new Date(processedEndDateInUTC + commonTimezoneOffset * toMs(\"hour\"))\r\n            }\r\n            this.fire(\"setField\", \"startDate\", appointment, processedStartDate);\r\n            this.fire(\"setField\", \"endDate\", appointment, processedEndDate)\r\n        }\r\n        this.fire(\"setField\", \"recurrenceRule\", singleAppointment, \"\");\r\n        this.fire(\"setField\", \"recurrenceException\", singleAppointment, \"\");\r\n        if (!isDeleted && !isPopupEditing) {\r\n            processAppointmentDates.call(this, singleAppointment, this._getTimezoneOffsetByOption());\r\n            this.addAppointment(singleAppointment)\r\n        }\r\n        var recurrenceException = this._makeDateAsRecurrenceException(exceptionDate, targetAppointment);\r\n        var updatedAppointment = (0, _extend.extend)({}, targetAppointment);\r\n        this.fire(\"setField\", \"recurrenceException\", updatedAppointment, recurrenceException);\r\n        if (isPopupEditing) {\r\n            this._updatedRecAppointment = updatedAppointment;\r\n            this._showAppointmentPopup(singleAppointment, true, false);\r\n            this._editAppointmentData = targetAppointment\r\n        } else {\r\n            this._updateAppointment(targetAppointment, updatedAppointment, function() {\r\n                this._appointments.moveAppointmentBack(dragEvent)\r\n            }, dragEvent)\r\n        }\r\n    },\r\n    _makeDateAsRecurrenceException: function(exceptionDate, targetAppointment) {\r\n        var startDate = this._getStartDate(targetAppointment, true);\r\n        var isAllDay = this.fire(\"getField\", \"allDay\", targetAppointment);\r\n        var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", targetAppointment);\r\n        var exceptionByDate = this._getRecurrenceExceptionDate(exceptionDate, startDate, startDateTimeZone, isAllDay);\r\n        var recurrenceException = this.fire(\"getField\", \"recurrenceException\", targetAppointment);\r\n        return recurrenceException ? recurrenceException + \",\" + exceptionByDate : exceptionByDate\r\n    },\r\n    _getRecurrenceExceptionDate: function(exceptionStartDate, targetStartDate, startDateTimeZone, isAllDay) {\r\n        exceptionStartDate = this.fire(\"convertDateByTimezoneBack\", exceptionStartDate, startDateTimeZone);\r\n        var appointmentStartDate = this.fire(\"convertDateByTimezoneBack\", targetStartDate, startDateTimeZone);\r\n        exceptionStartDate = _utils4.default.correctRecurrenceExceptionByTimezone(exceptionStartDate, appointmentStartDate, this.option(\"timeZone\"), startDateTimeZone, true);\r\n        isAllDay && exceptionStartDate.setHours(appointmentStartDate.getHours(), appointmentStartDate.getMinutes(), appointmentStartDate.getSeconds(), appointmentStartDate.getMilliseconds());\r\n        return _date_serialization2.default.serializeDate(exceptionStartDate, UTC_FULL_DATE_FORMAT)\r\n    },\r\n    _showRecurrenceChangeConfirm: function(isDeleted) {\r\n        var message = _message2.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteMessage\" : \"dxScheduler-confirmRecurrenceEditMessage\");\r\n        var seriesText = _message2.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteSeries\" : \"dxScheduler-confirmRecurrenceEditSeries\");\r\n        var occurrenceText = _message2.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteOccurrence\" : \"dxScheduler-confirmRecurrenceEditOccurrence\");\r\n        return _dialog2.default.custom({\r\n            messageHtml: message,\r\n            showCloseButton: true,\r\n            showTitle: true,\r\n            buttons: [{\r\n                text: seriesText,\r\n                onClick: function() {\r\n                    return true\r\n                }\r\n            }, {\r\n                text: occurrenceText,\r\n                onClick: function() {\r\n                    return false\r\n                }\r\n            }]\r\n        }).show()\r\n    },\r\n    _getUpdatedData: function(options) {\r\n        var target = options.data || options;\r\n        var cellData = this.getTargetCellData();\r\n        var targetAllDay = this.fire(\"getField\", \"allDay\", target);\r\n        var targetStartDate = new Date(this.fire(\"getField\", \"startDate\", target));\r\n        var targetEndDate = new Date(this.fire(\"getField\", \"endDate\", target));\r\n        var date = cellData.date || targetStartDate;\r\n        var duration = targetEndDate.getTime() - targetStartDate.getTime();\r\n        if (this._workSpace.keepOriginalHours() && !isNaN(targetStartDate.getTime())) {\r\n            var diff = targetStartDate.getTime() - _date2.default.trimTime(targetStartDate).getTime();\r\n            date = new Date(_date2.default.trimTime(date).getTime() + diff)\r\n        }\r\n        var updatedData = {};\r\n        var allDay = cellData.allDay;\r\n        this.fire(\"setField\", \"allDay\", updatedData, allDay);\r\n        this.fire(\"setField\", \"startDate\", updatedData, date);\r\n        var endDate = new Date(date.getTime() + duration);\r\n        if (this.appointmentTakesAllDay(target) && !updatedData.allDay && this._workSpace.supportAllDayRow()) {\r\n            endDate = this._workSpace.calculateEndDate(date)\r\n        }\r\n        if (targetAllDay && !this._workSpace.supportAllDayRow() && !this._workSpace.keepOriginalHours()) {\r\n            var dateCopy = new Date(date);\r\n            dateCopy.setHours(0);\r\n            endDate = new Date(dateCopy.getTime() + duration);\r\n            if (0 !== endDate.getHours()) {\r\n                endDate.setHours(this._getCurrentViewOption(\"endDayHour\"))\r\n            }\r\n        }\r\n        endDate = new Date(endDate.getTime() - _utils4.default.getTimezoneOffsetChangeInMs(targetStartDate, targetEndDate, date, endDate));\r\n        this.fire(\"setField\", \"endDate\", updatedData, endDate);\r\n        this._resourcesManager.setResourcesToItem(updatedData, cellData.groups);\r\n        return updatedData\r\n    },\r\n    _getCoordinates: function(initialDates, dates, appointmentResources, allDay) {\r\n        var result = [];\r\n        for (var i = 0; i < dates.length; i++) {\r\n            var currentCoords = this._workSpace.getCoordinatesByDateInGroup(dates[i], appointmentResources, allDay);\r\n            for (var j = 0; j < currentCoords.length; j++) {\r\n                (0, _extend.extend)(currentCoords[j], {\r\n                    startDate: dates[i],\r\n                    initialStartDate: initialDates[i]\r\n                })\r\n            }\r\n            result = result.concat(currentCoords)\r\n        }\r\n        return result\r\n    },\r\n    _isAppointmentRecurrence: function(appointmentData) {\r\n        var recurrenceRule = this.fire(\"getField\", \"recurrenceRule\", appointmentData);\r\n        return recurrenceRule && _utils2.default.getRecurrenceRule(recurrenceRule).isValid\r\n    },\r\n    _getAppointmentData: function(appointmentData, options) {\r\n        options = options || {};\r\n        var $appointment = options.$appointment;\r\n        var updatedData = options.skipDateCalculation ? {} : this._getUpdatedData(options);\r\n        var resultAppointmentData = (0, _extend.extend)({}, appointmentData, updatedData);\r\n        var allDay = this.fire(\"getField\", \"allDay\", appointmentData);\r\n        var isAllDay = this._workSpace.supportAllDayRow() && allDay;\r\n        var startDate = new Date(this.fire(\"getField\", \"startDate\", resultAppointmentData));\r\n        var endDate = new Date(this.fire(\"getField\", \"endDate\", resultAppointmentData));\r\n        var appointmentDuration = endDate.getTime() - startDate.getTime();\r\n        var updatedStartDate = startDate;\r\n        var appointmentStartDate;\r\n        var appointmentEndDate;\r\n        if (_type2.default.isDefined($appointment)) {\r\n            var apptDataCalculator = this.getRenderingStrategyInstance().getAppointmentDataCalculator();\r\n            if (_type2.default.isFunction(apptDataCalculator) && this._isAppointmentRecurrence(appointmentData)) {\r\n                updatedStartDate = apptDataCalculator($appointment, startDate).startDate\r\n            } else {\r\n                if (options.isAppointmentResized) {\r\n                    var coordinates = _translator2.default.locate($appointment);\r\n                    updatedStartDate = new Date(this._workSpace.getCellDataByCoordinates(coordinates, isAllDay).startDate)\r\n                } else {\r\n                    var settings = $appointment.data(\"dxAppointmentSettings\");\r\n                    appointmentStartDate = settings && settings.originalAppointmentStartDate;\r\n                    appointmentEndDate = settings && settings.originalAppointmentEndDate;\r\n                    if (this._isAppointmentRecurrence(appointmentData)) {\r\n                        appointmentStartDate = settings && settings.startDate;\r\n                        appointmentEndDate = settings && settings.endDate\r\n                    }\r\n                    if (appointmentStartDate) {\r\n                        updatedStartDate = appointmentStartDate\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.fire(\"setField\", \"startDate\", resultAppointmentData, updatedStartDate);\r\n        this.fire(\"setField\", \"endDate\", resultAppointmentData, appointmentEndDate || new Date(updatedStartDate.getTime() + appointmentDuration));\r\n        if (!options.skipHoursProcessing && !options.isAppointmentResized) {\r\n            this._convertDatesByTimezoneBack(false, resultAppointmentData)\r\n        }\r\n        return resultAppointmentData\r\n    },\r\n    subscribe: function(subject, action) {\r\n        this._subscribes[subject] = _uiScheduler2.default[subject] = action\r\n    },\r\n    fire: function(subject) {\r\n        var callback = this._subscribes[subject];\r\n        var args = Array.prototype.slice.call(arguments);\r\n        if (!_type2.default.isFunction(callback)) {\r\n            throw _ui2.default.Error(\"E1031\", subject)\r\n        }\r\n        return callback.apply(this, args.slice(1))\r\n    },\r\n    getTargetCellData: function() {\r\n        return this._workSpace.getDataByDroppableCell()\r\n    },\r\n    _updateAppointment: function(target, appointment, onUpdatePrevented, dragEvent) {\r\n        var updatingOptions = {\r\n            newData: appointment,\r\n            oldData: (0, _extend.extend)({}, target),\r\n            cancel: false\r\n        };\r\n        var performFailAction = function(err) {\r\n            if (_type2.default.isFunction(onUpdatePrevented)) {\r\n                onUpdatePrevented.call(this)\r\n            }\r\n            if (err && \"Error\" === err.name) {\r\n                throw err\r\n            }\r\n        }.bind(this);\r\n        this._actions.onAppointmentUpdating(updatingOptions);\r\n        if (dragEvent && !_type2.default.isDeferred(dragEvent.cancel)) {\r\n            dragEvent.cancel = new Deferred\r\n        }\r\n        return this._processActionResult(updatingOptions, function(canceled) {\r\n            var deferred = new Deferred;\r\n            if (!canceled) {\r\n                this._expandAllDayPanel(appointment);\r\n                try {\r\n                    deferred = this._appointmentModel.update(target, appointment).done(function() {\r\n                        dragEvent && dragEvent.cancel.resolve(false)\r\n                    }).always(function(e) {\r\n                        this._executeActionWhenOperationIsCompleted(this._actions.onAppointmentUpdated, appointment, e)\r\n                    }.bind(this)).fail(function() {\r\n                        performFailAction()\r\n                    })\r\n                } catch (err) {\r\n                    performFailAction(err)\r\n                }\r\n            } else {\r\n                performFailAction()\r\n            }\r\n            return deferred.promise()\r\n        })\r\n    },\r\n    _processActionResult: function(actionOptions, callback) {\r\n        var _this10 = this;\r\n        var deferred = new Deferred;\r\n        var resolveCallback = function(callbackResult) {\r\n            when(_deferred2.default.fromPromise(callbackResult)).always(deferred.resolve)\r\n        };\r\n        if (_type2.default.isPromise(actionOptions.cancel)) {\r\n            when(_deferred2.default.fromPromise(actionOptions.cancel)).always(function(cancel) {\r\n                if (!_type2.default.isDefined(cancel)) {\r\n                    cancel = \"rejected\" === actionOptions.cancel.state()\r\n                }\r\n                resolveCallback(callback.call(_this10, cancel))\r\n            })\r\n        } else {\r\n            resolveCallback(callback.call(this, actionOptions.cancel))\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    _expandAllDayPanel: function(appointment) {\r\n        if (!this._isAllDayExpanded(this.getFilteredItems()) && this.appointmentTakesAllDay(appointment)) {\r\n            this._workSpace.option(\"allDayExpanded\", true)\r\n        }\r\n    },\r\n    _executeActionWhenOperationIsCompleted: function(action, appointment, e) {\r\n        var options = {\r\n            appointmentData: appointment\r\n        };\r\n        var isError = e && \"Error\" === e.name;\r\n        if (isError) {\r\n            options.error = e\r\n        } else {\r\n            this._appointmentPopup.isVisible() && this._appointmentPopup.hide()\r\n        }\r\n        action(options);\r\n        this._fireContentReadyAction()\r\n    },\r\n    _showAppointmentPopup: function(data, visibleButtons, isProcessTimeZone) {\r\n        this._appointmentPopup.show(data, visibleButtons, isProcessTimeZone)\r\n    },\r\n    getAppointmentPopup: function() {\r\n        return this._appointmentPopup.getPopup()\r\n    },\r\n    getUpdatedAppointment: function() {\r\n        return this._appointmentModel.getUpdatedAppointment()\r\n    },\r\n    getUpdatedAppointmentKeys: function() {\r\n        return this._appointmentModel.getUpdatedAppointmentKeys()\r\n    },\r\n    getAppointmentsInstance: function() {\r\n        return this._appointments\r\n    },\r\n    getResourceManager: function() {\r\n        return this._resourcesManager\r\n    },\r\n    getLayoutManager: function() {\r\n        return this._layoutManager\r\n    },\r\n    getRenderingStrategyInstance: function() {\r\n        return this._layoutManager.getRenderingStrategyInstance()\r\n    },\r\n    getFilteredItems: function() {\r\n        return this._filteredItems\r\n    },\r\n    getActions: function() {\r\n        return this._actions\r\n    },\r\n    appointmentTakesAllDay: function(appointment) {\r\n        return this._appointmentModel.appointmentTakesAllDay(appointment, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"))\r\n    },\r\n    _getStartDate: function(appointment, skipNormalize) {\r\n        var startDate = this.fire(\"getField\", \"startDate\", appointment);\r\n        var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", appointment);\r\n        startDate = this.fire(\"convertDateByTimezone\", _date2.default.makeDate(startDate), startDateTimeZone);\r\n        return !skipNormalize ? this.fire(\"updateAppointmentStartDate\", {\r\n            startDate: startDate,\r\n            appointment: appointment\r\n        }) : startDate\r\n    },\r\n    _getEndDate: function(appointment, skipNormalize) {\r\n        var endDate = new Date(this.fire(\"getField\", \"endDate\", appointment));\r\n        var startDate = new Date(this.fire(\"getField\", \"startDate\", appointment));\r\n        var isSameDate = _date2.default.sameDate(startDate, endDate);\r\n        if (endDate) {\r\n            var endDateTimeZone = this.fire(\"getField\", \"endDateTimeZone\", appointment);\r\n            endDate = this.fire(\"convertDateByTimezone\", _date2.default.makeDate(endDate), endDateTimeZone);\r\n            return !skipNormalize ? this.fire(\"updateAppointmentEndDate\", {\r\n                endDate: endDate,\r\n                isSameDate: isSameDate\r\n            }) : endDate\r\n        }\r\n        return endDate\r\n    },\r\n    _getRecurrenceException: function(appointmentData) {\r\n        var recurrenceException = this.fire(\"getField\", \"recurrenceException\", appointmentData);\r\n        if (recurrenceException) {\r\n            var startDate = this.fire(\"getField\", \"startDate\", appointmentData);\r\n            var exceptions = recurrenceException.split(\",\");\r\n            var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", appointmentData);\r\n            for (var i = 0; i < exceptions.length; i++) {\r\n                exceptions[i] = this._convertRecurrenceException(exceptions[i], startDate, startDateTimeZone)\r\n            }\r\n            recurrenceException = exceptions.join()\r\n        }\r\n        return recurrenceException\r\n    },\r\n    _convertRecurrenceException: function(exceptionString, startDate, startDateTimeZone) {\r\n        exceptionString = exceptionString.replace(/\\s/g, \"\");\r\n        var exceptionDate = _date_serialization2.default.deserializeDate(exceptionString);\r\n        var convertedStartDate = this.fire(\"convertDateByTimezone\", startDate, startDateTimeZone);\r\n        var convertedExceptionDate = this.fire(\"convertDateByTimezone\", exceptionDate, startDateTimeZone);\r\n        convertedExceptionDate = _utils4.default.correctRecurrenceExceptionByTimezone(convertedExceptionDate, convertedStartDate, this.option(\"timeZone\"), startDateTimeZone);\r\n        exceptionString = _date_serialization2.default.serializeDate(convertedExceptionDate, FULL_DATE_FORMAT);\r\n        return exceptionString\r\n    },\r\n    dayHasAppointment: function(day, appointment, trimTime) {\r\n        var startDate = new Date(this.fire(\"getField\", \"startDate\", appointment));\r\n        var endDate = new Date(this.fire(\"getField\", \"endDate\", appointment));\r\n        var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", appointment);\r\n        var endDateTimeZone = this.fire(\"getField\", \"endDateTimeZone\", appointment);\r\n        startDate = this.fire(\"convertDateByTimezone\", startDate, startDateTimeZone);\r\n        endDate = this.fire(\"convertDateByTimezone\", endDate, endDateTimeZone);\r\n        if (day.getTime() === endDate.getTime()) {\r\n            return startDate.getTime() === endDate.getTime()\r\n        }\r\n        if (trimTime) {\r\n            day = _date2.default.trimTime(day);\r\n            startDate = _date2.default.trimTime(startDate);\r\n            endDate = _date2.default.trimTime(endDate)\r\n        }\r\n        var dayTimeStamp = day.getTime();\r\n        var startDateTimeStamp = startDate.getTime();\r\n        var endDateTimeStamp = endDate.getTime();\r\n        return (0, _array.inArray)(dayTimeStamp, [startDateTimeStamp, endDateTimeStamp]) > -1 || startDateTimeStamp < dayTimeStamp && endDateTimeStamp > dayTimeStamp\r\n    },\r\n    setTargetedAppointmentResources: function(targetedAppointment, appointmentElement, appointmentIndex) {\r\n        var groups = this._getCurrentViewOption(\"groups\");\r\n        if (groups && groups.length) {\r\n            var resourcesSetter = this._resourcesManager._dataAccessors.setter;\r\n            var workSpace = this._workSpace;\r\n            var getGroups;\r\n            var setResourceCallback;\r\n            if (this._isAgenda()) {\r\n                getGroups = function() {\r\n                    var apptSettings = this.getLayoutManager()._positionMap[appointmentIndex];\r\n                    return workSpace._getCellGroups(apptSettings[0].groupIndex)\r\n                };\r\n                setResourceCallback = function(_, group) {\r\n                    resourcesSetter[group.name](targetedAppointment, group.id)\r\n                }\r\n            } else {\r\n                getGroups = function() {\r\n                    var setting = (0, _renderer2.default)(appointmentElement).data(\"dxAppointmentSettings\") || {};\r\n                    return workSpace.getCellDataByCoordinates({\r\n                        left: setting.left,\r\n                        top: setting.top\r\n                    }).groups\r\n                };\r\n                setResourceCallback = function(field, value) {\r\n                    resourcesSetter[field](targetedAppointment, value)\r\n                }\r\n            }(0, _iterator.each)(getGroups.call(this), setResourceCallback)\r\n        }\r\n    },\r\n    getStartViewDate: function() {\r\n        return this._workSpace.getStartViewDate()\r\n    },\r\n    getEndViewDate: function() {\r\n        return this._workSpace.getEndViewDate()\r\n    },\r\n    showAppointmentPopup: function(appointmentData, createNewAppointment, currentAppointmentData) {\r\n        var singleAppointment = currentAppointmentData || this._getAppointmentData(appointmentData, {\r\n            skipDateCalculation: true\r\n        });\r\n        var startDate = this.fire(\"getField\", \"startDate\", currentAppointmentData || appointmentData);\r\n        this._checkRecurringAppointment(appointmentData, singleAppointment, startDate, function() {\r\n            if (createNewAppointment || _type2.default.isEmptyObject(appointmentData)) {\r\n                delete this._editAppointmentData;\r\n                this._editing.allowAdding && this._showAppointmentPopup(appointmentData, true, true)\r\n            } else {\r\n                this._editAppointmentData = appointmentData;\r\n                this._showAppointmentPopup(appointmentData, this._editing.allowUpdating, true)\r\n            }\r\n        }.bind(this), false, true)\r\n    },\r\n    hideAppointmentPopup: function(saveChanges) {\r\n        if (this._appointmentPopup && this._appointmentPopup.isVisible()) {\r\n            saveChanges && this._appointmentPopup.saveChanges();\r\n            this._appointmentPopup.hide()\r\n        }\r\n    },\r\n    showAppointmentTooltip: function(appointmentData, target, currentAppointmentData) {\r\n        if (appointmentData) {\r\n            this.showAppointmentTooltipCore(target, [{\r\n                color: this._appointments._tryGetAppointmentColor(target),\r\n                data: appointmentData,\r\n                currentData: currentAppointmentData\r\n            }])\r\n        }\r\n    },\r\n    showAppointmentTooltipCore: function(target, data, options) {\r\n        if (this._appointmentTooltip.isAlreadyShown(target)) {\r\n            this.hideAppointmentTooltip()\r\n        } else {\r\n            this._appointmentTooltip.show(target, data, (0, _extend.extend)(this._getExtraAppointmentTooltipOptions(), options))\r\n        }\r\n    },\r\n    hideAppointmentTooltip: function() {\r\n        this._appointmentTooltip && this._appointmentTooltip.hide()\r\n    },\r\n    scrollToTime: function(hours, minutes, date) {\r\n        this._workSpace.scrollToTime(hours, minutes, date)\r\n    },\r\n    addAppointment: function(appointment) {\r\n        var _this11 = this;\r\n        var text = this.fire(\"getField\", \"text\", appointment);\r\n        if (!text) {\r\n            this.fire(\"setField\", \"text\", appointment, \"\")\r\n        }\r\n        this._convertDatesByTimezoneBack(true, appointment);\r\n        var addingOptions = {\r\n            appointmentData: appointment,\r\n            cancel: false\r\n        };\r\n        this._actions.onAppointmentAdding(addingOptions);\r\n        return this._processActionResult(addingOptions, function(canceled) {\r\n            if (canceled) {\r\n                return (new Deferred).resolve()\r\n            }\r\n            _this11._expandAllDayPanel(appointment);\r\n            return _this11._appointmentModel.add(appointment, {\r\n                value: _this11._getTimezoneOffsetByOption(),\r\n                clientOffset: _this11.fire(\"getClientTimezoneOffset\")\r\n            }).always(function(e) {\r\n                return _this11._executeActionWhenOperationIsCompleted(_this11._actions.onAppointmentAdded, appointment, e)\r\n            })\r\n        })\r\n    },\r\n    updateAppointment: function(target, appointment) {\r\n        return this._updateAppointment(target, appointment)\r\n    },\r\n    deleteAppointment: function(appointment) {\r\n        var deletingOptions = {\r\n            appointmentData: appointment,\r\n            cancel: false\r\n        };\r\n        this._actions.onAppointmentDeleting(deletingOptions);\r\n        this._processActionResult(deletingOptions, function(canceled) {\r\n            if (!canceled) {\r\n                this._appointmentModel.remove(appointment).always(function(e) {\r\n                    this._executeActionWhenOperationIsCompleted(this._actions.onAppointmentDeleted, appointment, e)\r\n                }.bind(this))\r\n            }\r\n        })\r\n    },\r\n    focus: function() {\r\n        if (this._editAppointmentData) {\r\n            this._appointments.focus()\r\n        } else {\r\n            this._workSpace.focus()\r\n        }\r\n    },\r\n    getFirstDayOfWeek: function() {\r\n        return _type2.default.isDefined(this.option(\"firstDayOfWeek\")) ? this.option(\"firstDayOfWeek\") : _date4.default.firstDayOfWeekIndex()\r\n    }\r\n}).include(_data_helper2.default);\r\n(0, _component_registrator2.default)(\"dxScheduler\", Scheduler);\r\nmodule.exports = Scheduler;\r\n"]},"metadata":{},"sourceType":"script"}