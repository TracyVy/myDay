{"ast":null,"code":"/**\r\n * DevExtreme (ui/html_editor/modules/resizing.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _renderer = require(\"../../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _click = require(\"../../../events/click\");\n\nvar _utils = require(\"../../../events/utils\");\n\nvar _translator = require(\"../../../animation/translator\");\n\nvar _devices = require(\"../../../core/devices\");\n\nvar _devices2 = _interopRequireDefault(_devices);\n\nvar _resizable = require(\"../../resizable\");\n\nvar _resizable2 = _interopRequireDefault(_resizable);\n\nvar _position = require(\"../../../core/utils/position\");\n\nvar _quill = require(\"quill\");\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nvar DX_RESIZE_FRAME_CLASS = \"dx-resize-frame\";\nvar DX_TOUCH_DEVICE_CLASS = \"dx-touch-device\";\nvar MODULE_NAMESPACE = \"dxHtmlResizingModule\";\nvar KEYDOWN_EVENT = (0, _utils.addNamespace)(\"keydown\", MODULE_NAMESPACE);\nvar SCROLL_EVENT = (0, _utils.addNamespace)(\"scroll\", MODULE_NAMESPACE);\nvar FRAME_PADDING = 1;\n\nvar ResizingModule = function () {\n  function ResizingModule(quill, options) {\n    _classCallCheck(this, ResizingModule);\n\n    this.quill = quill;\n    this.editorInstance = options.editorInstance;\n    this.allowedTargets = options.allowedTargets || [\"image\"];\n    this.enabled = !!options.enabled;\n\n    if (this.enabled) {\n      this._attachEvents();\n\n      this._createResizeFrame();\n    }\n  }\n\n  _createClass(ResizingModule, [{\n    key: \"_attachEvents\",\n    value: function () {\n      _events_engine2.default.on(this.quill.root, (0, _utils.addNamespace)(_click.name, MODULE_NAMESPACE), this._clickHandler.bind(this));\n\n      _events_engine2.default.on(this.quill.root, SCROLL_EVENT, this._scrollHandler.bind(this));\n    }\n  }, {\n    key: \"_detachEvents\",\n    value: function () {\n      _events_engine2.default.off(this.quill.root, MODULE_NAMESPACE);\n    }\n  }, {\n    key: \"_clickHandler\",\n    value: function (e) {\n      if (this._isAllowedTarget(e.target)) {\n        if (this._$target === e.target) {\n          return;\n        }\n\n        this._$target = e.target;\n        this.updateFramePosition();\n        this.showFrame();\n      } else {\n        if (this._$target) {\n          this.hideFrame();\n        }\n      }\n    }\n  }, {\n    key: \"_scrollHandler\",\n    value: function (e) {\n      if (this._$target) {\n        this.updateFramePosition();\n      }\n    }\n  }, {\n    key: \"_isAllowedTarget\",\n    value: function (targetElement) {\n      return this._isImage(targetElement);\n    }\n  }, {\n    key: \"_isImage\",\n    value: function (targetElement) {\n      return this.allowedTargets.indexOf(\"image\") !== -1 && \"IMG\" === targetElement.tagName.toUpperCase();\n    }\n  }, {\n    key: \"showFrame\",\n    value: function () {\n      this._$resizeFrame.show();\n\n      _events_engine2.default.on(this.quill.root, KEYDOWN_EVENT, this._handleFrameKeyDown.bind(this));\n    }\n  }, {\n    key: \"_handleFrameKeyDown\",\n    value: function (e) {\n      var keyName = (0, _utils.normalizeKeyName)(e);\n\n      if (\"del\" === keyName || \"backspace\" === keyName) {\n        this._deleteImage();\n      }\n\n      this.hideFrame();\n    }\n  }, {\n    key: \"hideFrame\",\n    value: function () {\n      this._$target = null;\n\n      this._$resizeFrame.hide();\n\n      _events_engine2.default.off(this.quill.root, KEYDOWN_EVENT);\n    }\n  }, {\n    key: \"updateFramePosition\",\n    value: function () {\n      var _getBoundingRect = (0, _position.getBoundingRect)(this._$target),\n          height = _getBoundingRect.height,\n          width = _getBoundingRect.width,\n          targetTop = _getBoundingRect.top,\n          targetLeft = _getBoundingRect.left;\n\n      var _getBoundingRect2 = (0, _position.getBoundingRect)(this.quill.root),\n          containerTop = _getBoundingRect2.top,\n          containerLeft = _getBoundingRect2.left;\n\n      var borderWidth = this._getBorderWidth();\n\n      this._$resizeFrame.css({\n        height: height,\n        width: width,\n        padding: FRAME_PADDING,\n        top: targetTop - containerTop - borderWidth - FRAME_PADDING,\n        left: targetLeft - containerLeft - borderWidth - FRAME_PADDING\n      });\n\n      (0, _translator.move)(this._$resizeFrame, {\n        left: 0,\n        top: 0\n      });\n    }\n  }, {\n    key: \"_getBorderWidth\",\n    value: function () {\n      return parseInt(this._$resizeFrame.css(\"borderTopWidth\"));\n    }\n  }, {\n    key: \"_createResizeFrame\",\n    value: function () {\n      var _this = this;\n\n      if (this._$resizeFrame) {\n        return;\n      }\n\n      var _devices$current = _devices2.default.current(),\n          deviceType = _devices$current.deviceType;\n\n      this._$resizeFrame = (0, _renderer2.default)(\"<div>\").addClass(DX_RESIZE_FRAME_CLASS).toggleClass(DX_TOUCH_DEVICE_CLASS, \"desktop\" !== deviceType).appendTo(this.editorInstance._getQuillContainer()).hide();\n\n      this.editorInstance._createComponent(this._$resizeFrame, _resizable2.default, {\n        onResize: function (e) {\n          if (!_this._$target) {\n            return;\n          }\n\n          var correction = 2 * (FRAME_PADDING + _this._getBorderWidth());\n\n          (0, _renderer2.default)(_this._$target).attr({\n            height: e.height - correction,\n            width: e.width - correction\n          });\n\n          _this.updateFramePosition();\n        }\n      });\n    }\n  }, {\n    key: \"_deleteImage\",\n    value: function () {\n      if (this._isAllowedTarget(this._$target)) {\n        _quill2.default.find(this._$target).deleteAt(0);\n      }\n    }\n  }, {\n    key: \"option\",\n    value: function (_option, value) {\n      var _this2 = this;\n\n      if (\"mediaResizing\" === _option) {\n        Object.keys(value).forEach(function (optionName) {\n          return _this2.option(optionName, value[optionName]);\n        });\n        return;\n      }\n\n      if (\"enabled\" === _option) {\n        this.enabled = value;\n        value ? this._attachEvents() : this._detachEvents();\n      } else {\n        if (\"allowedTargets\" === _option && Array.isArray(value)) {\n          this.allowedTargets = value;\n        }\n      }\n    }\n  }, {\n    key: \"clean\",\n    value: function () {\n      this._detachEvents();\n\n      this._$resizeFrame.remove();\n\n      this._$resizeFrame = void 0;\n    }\n  }]);\n\n  return ResizingModule;\n}();\n\nexports.default = ResizingModule;","map":{"version":3,"sources":["/Users/tracyvy/Desktop/UCB_Coding_Bootcamp/project_3/calendar/client/node_modules/devextreme/ui/html_editor/modules/resizing.js"],"names":["Object","defineProperty","exports","value","default","_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_click","_utils","_translator","_devices","_devices2","_resizable","_resizable2","_position","_quill","_quill2","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","DX_RESIZE_FRAME_CLASS","DX_TOUCH_DEVICE_CLASS","MODULE_NAMESPACE","KEYDOWN_EVENT","addNamespace","SCROLL_EVENT","FRAME_PADDING","ResizingModule","quill","options","editorInstance","allowedTargets","enabled","_attachEvents","_createResizeFrame","on","root","name","_clickHandler","bind","_scrollHandler","off","e","_isAllowedTarget","_$target","updateFramePosition","showFrame","hideFrame","targetElement","_isImage","indexOf","tagName","toUpperCase","_$resizeFrame","show","_handleFrameKeyDown","keyName","normalizeKeyName","_deleteImage","hide","_getBoundingRect","getBoundingRect","height","width","targetTop","top","targetLeft","left","_getBoundingRect2","containerTop","containerLeft","borderWidth","_getBorderWidth","css","padding","move","parseInt","_this","_devices$current","current","deviceType","addClass","toggleClass","appendTo","_getQuillContainer","_createComponent","onResize","correction","attr","find","deleteAt","_option","_this2","keys","forEach","optionName","option","_detachEvents","Array","isArray","remove"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/html_editor/modules/resizing.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nexports.default = void 0;\r\nvar _renderer = require(\"../../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _click = require(\"../../../events/click\");\r\nvar _utils = require(\"../../../events/utils\");\r\nvar _translator = require(\"../../../animation/translator\");\r\nvar _devices = require(\"../../../core/devices\");\r\nvar _devices2 = _interopRequireDefault(_devices);\r\nvar _resizable = require(\"../../resizable\");\r\nvar _resizable2 = _interopRequireDefault(_resizable);\r\nvar _position = require(\"../../../core/utils/position\");\r\nvar _quill = require(\"quill\");\r\nvar _quill2 = _interopRequireDefault(_quill);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\nvar DX_RESIZE_FRAME_CLASS = \"dx-resize-frame\";\r\nvar DX_TOUCH_DEVICE_CLASS = \"dx-touch-device\";\r\nvar MODULE_NAMESPACE = \"dxHtmlResizingModule\";\r\nvar KEYDOWN_EVENT = (0, _utils.addNamespace)(\"keydown\", MODULE_NAMESPACE);\r\nvar SCROLL_EVENT = (0, _utils.addNamespace)(\"scroll\", MODULE_NAMESPACE);\r\nvar FRAME_PADDING = 1;\r\nvar ResizingModule = function() {\r\n    function ResizingModule(quill, options) {\r\n        _classCallCheck(this, ResizingModule);\r\n        this.quill = quill;\r\n        this.editorInstance = options.editorInstance;\r\n        this.allowedTargets = options.allowedTargets || [\"image\"];\r\n        this.enabled = !!options.enabled;\r\n        if (this.enabled) {\r\n            this._attachEvents();\r\n            this._createResizeFrame()\r\n        }\r\n    }\r\n    _createClass(ResizingModule, [{\r\n        key: \"_attachEvents\",\r\n        value: function() {\r\n            _events_engine2.default.on(this.quill.root, (0, _utils.addNamespace)(_click.name, MODULE_NAMESPACE), this._clickHandler.bind(this));\r\n            _events_engine2.default.on(this.quill.root, SCROLL_EVENT, this._scrollHandler.bind(this))\r\n        }\r\n    }, {\r\n        key: \"_detachEvents\",\r\n        value: function() {\r\n            _events_engine2.default.off(this.quill.root, MODULE_NAMESPACE)\r\n        }\r\n    }, {\r\n        key: \"_clickHandler\",\r\n        value: function(e) {\r\n            if (this._isAllowedTarget(e.target)) {\r\n                if (this._$target === e.target) {\r\n                    return\r\n                }\r\n                this._$target = e.target;\r\n                this.updateFramePosition();\r\n                this.showFrame()\r\n            } else {\r\n                if (this._$target) {\r\n                    this.hideFrame()\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_scrollHandler\",\r\n        value: function(e) {\r\n            if (this._$target) {\r\n                this.updateFramePosition()\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_isAllowedTarget\",\r\n        value: function(targetElement) {\r\n            return this._isImage(targetElement)\r\n        }\r\n    }, {\r\n        key: \"_isImage\",\r\n        value: function(targetElement) {\r\n            return this.allowedTargets.indexOf(\"image\") !== -1 && \"IMG\" === targetElement.tagName.toUpperCase()\r\n        }\r\n    }, {\r\n        key: \"showFrame\",\r\n        value: function() {\r\n            this._$resizeFrame.show();\r\n            _events_engine2.default.on(this.quill.root, KEYDOWN_EVENT, this._handleFrameKeyDown.bind(this))\r\n        }\r\n    }, {\r\n        key: \"_handleFrameKeyDown\",\r\n        value: function(e) {\r\n            var keyName = (0, _utils.normalizeKeyName)(e);\r\n            if (\"del\" === keyName || \"backspace\" === keyName) {\r\n                this._deleteImage()\r\n            }\r\n            this.hideFrame()\r\n        }\r\n    }, {\r\n        key: \"hideFrame\",\r\n        value: function() {\r\n            this._$target = null;\r\n            this._$resizeFrame.hide();\r\n            _events_engine2.default.off(this.quill.root, KEYDOWN_EVENT)\r\n        }\r\n    }, {\r\n        key: \"updateFramePosition\",\r\n        value: function() {\r\n            var _getBoundingRect = (0, _position.getBoundingRect)(this._$target),\r\n                height = _getBoundingRect.height,\r\n                width = _getBoundingRect.width,\r\n                targetTop = _getBoundingRect.top,\r\n                targetLeft = _getBoundingRect.left;\r\n            var _getBoundingRect2 = (0, _position.getBoundingRect)(this.quill.root),\r\n                containerTop = _getBoundingRect2.top,\r\n                containerLeft = _getBoundingRect2.left;\r\n            var borderWidth = this._getBorderWidth();\r\n            this._$resizeFrame.css({\r\n                height: height,\r\n                width: width,\r\n                padding: FRAME_PADDING,\r\n                top: targetTop - containerTop - borderWidth - FRAME_PADDING,\r\n                left: targetLeft - containerLeft - borderWidth - FRAME_PADDING\r\n            });\r\n            (0, _translator.move)(this._$resizeFrame, {\r\n                left: 0,\r\n                top: 0\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_getBorderWidth\",\r\n        value: function() {\r\n            return parseInt(this._$resizeFrame.css(\"borderTopWidth\"))\r\n        }\r\n    }, {\r\n        key: \"_createResizeFrame\",\r\n        value: function() {\r\n            var _this = this;\r\n            if (this._$resizeFrame) {\r\n                return\r\n            }\r\n            var _devices$current = _devices2.default.current(),\r\n                deviceType = _devices$current.deviceType;\r\n            this._$resizeFrame = (0, _renderer2.default)(\"<div>\").addClass(DX_RESIZE_FRAME_CLASS).toggleClass(DX_TOUCH_DEVICE_CLASS, \"desktop\" !== deviceType).appendTo(this.editorInstance._getQuillContainer()).hide();\r\n            this.editorInstance._createComponent(this._$resizeFrame, _resizable2.default, {\r\n                onResize: function(e) {\r\n                    if (!_this._$target) {\r\n                        return\r\n                    }\r\n                    var correction = 2 * (FRAME_PADDING + _this._getBorderWidth());\r\n                    (0, _renderer2.default)(_this._$target).attr({\r\n                        height: e.height - correction,\r\n                        width: e.width - correction\r\n                    });\r\n                    _this.updateFramePosition()\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_deleteImage\",\r\n        value: function() {\r\n            if (this._isAllowedTarget(this._$target)) {\r\n                _quill2.default.find(this._$target).deleteAt(0)\r\n            }\r\n        }\r\n    }, {\r\n        key: \"option\",\r\n        value: function(_option, value) {\r\n            var _this2 = this;\r\n            if (\"mediaResizing\" === _option) {\r\n                Object.keys(value).forEach(function(optionName) {\r\n                    return _this2.option(optionName, value[optionName])\r\n                });\r\n                return\r\n            }\r\n            if (\"enabled\" === _option) {\r\n                this.enabled = value;\r\n                value ? this._attachEvents() : this._detachEvents()\r\n            } else {\r\n                if (\"allowedTargets\" === _option && Array.isArray(value)) {\r\n                    this.allowedTargets = value\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"clean\",\r\n        value: function() {\r\n            this._detachEvents();\r\n            this._$resizeFrame.remove();\r\n            this._$resizeFrame = void 0\r\n        }\r\n    }]);\r\n    return ResizingModule\r\n}();\r\nexports.default = ResizingModule;\r\n"]},"metadata":{},"sourceType":"script"}