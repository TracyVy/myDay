{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.navigator.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _ui = require(\"../widget/ui.errors\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _date = require(\"../../core/utils/date\");\n\nvar _date2 = _interopRequireDefault(_date);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _devices = require(\"../../core/devices\");\n\nvar _devices2 = _interopRequireDefault(_devices);\n\nvar _ui3 = require(\"../widget/ui.widget\");\n\nvar _ui4 = _interopRequireDefault(_ui3);\n\nvar _button = require(\"../button\");\n\nvar _button2 = _interopRequireDefault(_button);\n\nvar _calendar = require(\"../calendar\");\n\nvar _calendar2 = _interopRequireDefault(_calendar);\n\nvar _popover = require(\"../popover\");\n\nvar _popover2 = _interopRequireDefault(_popover);\n\nvar _popup = require(\"../popup\");\n\nvar _popup2 = _interopRequireDefault(_popup);\n\nvar _uiScheduler = require(\"./ui.scheduler.publisher_mixin\");\n\nvar _uiScheduler2 = _interopRequireDefault(_uiScheduler);\n\nvar _date3 = require(\"../../localization/date\");\n\nvar _date4 = _interopRequireDefault(_date3);\n\nvar _ui5 = require(\"../scroll_view/ui.scrollable\");\n\nvar _ui6 = _interopRequireDefault(_ui5);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar ELEMENT_CLASS = \"dx-scheduler-navigator\";\nvar CALENDAR_CLASS = \"dx-scheduler-navigator-calendar\";\nvar NEXT_BUTTON_CLASS = \"dx-scheduler-navigator-next\";\nvar CAPTION_BUTTON_CLASS = \"dx-scheduler-navigator-caption\";\nvar PREVIOUS_BUTTON_CLASS = \"dx-scheduler-navigator-previous\";\nvar CALENDAR_POPOVER_CLASS = \"dx-scheduler-navigator-calendar-popover\";\nvar MONDAY_INDEX = 1;\n\nvar getDefaultFirstDayOfWeekIndex = function (shift) {\n  return shift ? MONDAY_INDEX : _date4.default.firstDayOfWeekIndex();\n};\n\nvar getDateMonthFormat = function (short) {\n  return function (date) {\n    var monthName = _date4.default.getMonthNames(short ? \"abbreviated\" : \"wide\")[date.getMonth()];\n\n    return [_date4.default.format(date, \"day\"), monthName].join(\" \");\n  };\n};\n\nvar getMonthYearFormat = function (date) {\n  return _date4.default.getMonthNames(\"abbreviated\")[date.getMonth()] + \" \" + _date4.default.format(date, \"year\");\n};\n\nvar getCaptionFormat = function getCaptionFormat(short, intervalCount, duration) {\n  var dateMonthFormat = getDateMonthFormat(short);\n  return function (date) {\n    if (intervalCount > 1) {\n      var lastIntervalDate = new Date(date);\n      var defaultViewDuration = duration;\n      lastIntervalDate.setDate(date.getDate() + defaultViewDuration - 1);\n      var isDifferentMonthDates = date.getMonth() !== lastIntervalDate.getMonth();\n      var useShortFormat = isDifferentMonthDates || short;\n\n      var firstWeekDateText = _date4.default.format(date, isDifferentMonthDates ? getDateMonthFormat(useShortFormat) : \"d\");\n\n      var lastWeekDateText = _date4.default.format(lastIntervalDate, getCaptionFormat(useShortFormat));\n\n      return firstWeekDateText + \"-\" + lastWeekDateText;\n    }\n\n    return [dateMonthFormat(date), _date4.default.format(date, \"year\")].join(\" \");\n  };\n};\n\nvar getWeekCaption = function (date, shift, rejectWeekend) {\n  var firstDayOfWeek = this.option(\"firstDayOfWeek\");\n  var firstDayOfWeekIndex = (0, _type.isDefined)(firstDayOfWeek) ? firstDayOfWeek : getDefaultFirstDayOfWeekIndex(shift);\n\n  if (0 === firstDayOfWeekIndex && rejectWeekend) {\n    firstDayOfWeekIndex = MONDAY_INDEX;\n  }\n\n  var firstWeekDate = _date2.default.getFirstWeekDate(date, firstDayOfWeekIndex);\n\n  var weekendDuration = 2;\n\n  if (rejectWeekend) {\n    firstWeekDate = _date2.default.normalizeDateByWeek(firstWeekDate, date);\n  }\n\n  if (firstDayOfWeek >= 6 && rejectWeekend) {\n    firstWeekDate.setDate(firstWeekDate.getDate() + (7 - firstDayOfWeek + 1));\n  }\n\n  var lastWeekDate = new Date(firstWeekDate);\n  var intervalCount = this.option(\"intervalCount\");\n  shift = shift || 6;\n  lastWeekDate = new Date(lastWeekDate.setDate(lastWeekDate.getDate() + (intervalCount > 1 ? 7 * (intervalCount - 1) + shift : shift)));\n\n  if (lastWeekDate.getDay() % 6 === 0 && rejectWeekend) {\n    lastWeekDate.setDate(lastWeekDate.getDate() + weekendDuration);\n  }\n\n  return {\n    text: formatCaptionByMonths.call(this, lastWeekDate, firstWeekDate),\n    startDate: firstWeekDate,\n    endDate: lastWeekDate\n  };\n};\n\nvar formatCaptionByMonths = function (lastDate, firstDate) {\n  var isDifferentMonthDates = firstDate.getMonth() !== lastDate.getMonth();\n  var isDifferentYears = firstDate.getFullYear() !== lastDate.getFullYear();\n  var useShortFormat = isDifferentMonthDates || this.option(\"_useShortDateFormat\");\n  var lastDateText;\n  var firstDateText;\n\n  if (isDifferentYears) {\n    firstDateText = _date4.default.format(firstDate, getCaptionFormat(true));\n    lastDateText = _date4.default.format(lastDate, getCaptionFormat(true));\n  } else {\n    firstDateText = _date4.default.format(firstDate, isDifferentMonthDates ? getDateMonthFormat(useShortFormat) : \"d\");\n    lastDateText = _date4.default.format(lastDate, getCaptionFormat(useShortFormat));\n  }\n\n  return firstDateText + \"-\" + lastDateText;\n};\n\nvar getMonthCaption = function (date) {\n  var firstDate = new Date(_date2.default.getFirstMonthDate(date));\n  var lastDate = new Date(_date2.default.getLastMonthDate(firstDate));\n  var text;\n\n  if (this.option(\"intervalCount\") > 1) {\n    lastDate = new Date(firstDate);\n    lastDate.setMonth(firstDate.getMonth() + this.option(\"intervalCount\") - 1);\n    lastDate = new Date(_date2.default.getLastMonthDate(lastDate));\n    var isSameYear = firstDate.getYear() === lastDate.getYear();\n    var lastDateText = getMonthYearFormat(lastDate);\n    var firstDateText = isSameYear ? _date4.default.getMonthNames(\"abbreviated\")[firstDate.getMonth()] : getMonthYearFormat(firstDate);\n    text = firstDateText + \"-\" + lastDateText;\n  } else {\n    text = _date4.default.format(date, \"monthandyear\");\n  }\n\n  return {\n    text: text,\n    startDate: firstDate,\n    endDate: lastDate\n  };\n};\n\nvar dateGetter = function (date, offset) {\n  return new Date(date[this.setter](date[this.getter]() + offset));\n};\n\nvar getConfig = function (step) {\n  var agendaDuration;\n\n  switch (step) {\n    case \"day\":\n      return {\n        duration: 1 * this.option(\"intervalCount\"),\n        setter: \"setDate\",\n        getter: \"getDate\",\n        getDate: dateGetter,\n        getCaption: function (date) {\n          var format = getCaptionFormat(false, this.option(\"intervalCount\"), this._getConfig().duration);\n          return {\n            text: _date4.default.format(date, format),\n            startDate: date,\n            endDate: date\n          };\n        }\n      };\n\n    case \"week\":\n      return {\n        duration: 7 * this.option(\"intervalCount\"),\n        setter: \"setDate\",\n        getter: \"getDate\",\n        getDate: dateGetter,\n        getCaption: getWeekCaption\n      };\n\n    case \"workWeek\":\n      return {\n        duration: 7 * this.option(\"intervalCount\"),\n        setter: \"setDate\",\n        getter: \"getDate\",\n        getDate: dateGetter,\n        getCaption: function (date) {\n          return getWeekCaption.call(this, date, 4, true);\n        }\n      };\n\n    case \"month\":\n      return {\n        duration: 1 * this.option(\"intervalCount\"),\n        setter: \"setMonth\",\n        getter: \"getMonth\",\n        getDate: function (date, offset) {\n          var currentDate = date.getDate();\n          date.setDate(1);\n          date = dateGetter.call(this, date, offset);\n\n          var lastDate = _date2.default.getLastMonthDay(date);\n\n          date.setDate(currentDate < lastDate ? currentDate : lastDate);\n          return date;\n        },\n        getCaption: getMonthCaption\n      };\n\n    case \"agenda\":\n      agendaDuration = this.invoke(\"getAgendaDuration\");\n      agendaDuration = (0, _type.isNumeric)(agendaDuration) && agendaDuration > 0 ? agendaDuration : 7;\n      return {\n        duration: agendaDuration,\n        setter: \"setDate\",\n        getter: \"getDate\",\n        getDate: dateGetter,\n        getCaption: function (date) {\n          var format = getCaptionFormat(this.option(\"_useShortDateFormat\"));\n          var firstDate = new Date(date);\n          var lastDate = new Date(date);\n          var text;\n\n          if (agendaDuration > 1) {\n            lastDate.setDate(lastDate.getDate() + agendaDuration - 1);\n            text = formatCaptionByMonths.call(this, lastDate, date);\n          } else {\n            text = _date4.default.format(date, format);\n          }\n\n          return {\n            text: text,\n            startDate: firstDate,\n            endDate: lastDate\n          };\n        }\n      };\n  }\n};\n\nvar SchedulerNavigator = _ui4.default.inherit({\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      date: new Date(),\n      displayedDate: void 0,\n      step: \"day\",\n      intervalCount: 1,\n      min: void 0,\n      max: void 0,\n      firstDayOfWeek: void 0,\n      _useShortDateFormat: false\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return !_devices2.default.real().generic || _devices2.default.isSimulator();\n      },\n      options: {\n        _useShortDateFormat: true\n      }\n    }]);\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"step\":\n      case \"date\":\n      case \"intervalCount\":\n      case \"displayedDate\":\n        this._updateButtonsState();\n\n        this._renderCaption();\n\n        this._setCalendarOption(\"value\", this.option(\"date\"));\n\n        break;\n\n      case \"min\":\n      case \"max\":\n        this._updateButtonsState();\n\n        this._setCalendarOption(args.name, args.value);\n\n        break;\n\n      case \"firstDayOfWeek\":\n        this._setCalendarOption(args.name, args.value);\n\n        break;\n\n      case \"customizeDateNavigatorText\":\n        this._renderCaption();\n\n        break;\n\n      case \"tabIndex\":\n      case \"focusStateEnabled\":\n        this._next.option(args.name, args.value);\n\n        this._caption.option(args.name, args.value);\n\n        this._prev.option(args.name, args.value);\n\n        this._setCalendarOption(args.name, args.value);\n\n        this.callBase(args);\n        break;\n\n      case \"_useShortDateFormat\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _init: function () {\n    this.callBase();\n    this.$element().addClass(ELEMENT_CLASS);\n\n    this._initButtons();\n  },\n  _initButtons: function () {\n    var $next = (0, _renderer2.default)(\"<div>\").addClass(NEXT_BUTTON_CLASS);\n    this._next = this._createComponent($next, _button2.default, {\n      icon: \"chevronnext\",\n      onClick: this._updateCurrentDate.bind(this, 1),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      tabIndex: this.option(\"tabIndex\"),\n      integrationOptions: {}\n    });\n    var $caption = (0, _renderer2.default)(\"<div>\").addClass(CAPTION_BUTTON_CLASS);\n    this._caption = this._createComponent($caption, _button2.default, {\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      tabIndex: this.option(\"tabIndex\"),\n      integrationOptions: {}\n    });\n    var $prev = (0, _renderer2.default)(\"<div>\").addClass(PREVIOUS_BUTTON_CLASS);\n    this._prev = this._createComponent($prev, _button2.default, {\n      icon: \"chevronprev\",\n      onClick: this._updateCurrentDate.bind(this, -1),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      tabIndex: this.option(\"tabIndex\"),\n      integrationOptions: {}\n    });\n    this.setAria(\"label\", \"Next period\", $next);\n    this.setAria(\"label\", \"Previous period\", $prev);\n\n    this._updateButtonsState();\n\n    this.$element().append($prev, $caption, $next);\n  },\n  _updateButtonsState: function () {\n    var min = this.option(\"min\");\n    var max = this.option(\"max\");\n\n    var caption = this._getConfig().getCaption.call(this, this.option(\"displayedDate\") || this.option(\"date\"));\n\n    min = min ? _date2.default.trimTime(min) : min;\n    max = max ? _date2.default.trimTime(max) : max;\n    max && max.setHours(23, 59, 59);\n\n    this._prev.option(\"disabled\", min && !isNaN(min.getTime()) && this._getNextDate(-1, caption.endDate) < min);\n\n    this._next.option(\"disabled\", max && !isNaN(max.getTime()) && this._getNextDate(1, caption.startDate) > max);\n  },\n  _updateCurrentDate: function (direction) {\n    var date = this._getNextDate(direction);\n\n    _date2.default.normalizeDate(date, this.option(\"min\"), this.option(\"max\"));\n\n    this.notifyObserver(\"currentDateUpdated\", date);\n  },\n  _getNextDate: function (direction) {\n    var initialDate = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;\n\n    var stepConfig = this._getConfig();\n\n    var offset = stepConfig.duration * direction;\n    var date = stepConfig.getDate(new Date(initialDate || this.option(\"date\")), offset);\n    return date;\n  },\n  _renderFocusTarget: _common.noop,\n  _initMarkup: function () {\n    this.callBase();\n\n    this._renderCaption();\n  },\n  _render: function () {\n    this.callBase();\n\n    this._renderPopover();\n\n    this._renderCaptionKeys();\n  },\n  _isMobileLayout: function () {\n    return !_devices2.default.current().generic;\n  },\n  _renderPopover: function () {\n    var _this = this;\n\n    var overlayType = this._isMobileLayout() ? _popup2.default : _popover2.default;\n    var popoverContainer = (0, _renderer2.default)(\"<div>\").addClass(CALENDAR_POPOVER_CLASS);\n    this._popover = this._createComponent(popoverContainer, overlayType, {\n      contentTemplate: function () {\n        return _this._createPopupContent();\n      },\n      defaultOptionsRules: [{\n        device: function () {\n          return !_devices2.default.current().generic;\n        },\n        options: {\n          fullScreen: true,\n          showCloseButton: false,\n          toolbarItems: [{\n            shortcut: \"cancel\"\n          }]\n        }\n      }, {\n        device: function () {\n          return _devices2.default.current().generic;\n        },\n        options: {\n          target: this._caption.$element()\n        }\n      }]\n    });\n\n    this._popover.$element().appendTo(this.$element());\n  },\n  _createScrollable: function (content) {\n    var result = this._createComponent((0, _renderer2.default)(\"<div>\"), _ui6.default, {\n      direction: \"vertical\"\n    });\n\n    result.$content().append(content);\n    return result;\n  },\n  _createPopupContent: function () {\n    var result = (0, _renderer2.default)(\"<div>\").addClass(CALENDAR_CLASS);\n    this._calendar = this._createComponent(result, _calendar2.default, this._calendarOptions());\n\n    if (this._isMobileLayout()) {\n      var scrollable = this._createScrollable(result);\n\n      return scrollable.$element();\n    }\n\n    return result;\n  },\n  _calendarOptions: function () {\n    return {\n      min: this.option(\"min\"),\n      max: this.option(\"max\"),\n      firstDayOfWeek: this.option(\"firstDayOfWeek\"),\n      value: this.option(\"date\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      onValueChanged: function (e) {\n        if (!this.option(\"visible\")) {\n          return;\n        }\n\n        this.notifyObserver(\"currentDateUpdated\", e.value);\n\n        this._popover.hide();\n      }.bind(this),\n      hasFocus: function () {\n        return true;\n      },\n      tabIndex: null\n    };\n  },\n  _renderCaption: function () {\n    var _this2 = this;\n\n    var date = this.option(\"displayedDate\") || this.option(\"date\");\n\n    var captionConfig = this._getConfig().getCaption.call(this, date);\n\n    var customizationFunction = this.option(\"customizeDateNavigatorText\");\n    var caption = _type2.default.isFunction(customizationFunction) ? customizationFunction(captionConfig) : captionConfig.text;\n\n    this._caption.option({\n      text: caption,\n      onKeyboardHandled: function (opts) {\n        _this2.option(\"focusStateEnabled\") && !_this2.option(\"disabled\") && _this2._calendar._keyboardHandler(opts);\n      },\n      onClick: function () {\n        return _this2._popover.toggle();\n      }\n    });\n  },\n  _renderCaptionKeys: function () {\n    if (!this.option(\"focusStateEnabled\") || this.option(\"disabled\")) {\n      return;\n    }\n\n    var that = this;\n\n    var executeHandler = function () {\n      if (that._popover.$content().is(\":hidden\")) {\n        that._popover.show();\n      } else {\n        return true;\n      }\n    };\n\n    var tabHandler = function () {\n      that._popover.hide();\n    };\n\n    this._caption.registerKeyHandler(\"enter\", executeHandler);\n\n    this._caption.registerKeyHandler(\"space\", executeHandler);\n\n    this._caption.registerKeyHandler(\"tab\", tabHandler);\n  },\n  _setCalendarOption: function (name, value) {\n    if (this._calendar) {\n      this._calendar.option(name, value);\n    }\n  },\n  _getConfig: function () {\n    var step = this.option(\"step\");\n    var config = getConfig.call(this, step);\n\n    if (!config) {\n      throw _ui2.default.Error(\"E1033\", step);\n    }\n\n    return config;\n  }\n}).include(_uiScheduler2.default);\n\n(0, _component_registrator2.default)(\"dxSchedulerNavigator\", SchedulerNavigator);\nmodule.exports = SchedulerNavigator;","map":{"version":3,"sources":["/Users/tracyvy/Desktop/UCB_Coding_Bootcamp/project_3/calendar/client/node_modules/devextreme/ui/scheduler/ui.scheduler.navigator.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_common","_type","_type2","_ui","_ui2","_date","_date2","_extend","_component_registrator","_component_registrator2","_devices","_devices2","_ui3","_ui4","_button","_button2","_calendar","_calendar2","_popover","_popover2","_popup","_popup2","_uiScheduler","_uiScheduler2","_date3","_date4","_ui5","_ui6","obj","__esModule","ELEMENT_CLASS","CALENDAR_CLASS","NEXT_BUTTON_CLASS","CAPTION_BUTTON_CLASS","PREVIOUS_BUTTON_CLASS","CALENDAR_POPOVER_CLASS","MONDAY_INDEX","getDefaultFirstDayOfWeekIndex","shift","default","firstDayOfWeekIndex","getDateMonthFormat","short","date","monthName","getMonthNames","getMonth","format","join","getMonthYearFormat","getCaptionFormat","intervalCount","duration","dateMonthFormat","lastIntervalDate","Date","defaultViewDuration","setDate","getDate","isDifferentMonthDates","useShortFormat","firstWeekDateText","lastWeekDateText","getWeekCaption","rejectWeekend","firstDayOfWeek","option","isDefined","firstWeekDate","getFirstWeekDate","weekendDuration","normalizeDateByWeek","lastWeekDate","getDay","text","formatCaptionByMonths","call","startDate","endDate","lastDate","firstDate","isDifferentYears","getFullYear","lastDateText","firstDateText","getMonthCaption","getFirstMonthDate","getLastMonthDate","setMonth","isSameYear","getYear","dateGetter","offset","setter","getter","getConfig","step","agendaDuration","getCaption","_getConfig","currentDate","getLastMonthDay","invoke","isNumeric","SchedulerNavigator","inherit","_getDefaultOptions","extend","callBase","displayedDate","min","max","_useShortDateFormat","_defaultOptionsRules","concat","device","real","generic","isSimulator","options","_optionChanged","args","name","_updateButtonsState","_renderCaption","_setCalendarOption","value","_next","_caption","_prev","_init","$element","addClass","_initButtons","$next","_createComponent","icon","onClick","_updateCurrentDate","bind","focusStateEnabled","tabIndex","integrationOptions","$caption","$prev","setAria","append","caption","trimTime","setHours","isNaN","getTime","_getNextDate","direction","normalizeDate","notifyObserver","initialDate","arguments","length","stepConfig","_renderFocusTarget","noop","_initMarkup","_render","_renderPopover","_renderCaptionKeys","_isMobileLayout","current","_this","overlayType","popoverContainer","contentTemplate","_createPopupContent","defaultOptionsRules","fullScreen","showCloseButton","toolbarItems","shortcut","target","appendTo","_createScrollable","content","result","$content","_calendarOptions","scrollable","onValueChanged","e","hide","hasFocus","_this2","captionConfig","customizationFunction","isFunction","onKeyboardHandled","opts","_keyboardHandler","toggle","that","executeHandler","is","show","tabHandler","registerKeyHandler","config","Error","include","module","exports"],"mappings":"AAAA;;;;;;;;AAQA;;AACA,IAAIA,SAAS,GAAGC,OAAO,CAAC,qBAAD,CAAvB;;AACA,IAAIC,UAAU,GAAGC,sBAAsB,CAACH,SAAD,CAAvC;;AACA,IAAII,OAAO,GAAGH,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAII,KAAK,GAAGJ,OAAO,CAAC,uBAAD,CAAnB;;AACA,IAAIK,MAAM,GAAGH,sBAAsB,CAACE,KAAD,CAAnC;;AACA,IAAIE,GAAG,GAAGN,OAAO,CAAC,qBAAD,CAAjB;;AACA,IAAIO,IAAI,GAAGL,sBAAsB,CAACI,GAAD,CAAjC;;AACA,IAAIE,KAAK,GAAGR,OAAO,CAAC,uBAAD,CAAnB;;AACA,IAAIS,MAAM,GAAGP,sBAAsB,CAACM,KAAD,CAAnC;;AACA,IAAIE,OAAO,GAAGV,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIW,sBAAsB,GAAGX,OAAO,CAAC,kCAAD,CAApC;;AACA,IAAIY,uBAAuB,GAAGV,sBAAsB,CAACS,sBAAD,CAApD;;AACA,IAAIE,QAAQ,GAAGb,OAAO,CAAC,oBAAD,CAAtB;;AACA,IAAIc,SAAS,GAAGZ,sBAAsB,CAACW,QAAD,CAAtC;;AACA,IAAIE,IAAI,GAAGf,OAAO,CAAC,qBAAD,CAAlB;;AACA,IAAIgB,IAAI,GAAGd,sBAAsB,CAACa,IAAD,CAAjC;;AACA,IAAIE,OAAO,GAAGjB,OAAO,CAAC,WAAD,CAArB;;AACA,IAAIkB,QAAQ,GAAGhB,sBAAsB,CAACe,OAAD,CAArC;;AACA,IAAIE,SAAS,GAAGnB,OAAO,CAAC,aAAD,CAAvB;;AACA,IAAIoB,UAAU,GAAGlB,sBAAsB,CAACiB,SAAD,CAAvC;;AACA,IAAIE,QAAQ,GAAGrB,OAAO,CAAC,YAAD,CAAtB;;AACA,IAAIsB,SAAS,GAAGpB,sBAAsB,CAACmB,QAAD,CAAtC;;AACA,IAAIE,MAAM,GAAGvB,OAAO,CAAC,UAAD,CAApB;;AACA,IAAIwB,OAAO,GAAGtB,sBAAsB,CAACqB,MAAD,CAApC;;AACA,IAAIE,YAAY,GAAGzB,OAAO,CAAC,gCAAD,CAA1B;;AACA,IAAI0B,aAAa,GAAGxB,sBAAsB,CAACuB,YAAD,CAA1C;;AACA,IAAIE,MAAM,GAAG3B,OAAO,CAAC,yBAAD,CAApB;;AACA,IAAI4B,MAAM,GAAG1B,sBAAsB,CAACyB,MAAD,CAAnC;;AACA,IAAIE,IAAI,GAAG7B,OAAO,CAAC,8BAAD,CAAlB;;AACA,IAAI8B,IAAI,GAAG5B,sBAAsB,CAAC2B,IAAD,CAAjC;;AAEA,SAAS3B,sBAAT,CAAgC6B,GAAhC,EAAqC;AACjC,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AACjC,eAAWA;AADsB,GAArC;AAGH;;AACD,IAAIE,aAAa,GAAG,wBAApB;AACA,IAAIC,cAAc,GAAG,iCAArB;AACA,IAAIC,iBAAiB,GAAG,6BAAxB;AACA,IAAIC,oBAAoB,GAAG,gCAA3B;AACA,IAAIC,qBAAqB,GAAG,iCAA5B;AACA,IAAIC,sBAAsB,GAAG,yCAA7B;AACA,IAAIC,YAAY,GAAG,CAAnB;;AACA,IAAIC,6BAA6B,GAAG,UAASC,KAAT,EAAgB;AAChD,SAAOA,KAAK,GAAGF,YAAH,GAAkBX,MAAM,CAACc,OAAP,CAAeC,mBAAf,EAA9B;AACH,CAFD;;AAGA,IAAIC,kBAAkB,GAAG,UAASC,KAAT,EAAgB;AACrC,SAAO,UAASC,IAAT,EAAe;AAClB,QAAIC,SAAS,GAAGnB,MAAM,CAACc,OAAP,CAAeM,aAAf,CAA6BH,KAAK,GAAG,aAAH,GAAmB,MAArD,EAA6DC,IAAI,CAACG,QAAL,EAA7D,CAAhB;;AACA,WAAO,CAACrB,MAAM,CAACc,OAAP,CAAeQ,MAAf,CAAsBJ,IAAtB,EAA4B,KAA5B,CAAD,EAAqCC,SAArC,EAAgDI,IAAhD,CAAqD,GAArD,CAAP;AACH,GAHD;AAIH,CALD;;AAMA,IAAIC,kBAAkB,GAAG,UAASN,IAAT,EAAe;AACpC,SAAOlB,MAAM,CAACc,OAAP,CAAeM,aAAf,CAA6B,aAA7B,EAA4CF,IAAI,CAACG,QAAL,EAA5C,IAA+D,GAA/D,GAAqErB,MAAM,CAACc,OAAP,CAAeQ,MAAf,CAAsBJ,IAAtB,EAA4B,MAA5B,CAA5E;AACH,CAFD;;AAGA,IAAIO,gBAAgB,GAAG,SAASA,gBAAT,CAA0BR,KAA1B,EAAiCS,aAAjC,EAAgDC,QAAhD,EAA0D;AAC7E,MAAIC,eAAe,GAAGZ,kBAAkB,CAACC,KAAD,CAAxC;AACA,SAAO,UAASC,IAAT,EAAe;AAClB,QAAIQ,aAAa,GAAG,CAApB,EAAuB;AACnB,UAAIG,gBAAgB,GAAG,IAAIC,IAAJ,CAASZ,IAAT,CAAvB;AACA,UAAIa,mBAAmB,GAAGJ,QAA1B;AACAE,MAAAA,gBAAgB,CAACG,OAAjB,CAAyBd,IAAI,CAACe,OAAL,KAAiBF,mBAAjB,GAAuC,CAAhE;AACA,UAAIG,qBAAqB,GAAGhB,IAAI,CAACG,QAAL,OAAoBQ,gBAAgB,CAACR,QAAjB,EAAhD;AACA,UAAIc,cAAc,GAAGD,qBAAqB,IAAIjB,KAA9C;;AACA,UAAImB,iBAAiB,GAAGpC,MAAM,CAACc,OAAP,CAAeQ,MAAf,CAAsBJ,IAAtB,EAA4BgB,qBAAqB,GAAGlB,kBAAkB,CAACmB,cAAD,CAArB,GAAwC,GAAzF,CAAxB;;AACA,UAAIE,gBAAgB,GAAGrC,MAAM,CAACc,OAAP,CAAeQ,MAAf,CAAsBO,gBAAtB,EAAwCJ,gBAAgB,CAACU,cAAD,CAAxD,CAAvB;;AACA,aAAOC,iBAAiB,GAAG,GAApB,GAA0BC,gBAAjC;AACH;;AACD,WAAO,CAACT,eAAe,CAACV,IAAD,CAAhB,EAAwBlB,MAAM,CAACc,OAAP,CAAeQ,MAAf,CAAsBJ,IAAtB,EAA4B,MAA5B,CAAxB,EAA6DK,IAA7D,CAAkE,GAAlE,CAAP;AACH,GAZD;AAaH,CAfD;;AAgBA,IAAIe,cAAc,GAAG,UAASpB,IAAT,EAAeL,KAAf,EAAsB0B,aAAtB,EAAqC;AACtD,MAAIC,cAAc,GAAG,KAAKC,MAAL,CAAY,gBAAZ,CAArB;AACA,MAAI1B,mBAAmB,GAAG,CAAC,GAAGvC,KAAK,CAACkE,SAAV,EAAqBF,cAArB,IAAuCA,cAAvC,GAAwD5B,6BAA6B,CAACC,KAAD,CAA/G;;AACA,MAAI,MAAME,mBAAN,IAA6BwB,aAAjC,EAAgD;AAC5CxB,IAAAA,mBAAmB,GAAGJ,YAAtB;AACH;;AACD,MAAIgC,aAAa,GAAG9D,MAAM,CAACiC,OAAP,CAAe8B,gBAAf,CAAgC1B,IAAhC,EAAsCH,mBAAtC,CAApB;;AACA,MAAI8B,eAAe,GAAG,CAAtB;;AACA,MAAIN,aAAJ,EAAmB;AACfI,IAAAA,aAAa,GAAG9D,MAAM,CAACiC,OAAP,CAAegC,mBAAf,CAAmCH,aAAnC,EAAkDzB,IAAlD,CAAhB;AACH;;AACD,MAAIsB,cAAc,IAAI,CAAlB,IAAuBD,aAA3B,EAA0C;AACtCI,IAAAA,aAAa,CAACX,OAAd,CAAsBW,aAAa,CAACV,OAAd,MAA2B,IAAIO,cAAJ,GAAqB,CAAhD,CAAtB;AACH;;AACD,MAAIO,YAAY,GAAG,IAAIjB,IAAJ,CAASa,aAAT,CAAnB;AACA,MAAIjB,aAAa,GAAG,KAAKe,MAAL,CAAY,eAAZ,CAApB;AACA5B,EAAAA,KAAK,GAAGA,KAAK,IAAI,CAAjB;AACAkC,EAAAA,YAAY,GAAG,IAAIjB,IAAJ,CAASiB,YAAY,CAACf,OAAb,CAAqBe,YAAY,CAACd,OAAb,MAA0BP,aAAa,GAAG,CAAhB,GAAoB,KAAKA,aAAa,GAAG,CAArB,IAA0Bb,KAA9C,GAAsDA,KAAhF,CAArB,CAAT,CAAf;;AACA,MAAIkC,YAAY,CAACC,MAAb,KAAwB,CAAxB,KAA8B,CAA9B,IAAmCT,aAAvC,EAAsD;AAClDQ,IAAAA,YAAY,CAACf,OAAb,CAAqBe,YAAY,CAACd,OAAb,KAAyBY,eAA9C;AACH;;AACD,SAAO;AACHI,IAAAA,IAAI,EAAEC,qBAAqB,CAACC,IAAtB,CAA2B,IAA3B,EAAiCJ,YAAjC,EAA+CJ,aAA/C,CADH;AAEHS,IAAAA,SAAS,EAAET,aAFR;AAGHU,IAAAA,OAAO,EAAEN;AAHN,GAAP;AAKH,CA1BD;;AA2BA,IAAIG,qBAAqB,GAAG,UAASI,QAAT,EAAmBC,SAAnB,EAA8B;AACtD,MAAIrB,qBAAqB,GAAGqB,SAAS,CAAClC,QAAV,OAAyBiC,QAAQ,CAACjC,QAAT,EAArD;AACA,MAAImC,gBAAgB,GAAGD,SAAS,CAACE,WAAV,OAA4BH,QAAQ,CAACG,WAAT,EAAnD;AACA,MAAItB,cAAc,GAAGD,qBAAqB,IAAI,KAAKO,MAAL,CAAY,qBAAZ,CAA9C;AACA,MAAIiB,YAAJ;AACA,MAAIC,aAAJ;;AACA,MAAIH,gBAAJ,EAAsB;AAClBG,IAAAA,aAAa,GAAG3D,MAAM,CAACc,OAAP,CAAeQ,MAAf,CAAsBiC,SAAtB,EAAiC9B,gBAAgB,CAAC,IAAD,CAAjD,CAAhB;AACAiC,IAAAA,YAAY,GAAG1D,MAAM,CAACc,OAAP,CAAeQ,MAAf,CAAsBgC,QAAtB,EAAgC7B,gBAAgB,CAAC,IAAD,CAAhD,CAAf;AACH,GAHD,MAGO;AACHkC,IAAAA,aAAa,GAAG3D,MAAM,CAACc,OAAP,CAAeQ,MAAf,CAAsBiC,SAAtB,EAAiCrB,qBAAqB,GAAGlB,kBAAkB,CAACmB,cAAD,CAArB,GAAwC,GAA9F,CAAhB;AACAuB,IAAAA,YAAY,GAAG1D,MAAM,CAACc,OAAP,CAAeQ,MAAf,CAAsBgC,QAAtB,EAAgC7B,gBAAgB,CAACU,cAAD,CAAhD,CAAf;AACH;;AACD,SAAOwB,aAAa,GAAG,GAAhB,GAAsBD,YAA7B;AACH,CAdD;;AAeA,IAAIE,eAAe,GAAG,UAAS1C,IAAT,EAAe;AACjC,MAAIqC,SAAS,GAAG,IAAIzB,IAAJ,CAASjD,MAAM,CAACiC,OAAP,CAAe+C,iBAAf,CAAiC3C,IAAjC,CAAT,CAAhB;AACA,MAAIoC,QAAQ,GAAG,IAAIxB,IAAJ,CAASjD,MAAM,CAACiC,OAAP,CAAegD,gBAAf,CAAgCP,SAAhC,CAAT,CAAf;AACA,MAAIN,IAAJ;;AACA,MAAI,KAAKR,MAAL,CAAY,eAAZ,IAA+B,CAAnC,EAAsC;AAClCa,IAAAA,QAAQ,GAAG,IAAIxB,IAAJ,CAASyB,SAAT,CAAX;AACAD,IAAAA,QAAQ,CAACS,QAAT,CAAkBR,SAAS,CAAClC,QAAV,KAAuB,KAAKoB,MAAL,CAAY,eAAZ,CAAvB,GAAsD,CAAxE;AACAa,IAAAA,QAAQ,GAAG,IAAIxB,IAAJ,CAASjD,MAAM,CAACiC,OAAP,CAAegD,gBAAf,CAAgCR,QAAhC,CAAT,CAAX;AACA,QAAIU,UAAU,GAAGT,SAAS,CAACU,OAAV,OAAwBX,QAAQ,CAACW,OAAT,EAAzC;AACA,QAAIP,YAAY,GAAGlC,kBAAkB,CAAC8B,QAAD,CAArC;AACA,QAAIK,aAAa,GAAGK,UAAU,GAAGhE,MAAM,CAACc,OAAP,CAAeM,aAAf,CAA6B,aAA7B,EAA4CmC,SAAS,CAAClC,QAAV,EAA5C,CAAH,GAAuEG,kBAAkB,CAAC+B,SAAD,CAAvH;AACAN,IAAAA,IAAI,GAAGU,aAAa,GAAG,GAAhB,GAAsBD,YAA7B;AACH,GARD,MAQO;AACHT,IAAAA,IAAI,GAAGjD,MAAM,CAACc,OAAP,CAAeQ,MAAf,CAAsBJ,IAAtB,EAA4B,cAA5B,CAAP;AACH;;AACD,SAAO;AACH+B,IAAAA,IAAI,EAAEA,IADH;AAEHG,IAAAA,SAAS,EAAEG,SAFR;AAGHF,IAAAA,OAAO,EAAEC;AAHN,GAAP;AAKH,CApBD;;AAqBA,IAAIY,UAAU,GAAG,UAAShD,IAAT,EAAeiD,MAAf,EAAuB;AACpC,SAAO,IAAIrC,IAAJ,CAASZ,IAAI,CAAC,KAAKkD,MAAN,CAAJ,CAAkBlD,IAAI,CAAC,KAAKmD,MAAN,CAAJ,KAAsBF,MAAxC,CAAT,CAAP;AACH,CAFD;;AAGA,IAAIG,SAAS,GAAG,UAASC,IAAT,EAAe;AAC3B,MAAIC,cAAJ;;AACA,UAAQD,IAAR;AACI,SAAK,KAAL;AACI,aAAO;AACH5C,QAAAA,QAAQ,EAAE,IAAI,KAAKc,MAAL,CAAY,eAAZ,CADX;AACyC2B,QAAAA,MAAM,EAAE,SADjD;AAC4DC,QAAAA,MAAM,EAAE,SADpE;AAC+EpC,QAAAA,OAAO,EAAEiC,UADxF;AACoGO,QAAAA,UAAU,EAAE,UAASvD,IAAT,EAAe;AAC9H,cAAII,MAAM,GAAGG,gBAAgB,CAAC,KAAD,EAAQ,KAAKgB,MAAL,CAAY,eAAZ,CAAR,EAAsC,KAAKiC,UAAL,GAAkB/C,QAAxD,CAA7B;AACA,iBAAO;AACHsB,YAAAA,IAAI,EAAEjD,MAAM,CAACc,OAAP,CAAeQ,MAAf,CAAsBJ,IAAtB,EAA4BI,MAA5B,CADH;AAEH8B,YAAAA,SAAS,EAAElC,IAFR;AAGHmC,YAAAA,OAAO,EAAEnC;AAHN,WAAP;AAKH;AARE,OAAP;;AAUJ,SAAK,MAAL;AACI,aAAO;AACHS,QAAAA,QAAQ,EAAE,IAAI,KAAKc,MAAL,CAAY,eAAZ,CADX;AACyC2B,QAAAA,MAAM,EAAE,SADjD;AAC4DC,QAAAA,MAAM,EAAE,SADpE;AAC+EpC,QAAAA,OAAO,EAAEiC,UADxF;AACoGO,QAAAA,UAAU,EAAEnC;AADhH,OAAP;;AAGJ,SAAK,UAAL;AACI,aAAO;AACHX,QAAAA,QAAQ,EAAE,IAAI,KAAKc,MAAL,CAAY,eAAZ,CADX;AACyC2B,QAAAA,MAAM,EAAE,SADjD;AAC4DC,QAAAA,MAAM,EAAE,SADpE;AAC+EpC,QAAAA,OAAO,EAAEiC,UADxF;AACoGO,QAAAA,UAAU,EAAE,UAASvD,IAAT,EAAe;AAC9H,iBAAOoB,cAAc,CAACa,IAAf,CAAoB,IAApB,EAA0BjC,IAA1B,EAAgC,CAAhC,EAAmC,IAAnC,CAAP;AACH;AAHE,OAAP;;AAKJ,SAAK,OAAL;AACI,aAAO;AACHS,QAAAA,QAAQ,EAAE,IAAI,KAAKc,MAAL,CAAY,eAAZ,CADX;AACyC2B,QAAAA,MAAM,EAAE,UADjD;AAC6DC,QAAAA,MAAM,EAAE,UADrE;AACiFpC,QAAAA,OAAO,EAAE,UAASf,IAAT,EAAeiD,MAAf,EAAuB;AAChH,cAAIQ,WAAW,GAAGzD,IAAI,CAACe,OAAL,EAAlB;AACAf,UAAAA,IAAI,CAACc,OAAL,CAAa,CAAb;AACAd,UAAAA,IAAI,GAAGgD,UAAU,CAACf,IAAX,CAAgB,IAAhB,EAAsBjC,IAAtB,EAA4BiD,MAA5B,CAAP;;AACA,cAAIb,QAAQ,GAAGzE,MAAM,CAACiC,OAAP,CAAe8D,eAAf,CAA+B1D,IAA/B,CAAf;;AACAA,UAAAA,IAAI,CAACc,OAAL,CAAa2C,WAAW,GAAGrB,QAAd,GAAyBqB,WAAzB,GAAuCrB,QAApD;AACA,iBAAOpC,IAAP;AACH,SARE;AAQAuD,QAAAA,UAAU,EAAEb;AARZ,OAAP;;AAUJ,SAAK,QAAL;AACIY,MAAAA,cAAc,GAAG,KAAKK,MAAL,CAAY,mBAAZ,CAAjB;AACAL,MAAAA,cAAc,GAAG,CAAC,GAAGhG,KAAK,CAACsG,SAAV,EAAqBN,cAArB,KAAwCA,cAAc,GAAG,CAAzD,GAA6DA,cAA7D,GAA8E,CAA/F;AACA,aAAO;AACH7C,QAAAA,QAAQ,EAAE6C,cADP;AACuBJ,QAAAA,MAAM,EAAE,SAD/B;AAC0CC,QAAAA,MAAM,EAAE,SADlD;AAC6DpC,QAAAA,OAAO,EAAEiC,UADtE;AACkFO,QAAAA,UAAU,EAAE,UAASvD,IAAT,EAAe;AAC5G,cAAII,MAAM,GAAGG,gBAAgB,CAAC,KAAKgB,MAAL,CAAY,qBAAZ,CAAD,CAA7B;AACA,cAAIc,SAAS,GAAG,IAAIzB,IAAJ,CAASZ,IAAT,CAAhB;AACA,cAAIoC,QAAQ,GAAG,IAAIxB,IAAJ,CAASZ,IAAT,CAAf;AACA,cAAI+B,IAAJ;;AACA,cAAIuB,cAAc,GAAG,CAArB,EAAwB;AACpBlB,YAAAA,QAAQ,CAACtB,OAAT,CAAiBsB,QAAQ,CAACrB,OAAT,KAAqBuC,cAArB,GAAsC,CAAvD;AACAvB,YAAAA,IAAI,GAAGC,qBAAqB,CAACC,IAAtB,CAA2B,IAA3B,EAAiCG,QAAjC,EAA2CpC,IAA3C,CAAP;AACH,WAHD,MAGO;AACH+B,YAAAA,IAAI,GAAGjD,MAAM,CAACc,OAAP,CAAeQ,MAAf,CAAsBJ,IAAtB,EAA4BI,MAA5B,CAAP;AACH;;AACD,iBAAO;AACH2B,YAAAA,IAAI,EAAEA,IADH;AAEHG,YAAAA,SAAS,EAAEG,SAFR;AAGHF,YAAAA,OAAO,EAAEC;AAHN,WAAP;AAKH;AAjBE,OAAP;AApCR;AAwDH,CA1DD;;AA2DA,IAAIyB,kBAAkB,GAAG3F,IAAI,CAAC0B,OAAL,CAAakE,OAAb,CAAqB;AAC1CC,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,WAAO,CAAC,GAAGnG,OAAO,CAACoG,MAAZ,EAAoB,KAAKC,QAAL,EAApB,EAAqC;AACxCjE,MAAAA,IAAI,EAAE,IAAIY,IAAJ,EADkC;AAExCsD,MAAAA,aAAa,EAAE,KAAK,CAFoB;AAGxCb,MAAAA,IAAI,EAAE,KAHkC;AAIxC7C,MAAAA,aAAa,EAAE,CAJyB;AAKxC2D,MAAAA,GAAG,EAAE,KAAK,CAL8B;AAMxCC,MAAAA,GAAG,EAAE,KAAK,CAN8B;AAOxC9C,MAAAA,cAAc,EAAE,KAAK,CAPmB;AAQxC+C,MAAAA,mBAAmB,EAAE;AARmB,KAArC,CAAP;AAUH,GAZyC;AAa1CC,EAAAA,oBAAoB,EAAE,YAAW;AAC7B,WAAO,KAAKL,QAAL,GAAgBM,MAAhB,CAAuB,CAAC;AAC3BC,MAAAA,MAAM,EAAE,YAAW;AACf,eAAO,CAACxG,SAAS,CAAC4B,OAAV,CAAkB6E,IAAlB,GAAyBC,OAA1B,IAAqC1G,SAAS,CAAC4B,OAAV,CAAkB+E,WAAlB,EAA5C;AACH,OAH0B;AAI3BC,MAAAA,OAAO,EAAE;AACLP,QAAAA,mBAAmB,EAAE;AADhB;AAJkB,KAAD,CAAvB,CAAP;AAQH,GAtByC;AAuB1CQ,EAAAA,cAAc,EAAE,UAASC,IAAT,EAAe;AAC3B,YAAQA,IAAI,CAACC,IAAb;AACI,WAAK,MAAL;AACA,WAAK,MAAL;AACA,WAAK,eAAL;AACA,WAAK,eAAL;AACI,aAAKC,mBAAL;;AACA,aAAKC,cAAL;;AACA,aAAKC,kBAAL,CAAwB,OAAxB,EAAiC,KAAK3D,MAAL,CAAY,MAAZ,CAAjC;;AACA;;AACJ,WAAK,KAAL;AACA,WAAK,KAAL;AACI,aAAKyD,mBAAL;;AACA,aAAKE,kBAAL,CAAwBJ,IAAI,CAACC,IAA7B,EAAmCD,IAAI,CAACK,KAAxC;;AACA;;AACJ,WAAK,gBAAL;AACI,aAAKD,kBAAL,CAAwBJ,IAAI,CAACC,IAA7B,EAAmCD,IAAI,CAACK,KAAxC;;AACA;;AACJ,WAAK,4BAAL;AACI,aAAKF,cAAL;;AACA;;AACJ,WAAK,UAAL;AACA,WAAK,mBAAL;AACI,aAAKG,KAAL,CAAW7D,MAAX,CAAkBuD,IAAI,CAACC,IAAvB,EAA6BD,IAAI,CAACK,KAAlC;;AACA,aAAKE,QAAL,CAAc9D,MAAd,CAAqBuD,IAAI,CAACC,IAA1B,EAAgCD,IAAI,CAACK,KAArC;;AACA,aAAKG,KAAL,CAAW/D,MAAX,CAAkBuD,IAAI,CAACC,IAAvB,EAA6BD,IAAI,CAACK,KAAlC;;AACA,aAAKD,kBAAL,CAAwBJ,IAAI,CAACC,IAA7B,EAAmCD,IAAI,CAACK,KAAxC;;AACA,aAAKlB,QAAL,CAAca,IAAd;AACA;;AACJ,WAAK,qBAAL;AACI;;AACJ;AACI,aAAKb,QAAL,CAAca,IAAd;AA/BR;AAiCH,GAzDyC;AA0D1CS,EAAAA,KAAK,EAAE,YAAW;AACd,SAAKtB,QAAL;AACA,SAAKuB,QAAL,GAAgBC,QAAhB,CAAyBtG,aAAzB;;AACA,SAAKuG,YAAL;AACH,GA9DyC;AA+D1CA,EAAAA,YAAY,EAAE,YAAW;AACrB,QAAIC,KAAK,GAAG,CAAC,GAAGxI,UAAU,CAACyC,OAAf,EAAwB,OAAxB,EAAiC6F,QAAjC,CAA0CpG,iBAA1C,CAAZ;AACA,SAAK+F,KAAL,GAAa,KAAKQ,gBAAL,CAAsBD,KAAtB,EAA6BvH,QAAQ,CAACwB,OAAtC,EAA+C;AACxDiG,MAAAA,IAAI,EAAE,aADkD;AAExDC,MAAAA,OAAO,EAAE,KAAKC,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,EAAmC,CAAnC,CAF+C;AAGxDC,MAAAA,iBAAiB,EAAE,KAAK1E,MAAL,CAAY,mBAAZ,CAHqC;AAIxD2E,MAAAA,QAAQ,EAAE,KAAK3E,MAAL,CAAY,UAAZ,CAJ8C;AAKxD4E,MAAAA,kBAAkB,EAAE;AALoC,KAA/C,CAAb;AAOA,QAAIC,QAAQ,GAAG,CAAC,GAAGjJ,UAAU,CAACyC,OAAf,EAAwB,OAAxB,EAAiC6F,QAAjC,CAA0CnG,oBAA1C,CAAf;AACA,SAAK+F,QAAL,GAAgB,KAAKO,gBAAL,CAAsBQ,QAAtB,EAAgChI,QAAQ,CAACwB,OAAzC,EAAkD;AAC9DqG,MAAAA,iBAAiB,EAAE,KAAK1E,MAAL,CAAY,mBAAZ,CAD2C;AAE9D2E,MAAAA,QAAQ,EAAE,KAAK3E,MAAL,CAAY,UAAZ,CAFoD;AAG9D4E,MAAAA,kBAAkB,EAAE;AAH0C,KAAlD,CAAhB;AAKA,QAAIE,KAAK,GAAG,CAAC,GAAGlJ,UAAU,CAACyC,OAAf,EAAwB,OAAxB,EAAiC6F,QAAjC,CAA0ClG,qBAA1C,CAAZ;AACA,SAAK+F,KAAL,GAAa,KAAKM,gBAAL,CAAsBS,KAAtB,EAA6BjI,QAAQ,CAACwB,OAAtC,EAA+C;AACxDiG,MAAAA,IAAI,EAAE,aADkD;AAExDC,MAAAA,OAAO,EAAE,KAAKC,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,EAAmC,CAAC,CAApC,CAF+C;AAGxDC,MAAAA,iBAAiB,EAAE,KAAK1E,MAAL,CAAY,mBAAZ,CAHqC;AAIxD2E,MAAAA,QAAQ,EAAE,KAAK3E,MAAL,CAAY,UAAZ,CAJ8C;AAKxD4E,MAAAA,kBAAkB,EAAE;AALoC,KAA/C,CAAb;AAOA,SAAKG,OAAL,CAAa,OAAb,EAAsB,aAAtB,EAAqCX,KAArC;AACA,SAAKW,OAAL,CAAa,OAAb,EAAsB,iBAAtB,EAAyCD,KAAzC;;AACA,SAAKrB,mBAAL;;AACA,SAAKQ,QAAL,GAAgBe,MAAhB,CAAuBF,KAAvB,EAA8BD,QAA9B,EAAwCT,KAAxC;AACH,GA1FyC;AA2F1CX,EAAAA,mBAAmB,EAAE,YAAW;AAC5B,QAAIb,GAAG,GAAG,KAAK5C,MAAL,CAAY,KAAZ,CAAV;AACA,QAAI6C,GAAG,GAAG,KAAK7C,MAAL,CAAY,KAAZ,CAAV;;AACA,QAAIiF,OAAO,GAAG,KAAKhD,UAAL,GAAkBD,UAAlB,CAA6BtB,IAA7B,CAAkC,IAAlC,EAAwC,KAAKV,MAAL,CAAY,eAAZ,KAAgC,KAAKA,MAAL,CAAY,MAAZ,CAAxE,CAAd;;AACA4C,IAAAA,GAAG,GAAGA,GAAG,GAAGxG,MAAM,CAACiC,OAAP,CAAe6G,QAAf,CAAwBtC,GAAxB,CAAH,GAAkCA,GAA3C;AACAC,IAAAA,GAAG,GAAGA,GAAG,GAAGzG,MAAM,CAACiC,OAAP,CAAe6G,QAAf,CAAwBrC,GAAxB,CAAH,GAAkCA,GAA3C;AACAA,IAAAA,GAAG,IAAIA,GAAG,CAACsC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,CAAP;;AACA,SAAKpB,KAAL,CAAW/D,MAAX,CAAkB,UAAlB,EAA8B4C,GAAG,IAAI,CAACwC,KAAK,CAACxC,GAAG,CAACyC,OAAJ,EAAD,CAAb,IAAgC,KAAKC,YAAL,CAAkB,CAAC,CAAnB,EAAsBL,OAAO,CAACrE,OAA9B,IAAyCgC,GAAvG;;AACA,SAAKiB,KAAL,CAAW7D,MAAX,CAAkB,UAAlB,EAA8B6C,GAAG,IAAI,CAACuC,KAAK,CAACvC,GAAG,CAACwC,OAAJ,EAAD,CAAb,IAAgC,KAAKC,YAAL,CAAkB,CAAlB,EAAqBL,OAAO,CAACtE,SAA7B,IAA0CkC,GAAxG;AACH,GApGyC;AAqG1C2B,EAAAA,kBAAkB,EAAE,UAASe,SAAT,EAAoB;AACpC,QAAI9G,IAAI,GAAG,KAAK6G,YAAL,CAAkBC,SAAlB,CAAX;;AACAnJ,IAAAA,MAAM,CAACiC,OAAP,CAAemH,aAAf,CAA6B/G,IAA7B,EAAmC,KAAKuB,MAAL,CAAY,KAAZ,CAAnC,EAAuD,KAAKA,MAAL,CAAY,KAAZ,CAAvD;;AACA,SAAKyF,cAAL,CAAoB,oBAApB,EAA0ChH,IAA1C;AACH,GAzGyC;AA0G1C6G,EAAAA,YAAY,EAAE,UAASC,SAAT,EAAoB;AAC9B,QAAIG,WAAW,GAAGC,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwB,KAAK,CAAL,KAAWD,SAAS,CAAC,CAAD,CAA5C,GAAkDA,SAAS,CAAC,CAAD,CAA3D,GAAiE,IAAnF;;AACA,QAAIE,UAAU,GAAG,KAAK5D,UAAL,EAAjB;;AACA,QAAIP,MAAM,GAAGmE,UAAU,CAAC3G,QAAX,GAAsBqG,SAAnC;AACA,QAAI9G,IAAI,GAAGoH,UAAU,CAACrG,OAAX,CAAmB,IAAIH,IAAJ,CAASqG,WAAW,IAAI,KAAK1F,MAAL,CAAY,MAAZ,CAAxB,CAAnB,EAAiE0B,MAAjE,CAAX;AACA,WAAOjD,IAAP;AACH,GAhHyC;AAiH1CqH,EAAAA,kBAAkB,EAAEhK,OAAO,CAACiK,IAjHc;AAkH1CC,EAAAA,WAAW,EAAE,YAAW;AACpB,SAAKtD,QAAL;;AACA,SAAKgB,cAAL;AACH,GArHyC;AAsH1CuC,EAAAA,OAAO,EAAE,YAAW;AAChB,SAAKvD,QAAL;;AACA,SAAKwD,cAAL;;AACA,SAAKC,kBAAL;AACH,GA1HyC;AA2H1CC,EAAAA,eAAe,EAAE,YAAW;AACxB,WAAO,CAAC3J,SAAS,CAAC4B,OAAV,CAAkBgI,OAAlB,GAA4BlD,OAApC;AACH,GA7HyC;AA8H1C+C,EAAAA,cAAc,EAAE,YAAW;AACvB,QAAII,KAAK,GAAG,IAAZ;;AACA,QAAIC,WAAW,GAAG,KAAKH,eAAL,KAAyBjJ,OAAO,CAACkB,OAAjC,GAA2CpB,SAAS,CAACoB,OAAvE;AACA,QAAImI,gBAAgB,GAAG,CAAC,GAAG5K,UAAU,CAACyC,OAAf,EAAwB,OAAxB,EAAiC6F,QAAjC,CAA0CjG,sBAA1C,CAAvB;AACA,SAAKjB,QAAL,GAAgB,KAAKqH,gBAAL,CAAsBmC,gBAAtB,EAAwCD,WAAxC,EAAqD;AACjEE,MAAAA,eAAe,EAAE,YAAW;AACxB,eAAOH,KAAK,CAACI,mBAAN,EAAP;AACH,OAHgE;AAIjEC,MAAAA,mBAAmB,EAAE,CAAC;AAClB1D,QAAAA,MAAM,EAAE,YAAW;AACf,iBAAO,CAACxG,SAAS,CAAC4B,OAAV,CAAkBgI,OAAlB,GAA4BlD,OAApC;AACH,SAHiB;AAIlBE,QAAAA,OAAO,EAAE;AACLuD,UAAAA,UAAU,EAAE,IADP;AAELC,UAAAA,eAAe,EAAE,KAFZ;AAGLC,UAAAA,YAAY,EAAE,CAAC;AACXC,YAAAA,QAAQ,EAAE;AADC,WAAD;AAHT;AAJS,OAAD,EAWlB;AACC9D,QAAAA,MAAM,EAAE,YAAW;AACf,iBAAOxG,SAAS,CAAC4B,OAAV,CAAkBgI,OAAlB,GAA4BlD,OAAnC;AACH,SAHF;AAICE,QAAAA,OAAO,EAAE;AACL2D,UAAAA,MAAM,EAAE,KAAKlD,QAAL,CAAcG,QAAd;AADH;AAJV,OAXkB;AAJ4C,KAArD,CAAhB;;AAwBA,SAAKjH,QAAL,CAAciH,QAAd,GAAyBgD,QAAzB,CAAkC,KAAKhD,QAAL,EAAlC;AACH,GA3JyC;AA4J1CiD,EAAAA,iBAAiB,EAAE,UAASC,OAAT,EAAkB;AACjC,QAAIC,MAAM,GAAG,KAAK/C,gBAAL,CAAsB,CAAC,GAAGzI,UAAU,CAACyC,OAAf,EAAwB,OAAxB,CAAtB,EAAwDZ,IAAI,CAACY,OAA7D,EAAsE;AAC/EkH,MAAAA,SAAS,EAAE;AADoE,KAAtE,CAAb;;AAGA6B,IAAAA,MAAM,CAACC,QAAP,GAAkBrC,MAAlB,CAAyBmC,OAAzB;AACA,WAAOC,MAAP;AACH,GAlKyC;AAmK1CV,EAAAA,mBAAmB,EAAE,YAAW;AAC5B,QAAIU,MAAM,GAAG,CAAC,GAAGxL,UAAU,CAACyC,OAAf,EAAwB,OAAxB,EAAiC6F,QAAjC,CAA0CrG,cAA1C,CAAb;AACA,SAAKf,SAAL,GAAiB,KAAKuH,gBAAL,CAAsB+C,MAAtB,EAA8BrK,UAAU,CAACsB,OAAzC,EAAkD,KAAKiJ,gBAAL,EAAlD,CAAjB;;AACA,QAAI,KAAKlB,eAAL,EAAJ,EAA4B;AACxB,UAAImB,UAAU,GAAG,KAAKL,iBAAL,CAAuBE,MAAvB,CAAjB;;AACA,aAAOG,UAAU,CAACtD,QAAX,EAAP;AACH;;AACD,WAAOmD,MAAP;AACH,GA3KyC;AA4K1CE,EAAAA,gBAAgB,EAAE,YAAW;AACzB,WAAO;AACH1E,MAAAA,GAAG,EAAE,KAAK5C,MAAL,CAAY,KAAZ,CADF;AAEH6C,MAAAA,GAAG,EAAE,KAAK7C,MAAL,CAAY,KAAZ,CAFF;AAGHD,MAAAA,cAAc,EAAE,KAAKC,MAAL,CAAY,gBAAZ,CAHb;AAIH4D,MAAAA,KAAK,EAAE,KAAK5D,MAAL,CAAY,MAAZ,CAJJ;AAKH0E,MAAAA,iBAAiB,EAAE,KAAK1E,MAAL,CAAY,mBAAZ,CALhB;AAMHwH,MAAAA,cAAc,EAAE,UAASC,CAAT,EAAY;AACxB,YAAI,CAAC,KAAKzH,MAAL,CAAY,SAAZ,CAAL,EAA6B;AACzB;AACH;;AACD,aAAKyF,cAAL,CAAoB,oBAApB,EAA0CgC,CAAC,CAAC7D,KAA5C;;AACA,aAAK5G,QAAL,CAAc0K,IAAd;AACH,OANe,CAMdjD,IANc,CAMT,IANS,CANb;AAaHkD,MAAAA,QAAQ,EAAE,YAAW;AACjB,eAAO,IAAP;AACH,OAfE;AAgBHhD,MAAAA,QAAQ,EAAE;AAhBP,KAAP;AAkBH,GA/LyC;AAgM1CjB,EAAAA,cAAc,EAAE,YAAW;AACvB,QAAIkE,MAAM,GAAG,IAAb;;AACA,QAAInJ,IAAI,GAAG,KAAKuB,MAAL,CAAY,eAAZ,KAAgC,KAAKA,MAAL,CAAY,MAAZ,CAA3C;;AACA,QAAI6H,aAAa,GAAG,KAAK5F,UAAL,GAAkBD,UAAlB,CAA6BtB,IAA7B,CAAkC,IAAlC,EAAwCjC,IAAxC,CAApB;;AACA,QAAIqJ,qBAAqB,GAAG,KAAK9H,MAAL,CAAY,4BAAZ,CAA5B;AACA,QAAIiF,OAAO,GAAGjJ,MAAM,CAACqC,OAAP,CAAe0J,UAAf,CAA0BD,qBAA1B,IAAmDA,qBAAqB,CAACD,aAAD,CAAxE,GAA0FA,aAAa,CAACrH,IAAtH;;AACA,SAAKsD,QAAL,CAAc9D,MAAd,CAAqB;AACjBQ,MAAAA,IAAI,EAAEyE,OADW;AAEjB+C,MAAAA,iBAAiB,EAAE,UAASC,IAAT,EAAe;AAC9BL,QAAAA,MAAM,CAAC5H,MAAP,CAAc,mBAAd,KAAsC,CAAC4H,MAAM,CAAC5H,MAAP,CAAc,UAAd,CAAvC,IAAoE4H,MAAM,CAAC9K,SAAP,CAAiBoL,gBAAjB,CAAkCD,IAAlC,CAApE;AACH,OAJgB;AAKjB1D,MAAAA,OAAO,EAAE,YAAW;AAChB,eAAOqD,MAAM,CAAC5K,QAAP,CAAgBmL,MAAhB,EAAP;AACH;AAPgB,KAArB;AASH,GA/MyC;AAgN1ChC,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,QAAI,CAAC,KAAKnG,MAAL,CAAY,mBAAZ,CAAD,IAAqC,KAAKA,MAAL,CAAY,UAAZ,CAAzC,EAAkE;AAC9D;AACH;;AACD,QAAIoI,IAAI,GAAG,IAAX;;AACA,QAAIC,cAAc,GAAG,YAAW;AAC5B,UAAID,IAAI,CAACpL,QAAL,CAAcqK,QAAd,GAAyBiB,EAAzB,CAA4B,SAA5B,CAAJ,EAA4C;AACxCF,QAAAA,IAAI,CAACpL,QAAL,CAAcuL,IAAd;AACH,OAFD,MAEO;AACH,eAAO,IAAP;AACH;AACJ,KAND;;AAOA,QAAIC,UAAU,GAAG,YAAW;AACxBJ,MAAAA,IAAI,CAACpL,QAAL,CAAc0K,IAAd;AACH,KAFD;;AAGA,SAAK5D,QAAL,CAAc2E,kBAAd,CAAiC,OAAjC,EAA0CJ,cAA1C;;AACA,SAAKvE,QAAL,CAAc2E,kBAAd,CAAiC,OAAjC,EAA0CJ,cAA1C;;AACA,SAAKvE,QAAL,CAAc2E,kBAAd,CAAiC,KAAjC,EAAwCD,UAAxC;AACH,GAlOyC;AAmO1C7E,EAAAA,kBAAkB,EAAE,UAASH,IAAT,EAAeI,KAAf,EAAsB;AACtC,QAAI,KAAK9G,SAAT,EAAoB;AAChB,WAAKA,SAAL,CAAekD,MAAf,CAAsBwD,IAAtB,EAA4BI,KAA5B;AACH;AACJ,GAvOyC;AAwO1C3B,EAAAA,UAAU,EAAE,YAAW;AACnB,QAAIH,IAAI,GAAG,KAAK9B,MAAL,CAAY,MAAZ,CAAX;AACA,QAAI0I,MAAM,GAAG7G,SAAS,CAACnB,IAAV,CAAe,IAAf,EAAqBoB,IAArB,CAAb;;AACA,QAAI,CAAC4G,MAAL,EAAa;AACT,YAAMxM,IAAI,CAACmC,OAAL,CAAasK,KAAb,CAAmB,OAAnB,EAA4B7G,IAA5B,CAAN;AACH;;AACD,WAAO4G,MAAP;AACH;AA/OyC,CAArB,EAgPtBE,OAhPsB,CAgPdvL,aAAa,CAACgB,OAhPA,CAAzB;;AAiPA,CAAC,GAAG9B,uBAAuB,CAAC8B,OAA5B,EAAqC,sBAArC,EAA6DiE,kBAA7D;AACAuG,MAAM,CAACC,OAAP,GAAiBxG,kBAAjB","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.navigator.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _type2 = _interopRequireDefault(_type);\r\nvar _ui = require(\"../widget/ui.errors\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _date = require(\"../../core/utils/date\");\r\nvar _date2 = _interopRequireDefault(_date);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _devices = require(\"../../core/devices\");\r\nvar _devices2 = _interopRequireDefault(_devices);\r\nvar _ui3 = require(\"../widget/ui.widget\");\r\nvar _ui4 = _interopRequireDefault(_ui3);\r\nvar _button = require(\"../button\");\r\nvar _button2 = _interopRequireDefault(_button);\r\nvar _calendar = require(\"../calendar\");\r\nvar _calendar2 = _interopRequireDefault(_calendar);\r\nvar _popover = require(\"../popover\");\r\nvar _popover2 = _interopRequireDefault(_popover);\r\nvar _popup = require(\"../popup\");\r\nvar _popup2 = _interopRequireDefault(_popup);\r\nvar _uiScheduler = require(\"./ui.scheduler.publisher_mixin\");\r\nvar _uiScheduler2 = _interopRequireDefault(_uiScheduler);\r\nvar _date3 = require(\"../../localization/date\");\r\nvar _date4 = _interopRequireDefault(_date3);\r\nvar _ui5 = require(\"../scroll_view/ui.scrollable\");\r\nvar _ui6 = _interopRequireDefault(_ui5);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar ELEMENT_CLASS = \"dx-scheduler-navigator\";\r\nvar CALENDAR_CLASS = \"dx-scheduler-navigator-calendar\";\r\nvar NEXT_BUTTON_CLASS = \"dx-scheduler-navigator-next\";\r\nvar CAPTION_BUTTON_CLASS = \"dx-scheduler-navigator-caption\";\r\nvar PREVIOUS_BUTTON_CLASS = \"dx-scheduler-navigator-previous\";\r\nvar CALENDAR_POPOVER_CLASS = \"dx-scheduler-navigator-calendar-popover\";\r\nvar MONDAY_INDEX = 1;\r\nvar getDefaultFirstDayOfWeekIndex = function(shift) {\r\n    return shift ? MONDAY_INDEX : _date4.default.firstDayOfWeekIndex()\r\n};\r\nvar getDateMonthFormat = function(short) {\r\n    return function(date) {\r\n        var monthName = _date4.default.getMonthNames(short ? \"abbreviated\" : \"wide\")[date.getMonth()];\r\n        return [_date4.default.format(date, \"day\"), monthName].join(\" \")\r\n    }\r\n};\r\nvar getMonthYearFormat = function(date) {\r\n    return _date4.default.getMonthNames(\"abbreviated\")[date.getMonth()] + \" \" + _date4.default.format(date, \"year\")\r\n};\r\nvar getCaptionFormat = function getCaptionFormat(short, intervalCount, duration) {\r\n    var dateMonthFormat = getDateMonthFormat(short);\r\n    return function(date) {\r\n        if (intervalCount > 1) {\r\n            var lastIntervalDate = new Date(date);\r\n            var defaultViewDuration = duration;\r\n            lastIntervalDate.setDate(date.getDate() + defaultViewDuration - 1);\r\n            var isDifferentMonthDates = date.getMonth() !== lastIntervalDate.getMonth();\r\n            var useShortFormat = isDifferentMonthDates || short;\r\n            var firstWeekDateText = _date4.default.format(date, isDifferentMonthDates ? getDateMonthFormat(useShortFormat) : \"d\");\r\n            var lastWeekDateText = _date4.default.format(lastIntervalDate, getCaptionFormat(useShortFormat));\r\n            return firstWeekDateText + \"-\" + lastWeekDateText\r\n        }\r\n        return [dateMonthFormat(date), _date4.default.format(date, \"year\")].join(\" \")\r\n    }\r\n};\r\nvar getWeekCaption = function(date, shift, rejectWeekend) {\r\n    var firstDayOfWeek = this.option(\"firstDayOfWeek\");\r\n    var firstDayOfWeekIndex = (0, _type.isDefined)(firstDayOfWeek) ? firstDayOfWeek : getDefaultFirstDayOfWeekIndex(shift);\r\n    if (0 === firstDayOfWeekIndex && rejectWeekend) {\r\n        firstDayOfWeekIndex = MONDAY_INDEX\r\n    }\r\n    var firstWeekDate = _date2.default.getFirstWeekDate(date, firstDayOfWeekIndex);\r\n    var weekendDuration = 2;\r\n    if (rejectWeekend) {\r\n        firstWeekDate = _date2.default.normalizeDateByWeek(firstWeekDate, date)\r\n    }\r\n    if (firstDayOfWeek >= 6 && rejectWeekend) {\r\n        firstWeekDate.setDate(firstWeekDate.getDate() + (7 - firstDayOfWeek + 1))\r\n    }\r\n    var lastWeekDate = new Date(firstWeekDate);\r\n    var intervalCount = this.option(\"intervalCount\");\r\n    shift = shift || 6;\r\n    lastWeekDate = new Date(lastWeekDate.setDate(lastWeekDate.getDate() + (intervalCount > 1 ? 7 * (intervalCount - 1) + shift : shift)));\r\n    if (lastWeekDate.getDay() % 6 === 0 && rejectWeekend) {\r\n        lastWeekDate.setDate(lastWeekDate.getDate() + weekendDuration)\r\n    }\r\n    return {\r\n        text: formatCaptionByMonths.call(this, lastWeekDate, firstWeekDate),\r\n        startDate: firstWeekDate,\r\n        endDate: lastWeekDate\r\n    }\r\n};\r\nvar formatCaptionByMonths = function(lastDate, firstDate) {\r\n    var isDifferentMonthDates = firstDate.getMonth() !== lastDate.getMonth();\r\n    var isDifferentYears = firstDate.getFullYear() !== lastDate.getFullYear();\r\n    var useShortFormat = isDifferentMonthDates || this.option(\"_useShortDateFormat\");\r\n    var lastDateText;\r\n    var firstDateText;\r\n    if (isDifferentYears) {\r\n        firstDateText = _date4.default.format(firstDate, getCaptionFormat(true));\r\n        lastDateText = _date4.default.format(lastDate, getCaptionFormat(true))\r\n    } else {\r\n        firstDateText = _date4.default.format(firstDate, isDifferentMonthDates ? getDateMonthFormat(useShortFormat) : \"d\");\r\n        lastDateText = _date4.default.format(lastDate, getCaptionFormat(useShortFormat))\r\n    }\r\n    return firstDateText + \"-\" + lastDateText\r\n};\r\nvar getMonthCaption = function(date) {\r\n    var firstDate = new Date(_date2.default.getFirstMonthDate(date));\r\n    var lastDate = new Date(_date2.default.getLastMonthDate(firstDate));\r\n    var text;\r\n    if (this.option(\"intervalCount\") > 1) {\r\n        lastDate = new Date(firstDate);\r\n        lastDate.setMonth(firstDate.getMonth() + this.option(\"intervalCount\") - 1);\r\n        lastDate = new Date(_date2.default.getLastMonthDate(lastDate));\r\n        var isSameYear = firstDate.getYear() === lastDate.getYear();\r\n        var lastDateText = getMonthYearFormat(lastDate);\r\n        var firstDateText = isSameYear ? _date4.default.getMonthNames(\"abbreviated\")[firstDate.getMonth()] : getMonthYearFormat(firstDate);\r\n        text = firstDateText + \"-\" + lastDateText\r\n    } else {\r\n        text = _date4.default.format(date, \"monthandyear\")\r\n    }\r\n    return {\r\n        text: text,\r\n        startDate: firstDate,\r\n        endDate: lastDate\r\n    }\r\n};\r\nvar dateGetter = function(date, offset) {\r\n    return new Date(date[this.setter](date[this.getter]() + offset))\r\n};\r\nvar getConfig = function(step) {\r\n    var agendaDuration;\r\n    switch (step) {\r\n        case \"day\":\r\n            return {\r\n                duration: 1 * this.option(\"intervalCount\"), setter: \"setDate\", getter: \"getDate\", getDate: dateGetter, getCaption: function(date) {\r\n                    var format = getCaptionFormat(false, this.option(\"intervalCount\"), this._getConfig().duration);\r\n                    return {\r\n                        text: _date4.default.format(date, format),\r\n                        startDate: date,\r\n                        endDate: date\r\n                    }\r\n                }\r\n            };\r\n        case \"week\":\r\n            return {\r\n                duration: 7 * this.option(\"intervalCount\"), setter: \"setDate\", getter: \"getDate\", getDate: dateGetter, getCaption: getWeekCaption\r\n            };\r\n        case \"workWeek\":\r\n            return {\r\n                duration: 7 * this.option(\"intervalCount\"), setter: \"setDate\", getter: \"getDate\", getDate: dateGetter, getCaption: function(date) {\r\n                    return getWeekCaption.call(this, date, 4, true)\r\n                }\r\n            };\r\n        case \"month\":\r\n            return {\r\n                duration: 1 * this.option(\"intervalCount\"), setter: \"setMonth\", getter: \"getMonth\", getDate: function(date, offset) {\r\n                    var currentDate = date.getDate();\r\n                    date.setDate(1);\r\n                    date = dateGetter.call(this, date, offset);\r\n                    var lastDate = _date2.default.getLastMonthDay(date);\r\n                    date.setDate(currentDate < lastDate ? currentDate : lastDate);\r\n                    return date\r\n                }, getCaption: getMonthCaption\r\n            };\r\n        case \"agenda\":\r\n            agendaDuration = this.invoke(\"getAgendaDuration\");\r\n            agendaDuration = (0, _type.isNumeric)(agendaDuration) && agendaDuration > 0 ? agendaDuration : 7;\r\n            return {\r\n                duration: agendaDuration, setter: \"setDate\", getter: \"getDate\", getDate: dateGetter, getCaption: function(date) {\r\n                    var format = getCaptionFormat(this.option(\"_useShortDateFormat\"));\r\n                    var firstDate = new Date(date);\r\n                    var lastDate = new Date(date);\r\n                    var text;\r\n                    if (agendaDuration > 1) {\r\n                        lastDate.setDate(lastDate.getDate() + agendaDuration - 1);\r\n                        text = formatCaptionByMonths.call(this, lastDate, date)\r\n                    } else {\r\n                        text = _date4.default.format(date, format)\r\n                    }\r\n                    return {\r\n                        text: text,\r\n                        startDate: firstDate,\r\n                        endDate: lastDate\r\n                    }\r\n                }\r\n            }\r\n    }\r\n};\r\nvar SchedulerNavigator = _ui4.default.inherit({\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            date: new Date,\r\n            displayedDate: void 0,\r\n            step: \"day\",\r\n            intervalCount: 1,\r\n            min: void 0,\r\n            max: void 0,\r\n            firstDayOfWeek: void 0,\r\n            _useShortDateFormat: false\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return !_devices2.default.real().generic || _devices2.default.isSimulator()\r\n            },\r\n            options: {\r\n                _useShortDateFormat: true\r\n            }\r\n        }])\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"step\":\r\n            case \"date\":\r\n            case \"intervalCount\":\r\n            case \"displayedDate\":\r\n                this._updateButtonsState();\r\n                this._renderCaption();\r\n                this._setCalendarOption(\"value\", this.option(\"date\"));\r\n                break;\r\n            case \"min\":\r\n            case \"max\":\r\n                this._updateButtonsState();\r\n                this._setCalendarOption(args.name, args.value);\r\n                break;\r\n            case \"firstDayOfWeek\":\r\n                this._setCalendarOption(args.name, args.value);\r\n                break;\r\n            case \"customizeDateNavigatorText\":\r\n                this._renderCaption();\r\n                break;\r\n            case \"tabIndex\":\r\n            case \"focusStateEnabled\":\r\n                this._next.option(args.name, args.value);\r\n                this._caption.option(args.name, args.value);\r\n                this._prev.option(args.name, args.value);\r\n                this._setCalendarOption(args.name, args.value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"_useShortDateFormat\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this.$element().addClass(ELEMENT_CLASS);\r\n        this._initButtons()\r\n    },\r\n    _initButtons: function() {\r\n        var $next = (0, _renderer2.default)(\"<div>\").addClass(NEXT_BUTTON_CLASS);\r\n        this._next = this._createComponent($next, _button2.default, {\r\n            icon: \"chevronnext\",\r\n            onClick: this._updateCurrentDate.bind(this, 1),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            integrationOptions: {}\r\n        });\r\n        var $caption = (0, _renderer2.default)(\"<div>\").addClass(CAPTION_BUTTON_CLASS);\r\n        this._caption = this._createComponent($caption, _button2.default, {\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            integrationOptions: {}\r\n        });\r\n        var $prev = (0, _renderer2.default)(\"<div>\").addClass(PREVIOUS_BUTTON_CLASS);\r\n        this._prev = this._createComponent($prev, _button2.default, {\r\n            icon: \"chevronprev\",\r\n            onClick: this._updateCurrentDate.bind(this, -1),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            integrationOptions: {}\r\n        });\r\n        this.setAria(\"label\", \"Next period\", $next);\r\n        this.setAria(\"label\", \"Previous period\", $prev);\r\n        this._updateButtonsState();\r\n        this.$element().append($prev, $caption, $next)\r\n    },\r\n    _updateButtonsState: function() {\r\n        var min = this.option(\"min\");\r\n        var max = this.option(\"max\");\r\n        var caption = this._getConfig().getCaption.call(this, this.option(\"displayedDate\") || this.option(\"date\"));\r\n        min = min ? _date2.default.trimTime(min) : min;\r\n        max = max ? _date2.default.trimTime(max) : max;\r\n        max && max.setHours(23, 59, 59);\r\n        this._prev.option(\"disabled\", min && !isNaN(min.getTime()) && this._getNextDate(-1, caption.endDate) < min);\r\n        this._next.option(\"disabled\", max && !isNaN(max.getTime()) && this._getNextDate(1, caption.startDate) > max)\r\n    },\r\n    _updateCurrentDate: function(direction) {\r\n        var date = this._getNextDate(direction);\r\n        _date2.default.normalizeDate(date, this.option(\"min\"), this.option(\"max\"));\r\n        this.notifyObserver(\"currentDateUpdated\", date)\r\n    },\r\n    _getNextDate: function(direction) {\r\n        var initialDate = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;\r\n        var stepConfig = this._getConfig();\r\n        var offset = stepConfig.duration * direction;\r\n        var date = stepConfig.getDate(new Date(initialDate || this.option(\"date\")), offset);\r\n        return date\r\n    },\r\n    _renderFocusTarget: _common.noop,\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this._renderCaption()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._renderPopover();\r\n        this._renderCaptionKeys()\r\n    },\r\n    _isMobileLayout: function() {\r\n        return !_devices2.default.current().generic\r\n    },\r\n    _renderPopover: function() {\r\n        var _this = this;\r\n        var overlayType = this._isMobileLayout() ? _popup2.default : _popover2.default;\r\n        var popoverContainer = (0, _renderer2.default)(\"<div>\").addClass(CALENDAR_POPOVER_CLASS);\r\n        this._popover = this._createComponent(popoverContainer, overlayType, {\r\n            contentTemplate: function() {\r\n                return _this._createPopupContent()\r\n            },\r\n            defaultOptionsRules: [{\r\n                device: function() {\r\n                    return !_devices2.default.current().generic\r\n                },\r\n                options: {\r\n                    fullScreen: true,\r\n                    showCloseButton: false,\r\n                    toolbarItems: [{\r\n                        shortcut: \"cancel\"\r\n                    }]\r\n                }\r\n            }, {\r\n                device: function() {\r\n                    return _devices2.default.current().generic\r\n                },\r\n                options: {\r\n                    target: this._caption.$element()\r\n                }\r\n            }]\r\n        });\r\n        this._popover.$element().appendTo(this.$element())\r\n    },\r\n    _createScrollable: function(content) {\r\n        var result = this._createComponent((0, _renderer2.default)(\"<div>\"), _ui6.default, {\r\n            direction: \"vertical\"\r\n        });\r\n        result.$content().append(content);\r\n        return result\r\n    },\r\n    _createPopupContent: function() {\r\n        var result = (0, _renderer2.default)(\"<div>\").addClass(CALENDAR_CLASS);\r\n        this._calendar = this._createComponent(result, _calendar2.default, this._calendarOptions());\r\n        if (this._isMobileLayout()) {\r\n            var scrollable = this._createScrollable(result);\r\n            return scrollable.$element()\r\n        }\r\n        return result\r\n    },\r\n    _calendarOptions: function() {\r\n        return {\r\n            min: this.option(\"min\"),\r\n            max: this.option(\"max\"),\r\n            firstDayOfWeek: this.option(\"firstDayOfWeek\"),\r\n            value: this.option(\"date\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            onValueChanged: function(e) {\r\n                if (!this.option(\"visible\")) {\r\n                    return\r\n                }\r\n                this.notifyObserver(\"currentDateUpdated\", e.value);\r\n                this._popover.hide()\r\n            }.bind(this),\r\n            hasFocus: function() {\r\n                return true\r\n            },\r\n            tabIndex: null\r\n        }\r\n    },\r\n    _renderCaption: function() {\r\n        var _this2 = this;\r\n        var date = this.option(\"displayedDate\") || this.option(\"date\");\r\n        var captionConfig = this._getConfig().getCaption.call(this, date);\r\n        var customizationFunction = this.option(\"customizeDateNavigatorText\");\r\n        var caption = _type2.default.isFunction(customizationFunction) ? customizationFunction(captionConfig) : captionConfig.text;\r\n        this._caption.option({\r\n            text: caption,\r\n            onKeyboardHandled: function(opts) {\r\n                _this2.option(\"focusStateEnabled\") && !_this2.option(\"disabled\") && _this2._calendar._keyboardHandler(opts)\r\n            },\r\n            onClick: function() {\r\n                return _this2._popover.toggle()\r\n            }\r\n        })\r\n    },\r\n    _renderCaptionKeys: function() {\r\n        if (!this.option(\"focusStateEnabled\") || this.option(\"disabled\")) {\r\n            return\r\n        }\r\n        var that = this;\r\n        var executeHandler = function() {\r\n            if (that._popover.$content().is(\":hidden\")) {\r\n                that._popover.show()\r\n            } else {\r\n                return true\r\n            }\r\n        };\r\n        var tabHandler = function() {\r\n            that._popover.hide()\r\n        };\r\n        this._caption.registerKeyHandler(\"enter\", executeHandler);\r\n        this._caption.registerKeyHandler(\"space\", executeHandler);\r\n        this._caption.registerKeyHandler(\"tab\", tabHandler)\r\n    },\r\n    _setCalendarOption: function(name, value) {\r\n        if (this._calendar) {\r\n            this._calendar.option(name, value)\r\n        }\r\n    },\r\n    _getConfig: function() {\r\n        var step = this.option(\"step\");\r\n        var config = getConfig.call(this, step);\r\n        if (!config) {\r\n            throw _ui2.default.Error(\"E1033\", step)\r\n        }\r\n        return config\r\n    }\r\n}).include(_uiScheduler2.default);\r\n(0, _component_registrator2.default)(\"dxSchedulerNavigator\", SchedulerNavigator);\r\nmodule.exports = SchedulerNavigator;\r\n"]},"metadata":{},"sourceType":"script"}