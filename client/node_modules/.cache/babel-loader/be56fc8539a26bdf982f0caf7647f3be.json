{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.appointment.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _translator = require(\"../../animation/translator\");\n\nvar _translator2 = _interopRequireDefault(_translator);\n\nvar _utils = require(\"./utils.recurrence\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _ui = require(\"../tooltip/ui.tooltip\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _uiScheduler = require(\"./ui.scheduler.publisher_mixin\");\n\nvar _uiScheduler2 = _interopRequireDefault(_uiScheduler);\n\nvar _utils3 = require(\"../../events/utils\");\n\nvar eventUtils = _interopRequireWildcard(_utils3);\n\nvar _pointer = require(\"../../events/pointer\");\n\nvar _pointer2 = _interopRequireDefault(_pointer);\n\nvar _dom_component = require(\"../../core/dom_component\");\n\nvar _dom_component2 = _interopRequireDefault(_dom_component);\n\nvar _resizable = require(\"../resizable\");\n\nvar _resizable2 = _interopRequireDefault(_resizable);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _date = require(\"../../localization/date\");\n\nvar _date2 = _interopRequireDefault(_date);\n\nvar _constants = require(\"./constants\");\n\nfunction _getRequireWildcardCache() {\n  if (\"function\" !== typeof WeakMap) {\n    return null;\n  }\n\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function () {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (null === obj || \"object\" !== _typeof(obj) && \"function\" !== typeof obj) {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DEFAULT_HORIZONTAL_HANDLES = \"left right\";\nvar DEFAULT_VERTICAL_HANDLES = \"top bottom\";\nvar REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME = eventUtils.addNamespace(_pointer2.default.enter, \"dxSchedulerAppointment\");\nvar REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME = eventUtils.addNamespace(_pointer2.default.leave, \"dxSchedulerAppointment\");\n\nvar Appointment = _dom_component2.default.inherit({\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      data: {},\n      geometry: {\n        top: 0,\n        left: 0,\n        width: 0,\n        height: 0\n      },\n      allowDrag: true,\n      allowResize: true,\n      reduced: null,\n      isCompact: false,\n      direction: \"vertical\",\n      resizableConfig: {},\n      cellHeight: 0,\n      cellWidth: 0\n    });\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"data\":\n      case \"geometry\":\n      case \"allowDrag\":\n      case \"allowResize\":\n      case \"reduced\":\n      case \"sortedIndex\":\n      case \"isCompact\":\n      case \"direction\":\n      case \"resizableConfig\":\n      case \"cellHeight\":\n      case \"cellWidth\":\n        this._invalidate();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _getHorizontalResizingRule: function () {\n    var reducedHandles = {\n      head: this.option(\"rtlEnabled\") ? \"right\" : \"left\",\n      body: \"\",\n      tail: this.option(\"rtlEnabled\") ? \"left\" : \"right\"\n    };\n    return {\n      handles: this.option(\"reduced\") ? reducedHandles[this.option(\"reduced\")] : DEFAULT_HORIZONTAL_HANDLES,\n      minHeight: 0,\n      minWidth: this.invoke(\"getCellWidth\"),\n      step: this.invoke(\"getResizableStep\")\n    };\n  },\n  _getVerticalResizingRule: function () {\n    var height = this.invoke(\"getCellHeight\");\n    return {\n      handles: DEFAULT_VERTICAL_HANDLES,\n      minWidth: 0,\n      minHeight: height,\n      step: height\n    };\n  },\n  _render: function () {\n    this.callBase();\n\n    this._renderAppointmentGeometry();\n\n    this._renderEmptyClass();\n\n    this._renderReducedAppointment();\n\n    this._renderAllDayClass();\n\n    this._renderDirection();\n\n    this.$element().data(\"dxAppointmentStartDate\", this.option(\"startDate\"));\n    this.$element().attr(\"title\", this.invoke(\"getField\", \"text\", this.option(\"data\")));\n    this.$element().attr(\"role\", \"button\");\n\n    this._renderRecurrenceClass();\n\n    this._renderResizable();\n  },\n  _renderAppointmentGeometry: function () {\n    var geometry = this.option(\"geometry\");\n    var $element = this.$element();\n\n    _translator2.default.move($element, {\n      top: geometry.top,\n      left: geometry.left\n    });\n\n    $element.css({\n      width: geometry.width < 0 ? 0 : geometry.width,\n      height: geometry.height < 0 ? 0 : geometry.height\n    });\n  },\n  _renderEmptyClass: function () {\n    var geometry = this.option(\"geometry\");\n\n    if (geometry.empty || this.option(\"isCompact\")) {\n      this.$element().addClass(_constants.EMPTY_APPOINTMENT_CLASS);\n    }\n  },\n  _renderReducedAppointment: function () {\n    var reducedPart = this.option(\"reduced\");\n\n    if (!reducedPart) {\n      return;\n    }\n\n    this.$element().toggleClass(_constants.REDUCED_APPOINTMENT_CLASS, true).toggleClass(_constants.REDUCED_APPOINTMENT_PARTS_CLASSES[reducedPart], true);\n\n    this._renderAppointmentReducedIcon();\n  },\n  _renderAppointmentReducedIcon: function () {\n    var $icon = (0, _renderer2.default)(\"<div>\").addClass(_constants.REDUCED_APPOINTMENT_ICON).appendTo(this.$element());\n\n    var endDate = this._getEndDate();\n\n    var tooltipLabel = _message2.default.format(\"dxScheduler-editorLabelEndDate\");\n\n    var tooltipText = [tooltipLabel, \": \", _date2.default.format(endDate, \"monthAndDay\"), \", \", _date2.default.format(endDate, \"year\")].join(\"\");\n\n    _events_engine2.default.off($icon, REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME);\n\n    _events_engine2.default.on($icon, REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME, function () {\n      _ui2.default.show({\n        target: $icon,\n        content: tooltipText\n      });\n    });\n\n    _events_engine2.default.off($icon, REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME);\n\n    _events_engine2.default.on($icon, REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME, function () {\n      _ui2.default.hide();\n    });\n  },\n  _getEndDate: function () {\n    var result = this.invoke(\"getField\", \"endDate\", this.option(\"data\"));\n\n    if (result) {\n      return new Date(result);\n    }\n\n    return result;\n  },\n  _renderAllDayClass: function () {\n    this.$element().toggleClass(_constants.ALL_DAY_APPOINTMENT_CLASS, !!this.option(\"allDay\"));\n  },\n  _renderRecurrenceClass: function () {\n    var rule = this.invoke(\"getField\", \"recurrenceRule\", this.option(\"data\"));\n\n    if (_utils2.default.getRecurrenceRule(rule).isValid) {\n      this.$element().addClass(_constants.RECURRENCE_APPOINTMENT_CLASS);\n    }\n  },\n  _renderDirection: function () {\n    this.$element().addClass(_constants.DIRECTION_APPOINTMENT_CLASSES[this.option(\"direction\")]);\n  },\n  _createResizingConfig: function () {\n    var config = \"vertical\" === this.option(\"direction\") ? this._getVerticalResizingRule() : this._getHorizontalResizingRule();\n    config.roundStepValue = true;\n\n    if (!this.invoke(\"isGroupedByDate\")) {\n      config.stepPrecision = \"strict\";\n    }\n\n    return config;\n  },\n  _renderResizable: function () {\n    if (this.option(\"allowResize\")) {\n      this._createComponent(this.$element(), _resizable2.default, (0, _extend.extend)(this._createResizingConfig(), this.option(\"resizableConfig\")));\n    }\n  },\n  _useTemplates: function () {\n    return false;\n  }\n}).include(_uiScheduler2.default);\n\n(0, _component_registrator2.default)(\"dxSchedulerAppointment\", Appointment);\nmodule.exports = Appointment;","map":{"version":3,"sources":["/Users/tracyvy/Desktop/calendar/client/node_modules/devextreme/ui/scheduler/ui.scheduler.appointment.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_translator","_translator2","_utils","_utils2","_extend","_component_registrator","_component_registrator2","_ui","_ui2","_uiScheduler","_uiScheduler2","_utils3","eventUtils","_interopRequireWildcard","_pointer","_pointer2","_dom_component","_dom_component2","_resizable","_resizable2","_message","_message2","_date","_date2","_constants","_getRequireWildcardCache","WeakMap","cache","__esModule","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","default","DEFAULT_HORIZONTAL_HANDLES","DEFAULT_VERTICAL_HANDLES","REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME","addNamespace","enter","REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME","leave","Appointment","inherit","_getDefaultOptions","extend","callBase","data","geometry","top","left","width","height","allowDrag","allowResize","reduced","isCompact","direction","resizableConfig","cellHeight","cellWidth","_optionChanged","args","name","_invalidate","_getHorizontalResizingRule","reducedHandles","head","option","body","tail","handles","minHeight","minWidth","invoke","step","_getVerticalResizingRule","_render","_renderAppointmentGeometry","_renderEmptyClass","_renderReducedAppointment","_renderAllDayClass","_renderDirection","$element","attr","_renderRecurrenceClass","_renderResizable","move","css","empty","addClass","EMPTY_APPOINTMENT_CLASS","reducedPart","toggleClass","REDUCED_APPOINTMENT_CLASS","REDUCED_APPOINTMENT_PARTS_CLASSES","_renderAppointmentReducedIcon","$icon","REDUCED_APPOINTMENT_ICON","appendTo","endDate","_getEndDate","tooltipLabel","format","tooltipText","join","off","on","show","target","content","hide","result","Date","ALL_DAY_APPOINTMENT_CLASS","rule","getRecurrenceRule","isValid","RECURRENCE_APPOINTMENT_CLASS","DIRECTION_APPOINTMENT_CLASSES","_createResizingConfig","config","roundStepValue","stepPrecision","_createComponent","_useTemplates","include","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.appointment.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _translator = require(\"../../animation/translator\");\r\nvar _translator2 = _interopRequireDefault(_translator);\r\nvar _utils = require(\"./utils.recurrence\");\r\nvar _utils2 = _interopRequireDefault(_utils);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _ui = require(\"../tooltip/ui.tooltip\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _uiScheduler = require(\"./ui.scheduler.publisher_mixin\");\r\nvar _uiScheduler2 = _interopRequireDefault(_uiScheduler);\r\nvar _utils3 = require(\"../../events/utils\");\r\nvar eventUtils = _interopRequireWildcard(_utils3);\r\nvar _pointer = require(\"../../events/pointer\");\r\nvar _pointer2 = _interopRequireDefault(_pointer);\r\nvar _dom_component = require(\"../../core/dom_component\");\r\nvar _dom_component2 = _interopRequireDefault(_dom_component);\r\nvar _resizable = require(\"../resizable\");\r\nvar _resizable2 = _interopRequireDefault(_resizable);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _date = require(\"../../localization/date\");\r\nvar _date2 = _interopRequireDefault(_date);\r\nvar _constants = require(\"./constants\");\r\n\r\nfunction _getRequireWildcardCache() {\r\n    if (\"function\" !== typeof WeakMap) {\r\n        return null\r\n    }\r\n    var cache = new WeakMap;\r\n    _getRequireWildcardCache = function() {\r\n        return cache\r\n    };\r\n    return cache\r\n}\r\n\r\nfunction _interopRequireWildcard(obj) {\r\n    if (obj && obj.__esModule) {\r\n        return obj\r\n    }\r\n    if (null === obj || \"object\" !== _typeof(obj) && \"function\" !== typeof obj) {\r\n        return {\r\n            \"default\": obj\r\n        }\r\n    }\r\n    var cache = _getRequireWildcardCache();\r\n    if (cache && cache.has(obj)) {\r\n        return cache.get(obj)\r\n    }\r\n    var newObj = {};\r\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\r\n    for (var key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\r\n            if (desc && (desc.get || desc.set)) {\r\n                Object.defineProperty(newObj, key, desc)\r\n            } else {\r\n                newObj[key] = obj[key]\r\n            }\r\n        }\r\n    }\r\n    newObj.default = obj;\r\n    if (cache) {\r\n        cache.set(obj, newObj)\r\n    }\r\n    return newObj\r\n}\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DEFAULT_HORIZONTAL_HANDLES = \"left right\";\r\nvar DEFAULT_VERTICAL_HANDLES = \"top bottom\";\r\nvar REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME = eventUtils.addNamespace(_pointer2.default.enter, \"dxSchedulerAppointment\");\r\nvar REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME = eventUtils.addNamespace(_pointer2.default.leave, \"dxSchedulerAppointment\");\r\nvar Appointment = _dom_component2.default.inherit({\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            data: {},\r\n            geometry: {\r\n                top: 0,\r\n                left: 0,\r\n                width: 0,\r\n                height: 0\r\n            },\r\n            allowDrag: true,\r\n            allowResize: true,\r\n            reduced: null,\r\n            isCompact: false,\r\n            direction: \"vertical\",\r\n            resizableConfig: {},\r\n            cellHeight: 0,\r\n            cellWidth: 0\r\n        })\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"data\":\r\n            case \"geometry\":\r\n            case \"allowDrag\":\r\n            case \"allowResize\":\r\n            case \"reduced\":\r\n            case \"sortedIndex\":\r\n            case \"isCompact\":\r\n            case \"direction\":\r\n            case \"resizableConfig\":\r\n            case \"cellHeight\":\r\n            case \"cellWidth\":\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _getHorizontalResizingRule: function() {\r\n        var reducedHandles = {\r\n            head: this.option(\"rtlEnabled\") ? \"right\" : \"left\",\r\n            body: \"\",\r\n            tail: this.option(\"rtlEnabled\") ? \"left\" : \"right\"\r\n        };\r\n        return {\r\n            handles: this.option(\"reduced\") ? reducedHandles[this.option(\"reduced\")] : DEFAULT_HORIZONTAL_HANDLES,\r\n            minHeight: 0,\r\n            minWidth: this.invoke(\"getCellWidth\"),\r\n            step: this.invoke(\"getResizableStep\")\r\n        }\r\n    },\r\n    _getVerticalResizingRule: function() {\r\n        var height = this.invoke(\"getCellHeight\");\r\n        return {\r\n            handles: DEFAULT_VERTICAL_HANDLES,\r\n            minWidth: 0,\r\n            minHeight: height,\r\n            step: height\r\n        }\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._renderAppointmentGeometry();\r\n        this._renderEmptyClass();\r\n        this._renderReducedAppointment();\r\n        this._renderAllDayClass();\r\n        this._renderDirection();\r\n        this.$element().data(\"dxAppointmentStartDate\", this.option(\"startDate\"));\r\n        this.$element().attr(\"title\", this.invoke(\"getField\", \"text\", this.option(\"data\")));\r\n        this.$element().attr(\"role\", \"button\");\r\n        this._renderRecurrenceClass();\r\n        this._renderResizable()\r\n    },\r\n    _renderAppointmentGeometry: function() {\r\n        var geometry = this.option(\"geometry\");\r\n        var $element = this.$element();\r\n        _translator2.default.move($element, {\r\n            top: geometry.top,\r\n            left: geometry.left\r\n        });\r\n        $element.css({\r\n            width: geometry.width < 0 ? 0 : geometry.width,\r\n            height: geometry.height < 0 ? 0 : geometry.height\r\n        })\r\n    },\r\n    _renderEmptyClass: function() {\r\n        var geometry = this.option(\"geometry\");\r\n        if (geometry.empty || this.option(\"isCompact\")) {\r\n            this.$element().addClass(_constants.EMPTY_APPOINTMENT_CLASS)\r\n        }\r\n    },\r\n    _renderReducedAppointment: function() {\r\n        var reducedPart = this.option(\"reduced\");\r\n        if (!reducedPart) {\r\n            return\r\n        }\r\n        this.$element().toggleClass(_constants.REDUCED_APPOINTMENT_CLASS, true).toggleClass(_constants.REDUCED_APPOINTMENT_PARTS_CLASSES[reducedPart], true);\r\n        this._renderAppointmentReducedIcon()\r\n    },\r\n    _renderAppointmentReducedIcon: function() {\r\n        var $icon = (0, _renderer2.default)(\"<div>\").addClass(_constants.REDUCED_APPOINTMENT_ICON).appendTo(this.$element());\r\n        var endDate = this._getEndDate();\r\n        var tooltipLabel = _message2.default.format(\"dxScheduler-editorLabelEndDate\");\r\n        var tooltipText = [tooltipLabel, \": \", _date2.default.format(endDate, \"monthAndDay\"), \", \", _date2.default.format(endDate, \"year\")].join(\"\");\r\n        _events_engine2.default.off($icon, REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME);\r\n        _events_engine2.default.on($icon, REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME, function() {\r\n            _ui2.default.show({\r\n                target: $icon,\r\n                content: tooltipText\r\n            })\r\n        });\r\n        _events_engine2.default.off($icon, REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME);\r\n        _events_engine2.default.on($icon, REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME, function() {\r\n            _ui2.default.hide()\r\n        })\r\n    },\r\n    _getEndDate: function() {\r\n        var result = this.invoke(\"getField\", \"endDate\", this.option(\"data\"));\r\n        if (result) {\r\n            return new Date(result)\r\n        }\r\n        return result\r\n    },\r\n    _renderAllDayClass: function() {\r\n        this.$element().toggleClass(_constants.ALL_DAY_APPOINTMENT_CLASS, !!this.option(\"allDay\"))\r\n    },\r\n    _renderRecurrenceClass: function() {\r\n        var rule = this.invoke(\"getField\", \"recurrenceRule\", this.option(\"data\"));\r\n        if (_utils2.default.getRecurrenceRule(rule).isValid) {\r\n            this.$element().addClass(_constants.RECURRENCE_APPOINTMENT_CLASS)\r\n        }\r\n    },\r\n    _renderDirection: function() {\r\n        this.$element().addClass(_constants.DIRECTION_APPOINTMENT_CLASSES[this.option(\"direction\")])\r\n    },\r\n    _createResizingConfig: function() {\r\n        var config = \"vertical\" === this.option(\"direction\") ? this._getVerticalResizingRule() : this._getHorizontalResizingRule();\r\n        config.roundStepValue = true;\r\n        if (!this.invoke(\"isGroupedByDate\")) {\r\n            config.stepPrecision = \"strict\"\r\n        }\r\n        return config\r\n    },\r\n    _renderResizable: function() {\r\n        if (this.option(\"allowResize\")) {\r\n            this._createComponent(this.$element(), _resizable2.default, (0, _extend.extend)(this._createResizingConfig(), this.option(\"resizableConfig\")))\r\n        }\r\n    },\r\n    _useTemplates: function() {\r\n        return false\r\n    }\r\n}).include(_uiScheduler2.default);\r\n(0, _component_registrator2.default)(\"dxSchedulerAppointment\", Appointment);\r\nmodule.exports = Appointment;\r\n"]},"metadata":{},"sourceType":"script"}