{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/appointmentDragBehavior.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _draggable = require(\"../draggable\");\n\nvar _draggable2 = _interopRequireDefault(_draggable);\n\nvar _translator = require(\"../../animation/translator\");\n\nvar _translator2 = _interopRequireDefault(_translator);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _position = require(\"../../core/utils/position\");\n\nvar _constants = require(\"./constants\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nvar FIXED_CONTAINER_PROP_NAME = \"fixedContainer\";\nvar APPOINTMENT_ITEM_CLASS = \"dx-scheduler-appointment\";\n\nvar AppointmentDragBehavior = function () {\n  function AppointmentDragBehavior(scheduler) {\n    _classCallCheck(this, AppointmentDragBehavior);\n\n    this.scheduler = scheduler;\n    this.appointments = scheduler._appointments;\n    this.initialPosition = {\n      left: 0,\n      top: 0\n    };\n    this.currentAppointment = null;\n  }\n\n  _createClass(AppointmentDragBehavior, [{\n    key: \"isAllDay\",\n    value: function (appointment) {\n      return appointment.data(\"dxAppointmentSettings\").allDay;\n    }\n  }, {\n    key: \"getContainerShift\",\n    value: function (isAllDay) {\n      var appointmentContainer = this.appointments._getAppointmentContainer(isAllDay);\n\n      var dragAndDropContainer = this.appointments.option(FIXED_CONTAINER_PROP_NAME);\n      var appointmentContainerRect = (0, _position.getBoundingRect)(appointmentContainer[0]);\n      var dragAndDropContainerRect = (0, _position.getBoundingRect)(dragAndDropContainer[0]);\n      return {\n        left: appointmentContainerRect.left - dragAndDropContainerRect.left,\n        top: appointmentContainerRect.top - dragAndDropContainerRect.top\n      };\n    }\n  }, {\n    key: \"onDragStart\",\n    value: function (e) {\n      this.initialPosition = _translator2.default.locate((0, _renderer2.default)(e.itemElement));\n      this.appointments.notifyObserver(\"hideAppointmentTooltip\");\n    }\n  }, {\n    key: \"onDragMove\",\n    value: function (e) {\n      if (e.fromComponent !== e.toComponent) {\n        this.appointments.notifyObserver(\"removeDroppableCellClass\");\n      }\n    }\n  }, {\n    key: \"getAppointmentElement\",\n    value: function (e) {\n      var itemElement = e.event.data && e.event.data.itemElement || e.itemElement;\n      return (0, _renderer2.default)(itemElement);\n    }\n  }, {\n    key: \"onDragEnd\",\n    value: function (e) {\n      var $appointment = this.getAppointmentElement(e);\n\n      var container = this.appointments._getAppointmentContainer(this.isAllDay($appointment));\n\n      container.append($appointment);\n      this.currentAppointment = $appointment;\n      this.appointments.notifyObserver(\"updateAppointmentAfterDrag\", {\n        event: e,\n        data: this.appointments._getItemData($appointment),\n        $appointment: $appointment,\n        coordinates: this.initialPosition\n      });\n    }\n  }, {\n    key: \"getItemData\",\n    value: function (appointment) {\n      var itemData = (0, _renderer2.default)(appointment).data(_constants.LIST_ITEM_DATA_KEY);\n      return itemData && itemData.data || this.appointments._getItemData(appointment);\n    }\n  }, {\n    key: \"getItemSettings\",\n    value: function (appointment) {\n      var itemData = (0, _renderer2.default)(appointment).data(_constants.LIST_ITEM_DATA_KEY);\n      return itemData && itemData.settings || [];\n    }\n  }, {\n    key: \"createDragStartHandler\",\n    value: function (options, appointmentDragging) {\n      var _this = this;\n\n      return function (e) {\n        e.itemData = _this.getItemData(e.itemElement);\n        e.itemSettings = _this.getItemSettings(e.itemElement);\n        appointmentDragging.onDragStart && appointmentDragging.onDragStart(e);\n\n        if (!e.cancel) {\n          options.onDragStart(e);\n        }\n      };\n    }\n  }, {\n    key: \"createDragMoveHandler\",\n    value: function (options, appointmentDragging) {\n      return function (e) {\n        appointmentDragging.onDragMove && appointmentDragging.onDragMove(e);\n\n        if (!e.cancel) {\n          options.onDragMove(e);\n        }\n      };\n    }\n  }, {\n    key: \"createDragEndHandler\",\n    value: function (options, appointmentDragging) {\n      return function (e) {\n        appointmentDragging.onDragEnd && appointmentDragging.onDragEnd(e);\n\n        if (!e.cancel) {\n          options.onDragEnd(e);\n\n          if (e.fromComponent !== e.toComponent) {\n            appointmentDragging.onRemove && appointmentDragging.onRemove(e);\n          }\n        }\n      };\n    }\n  }, {\n    key: \"createDropHandler\",\n    value: function (appointmentDragging) {\n      var _this2 = this;\n\n      return function (e) {\n        e.itemData = (0, _extend.extend)({}, e.itemData, _this2.appointments.invoke(\"getUpdatedData\", {\n          data: e.itemData\n        }));\n\n        if (e.fromComponent !== e.toComponent) {\n          appointmentDragging.onAdd && appointmentDragging.onAdd(e);\n        }\n      };\n    }\n  }, {\n    key: \"addTo\",\n    value: function (container, config) {\n      var appointmentDragging = this.scheduler.option(\"appointmentDragging\") || {};\n      var options = (0, _extend.extend)({\n        component: this.scheduler,\n        contentTemplate: null,\n        filter: \".\".concat(APPOINTMENT_ITEM_CLASS),\n        immediate: false,\n        onDragStart: this.onDragStart.bind(this),\n        onDragMove: this.onDragMove.bind(this),\n        onDragEnd: this.onDragEnd.bind(this)\n      }, config);\n\n      this.appointments._createComponent(container, _draggable2.default, (0, _extend.extend)({}, options, appointmentDragging, {\n        onDragStart: this.createDragStartHandler(options, appointmentDragging),\n        onDragMove: this.createDragMoveHandler(options, appointmentDragging),\n        onDragEnd: this.createDragEndHandler(options, appointmentDragging),\n        onDrop: this.createDropHandler(appointmentDragging)\n      }));\n    }\n  }, {\n    key: \"moveBack\",\n    value: function () {\n      if (this.currentAppointment && void 0 !== this.initialPosition.left && void 0 !== this.initialPosition.top) {\n        _translator2.default.move(this.currentAppointment, this.initialPosition);\n      }\n    }\n  }]);\n\n  return AppointmentDragBehavior;\n}();\n\nexports.default = AppointmentDragBehavior;\nmodule.exports = AppointmentDragBehavior;","map":{"version":3,"sources":["/Users/tracyvy/Desktop/calendar/client/node_modules/devextreme/ui/scheduler/appointmentDragBehavior.js"],"names":["Object","defineProperty","exports","value","default","_renderer","require","_renderer2","_interopRequireDefault","_draggable","_draggable2","_translator","_translator2","_extend","_position","_constants","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","FIXED_CONTAINER_PROP_NAME","APPOINTMENT_ITEM_CLASS","AppointmentDragBehavior","scheduler","appointments","_appointments","initialPosition","left","top","currentAppointment","appointment","data","allDay","isAllDay","appointmentContainer","_getAppointmentContainer","dragAndDropContainer","option","appointmentContainerRect","getBoundingRect","dragAndDropContainerRect","e","locate","itemElement","notifyObserver","fromComponent","toComponent","event","$appointment","getAppointmentElement","container","append","_getItemData","coordinates","itemData","LIST_ITEM_DATA_KEY","settings","options","appointmentDragging","_this","getItemData","itemSettings","getItemSettings","onDragStart","cancel","onDragMove","onDragEnd","onRemove","_this2","extend","invoke","onAdd","config","component","contentTemplate","filter","concat","immediate","bind","_createComponent","createDragStartHandler","createDragMoveHandler","createDragEndHandler","onDrop","createDropHandler","move","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/appointmentDragBehavior.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nexports.default = void 0;\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _draggable = require(\"../draggable\");\r\nvar _draggable2 = _interopRequireDefault(_draggable);\r\nvar _translator = require(\"../../animation/translator\");\r\nvar _translator2 = _interopRequireDefault(_translator);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _position = require(\"../../core/utils/position\");\r\nvar _constants = require(\"./constants\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\nvar FIXED_CONTAINER_PROP_NAME = \"fixedContainer\";\r\nvar APPOINTMENT_ITEM_CLASS = \"dx-scheduler-appointment\";\r\nvar AppointmentDragBehavior = function() {\r\n    function AppointmentDragBehavior(scheduler) {\r\n        _classCallCheck(this, AppointmentDragBehavior);\r\n        this.scheduler = scheduler;\r\n        this.appointments = scheduler._appointments;\r\n        this.initialPosition = {\r\n            left: 0,\r\n            top: 0\r\n        };\r\n        this.currentAppointment = null\r\n    }\r\n    _createClass(AppointmentDragBehavior, [{\r\n        key: \"isAllDay\",\r\n        value: function(appointment) {\r\n            return appointment.data(\"dxAppointmentSettings\").allDay\r\n        }\r\n    }, {\r\n        key: \"getContainerShift\",\r\n        value: function(isAllDay) {\r\n            var appointmentContainer = this.appointments._getAppointmentContainer(isAllDay);\r\n            var dragAndDropContainer = this.appointments.option(FIXED_CONTAINER_PROP_NAME);\r\n            var appointmentContainerRect = (0, _position.getBoundingRect)(appointmentContainer[0]);\r\n            var dragAndDropContainerRect = (0, _position.getBoundingRect)(dragAndDropContainer[0]);\r\n            return {\r\n                left: appointmentContainerRect.left - dragAndDropContainerRect.left,\r\n                top: appointmentContainerRect.top - dragAndDropContainerRect.top\r\n            }\r\n        }\r\n    }, {\r\n        key: \"onDragStart\",\r\n        value: function(e) {\r\n            this.initialPosition = _translator2.default.locate((0, _renderer2.default)(e.itemElement));\r\n            this.appointments.notifyObserver(\"hideAppointmentTooltip\")\r\n        }\r\n    }, {\r\n        key: \"onDragMove\",\r\n        value: function(e) {\r\n            if (e.fromComponent !== e.toComponent) {\r\n                this.appointments.notifyObserver(\"removeDroppableCellClass\")\r\n            }\r\n        }\r\n    }, {\r\n        key: \"getAppointmentElement\",\r\n        value: function(e) {\r\n            var itemElement = e.event.data && e.event.data.itemElement || e.itemElement;\r\n            return (0, _renderer2.default)(itemElement)\r\n        }\r\n    }, {\r\n        key: \"onDragEnd\",\r\n        value: function(e) {\r\n            var $appointment = this.getAppointmentElement(e);\r\n            var container = this.appointments._getAppointmentContainer(this.isAllDay($appointment));\r\n            container.append($appointment);\r\n            this.currentAppointment = $appointment;\r\n            this.appointments.notifyObserver(\"updateAppointmentAfterDrag\", {\r\n                event: e,\r\n                data: this.appointments._getItemData($appointment),\r\n                $appointment: $appointment,\r\n                coordinates: this.initialPosition\r\n            })\r\n        }\r\n    }, {\r\n        key: \"getItemData\",\r\n        value: function(appointment) {\r\n            var itemData = (0, _renderer2.default)(appointment).data(_constants.LIST_ITEM_DATA_KEY);\r\n            return itemData && itemData.data || this.appointments._getItemData(appointment)\r\n        }\r\n    }, {\r\n        key: \"getItemSettings\",\r\n        value: function(appointment) {\r\n            var itemData = (0, _renderer2.default)(appointment).data(_constants.LIST_ITEM_DATA_KEY);\r\n            return itemData && itemData.settings || []\r\n        }\r\n    }, {\r\n        key: \"createDragStartHandler\",\r\n        value: function(options, appointmentDragging) {\r\n            var _this = this;\r\n            return function(e) {\r\n                e.itemData = _this.getItemData(e.itemElement);\r\n                e.itemSettings = _this.getItemSettings(e.itemElement);\r\n                appointmentDragging.onDragStart && appointmentDragging.onDragStart(e);\r\n                if (!e.cancel) {\r\n                    options.onDragStart(e)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"createDragMoveHandler\",\r\n        value: function(options, appointmentDragging) {\r\n            return function(e) {\r\n                appointmentDragging.onDragMove && appointmentDragging.onDragMove(e);\r\n                if (!e.cancel) {\r\n                    options.onDragMove(e)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"createDragEndHandler\",\r\n        value: function(options, appointmentDragging) {\r\n            return function(e) {\r\n                appointmentDragging.onDragEnd && appointmentDragging.onDragEnd(e);\r\n                if (!e.cancel) {\r\n                    options.onDragEnd(e);\r\n                    if (e.fromComponent !== e.toComponent) {\r\n                        appointmentDragging.onRemove && appointmentDragging.onRemove(e)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"createDropHandler\",\r\n        value: function(appointmentDragging) {\r\n            var _this2 = this;\r\n            return function(e) {\r\n                e.itemData = (0, _extend.extend)({}, e.itemData, _this2.appointments.invoke(\"getUpdatedData\", {\r\n                    data: e.itemData\r\n                }));\r\n                if (e.fromComponent !== e.toComponent) {\r\n                    appointmentDragging.onAdd && appointmentDragging.onAdd(e)\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: \"addTo\",\r\n        value: function(container, config) {\r\n            var appointmentDragging = this.scheduler.option(\"appointmentDragging\") || {};\r\n            var options = (0, _extend.extend)({\r\n                component: this.scheduler,\r\n                contentTemplate: null,\r\n                filter: \".\".concat(APPOINTMENT_ITEM_CLASS),\r\n                immediate: false,\r\n                onDragStart: this.onDragStart.bind(this),\r\n                onDragMove: this.onDragMove.bind(this),\r\n                onDragEnd: this.onDragEnd.bind(this)\r\n            }, config);\r\n            this.appointments._createComponent(container, _draggable2.default, (0, _extend.extend)({}, options, appointmentDragging, {\r\n                onDragStart: this.createDragStartHandler(options, appointmentDragging),\r\n                onDragMove: this.createDragMoveHandler(options, appointmentDragging),\r\n                onDragEnd: this.createDragEndHandler(options, appointmentDragging),\r\n                onDrop: this.createDropHandler(appointmentDragging)\r\n            }))\r\n        }\r\n    }, {\r\n        key: \"moveBack\",\r\n        value: function() {\r\n            if (this.currentAppointment && void 0 !== this.initialPosition.left && void 0 !== this.initialPosition.top) {\r\n                _translator2.default.move(this.currentAppointment, this.initialPosition)\r\n            }\r\n        }\r\n    }]);\r\n    return AppointmentDragBehavior\r\n}();\r\nexports.default = AppointmentDragBehavior;\r\nmodule.exports = AppointmentDragBehavior;\r\n"]},"metadata":{},"sourceType":"script"}