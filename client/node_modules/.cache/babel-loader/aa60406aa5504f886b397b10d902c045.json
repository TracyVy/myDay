{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.appointment_form.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _form = require(\"../form\");\n\nvar _form2 = _interopRequireDefault(_form);\n\nvar _date_serialization = require(\"../../core/utils/date_serialization\");\n\nvar _date_serialization2 = _interopRequireDefault(_date_serialization);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _devices = require(\"../../core/devices\");\n\nvar _devices2 = _interopRequireDefault(_devices);\n\nrequire(\"./ui.scheduler.recurrence_editor\");\n\nrequire(\"./timezones/ui.scheduler.timezone_editor\");\n\nrequire(\"../text_area\");\n\nrequire(\"../tag_box\");\n\nrequire(\"../switch\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar SCREEN_SIZE_OF_SINGLE_COLUMN = 600;\nvar APPOINTMENT_FORM_GROUP_NAMES = {\n  Main: \"mainGroup\",\n  Recurrence: \"recurrenceGroup\"\n};\nvar SchedulerAppointmentForm = {\n  _appointmentForm: {},\n  _lockDateShiftFlag: false,\n  _validateAppointmentFormDate: function _validateAppointmentFormDate(editor, value, previousValue) {\n    var isCurrentDateCorrect = null === value || !!value;\n    var isPreviousDateCorrect = null === previousValue || !!previousValue;\n\n    if (!isCurrentDateCorrect && isPreviousDateCorrect) {\n      editor.option(\"value\", previousValue);\n    }\n  },\n  _getAllDayStartDate: function _getAllDayStartDate(startDate) {\n    return new Date(new Date(startDate).setHours(0, 0, 0, 0));\n  },\n  _getAllDayEndDate: function _getAllDayEndDate(startDate) {\n    return new Date(new Date(startDate).setDate(startDate.getDate() + 1));\n  },\n  _getStartDateWithStartHour: function _getStartDateWithStartHour(startDate, startDayHour) {\n    return new Date(new Date(startDate).setHours(startDayHour));\n  },\n  create: function create(componentCreator, $container, isReadOnly, formData) {\n    this._appointmentForm = componentCreator($container, _form2.default, {\n      items: this._editors,\n      readOnly: isReadOnly,\n      showValidationSummary: true,\n      scrollingEnabled: true,\n      colCount: \"auto\",\n      colCountByScreen: {\n        lg: 2,\n        xs: 1\n      },\n      formData: formData,\n      showColonAfterLabel: false,\n      labelLocation: \"top\",\n      screenByWidth: function screenByWidth(width) {\n        return width < SCREEN_SIZE_OF_SINGLE_COLUMN || \"desktop\" !== _devices2.default.current().deviceType ? \"xs\" : \"lg\";\n      }\n    });\n    return this._appointmentForm;\n  },\n  _dateBoxValueChanged: function _dateBoxValueChanged(args, dateExpr, isNeedCorrect) {\n    this._validateAppointmentFormDate(args.component, args.value, args.previousValue);\n\n    var value = _date_serialization2.default.deserializeDate(args.value);\n\n    var previousValue = _date_serialization2.default.deserializeDate(args.previousValue);\n\n    var dateEditor = this._appointmentForm.getEditor(dateExpr);\n\n    var dateValue = _date_serialization2.default.deserializeDate(dateEditor.option(\"value\"));\n\n    if (!this._appointmentForm._lockDateShiftFlag && dateValue && value && isNeedCorrect(dateValue, value)) {\n      var duration = previousValue ? dateValue.getTime() - previousValue.getTime() : 0;\n      dateEditor.option(\"value\", new Date(value.getTime() + duration));\n    }\n  },\n  _getTimezoneEditor: function _getTimezoneEditor(timeZoneExpr, secondTimeZoneExpr, visibleIndex, colSpan, schedulerInst, isMainTimeZone) {\n    var _this = this;\n\n    var isShow = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : false;\n    return {\n      dataField: timeZoneExpr,\n      editorType: \"dxSchedulerTimezoneEditor\",\n      visibleIndex: visibleIndex,\n      colSpan: colSpan,\n      label: {\n        text: \" \"\n      },\n      editorOptions: {\n        observer: schedulerInst,\n        onValueChanged: function onValueChanged(args) {\n          var form = _this._appointmentForm;\n          var secondTimezoneEditor = form.getEditor(secondTimeZoneExpr);\n\n          if (isMainTimeZone) {\n            secondTimezoneEditor.option(\"value\", args.value);\n          }\n        }\n      },\n      visible: isShow\n    };\n  },\n  _getDateBoxEditor: function _getDateBoxEditor(dataExpr, colSpan, firstDayOfWeek, label, callback) {\n    return {\n      dataField: dataExpr,\n      editorType: \"dxDateBox\",\n      colSpan: colSpan,\n      label: {\n        text: _message2.default.format(label)\n      },\n      validationRules: [{\n        type: \"required\"\n      }],\n      editorOptions: {\n        width: \"100%\",\n        calendarOptions: {\n          firstDayOfWeek: firstDayOfWeek\n        },\n        onValueChanged: callback\n      }\n    };\n  },\n  _getDateBoxItems: function _getDateBoxItems(dataExprs, schedulerInst, allowTimeZoneEditing) {\n    var _this2 = this;\n\n    var colSpan = allowTimeZoneEditing ? 2 : 1;\n    var firstDayOfWeek = schedulerInst.option(\"firstDayOfWeek\");\n    return [this._getDateBoxEditor(dataExprs.startDateExpr, colSpan, firstDayOfWeek, \"dxScheduler-editorLabelStartDate\", function (args) {\n      _this2._dateBoxValueChanged(args, dataExprs.endDateExpr, function (endValue, startValue) {\n        return endValue < startValue;\n      });\n    }), this._getTimezoneEditor(dataExprs.startDateTimeZoneExpr, dataExprs.endDateTimeZoneExpr, 1, colSpan, schedulerInst, true, allowTimeZoneEditing), this._getDateBoxEditor(dataExprs.endDateExpr, colSpan, firstDayOfWeek, \"dxScheduler-editorLabelEndDate\", function (args) {\n      _this2._dateBoxValueChanged(args, dataExprs.startDateExpr, function (startValue, endValue) {\n        return endValue < startValue;\n      });\n    }), this._getTimezoneEditor(dataExprs.endDateTimeZoneExpr, dataExprs.startDateTimeZoneExpr, 3, colSpan, schedulerInst, false, allowTimeZoneEditing)];\n  },\n  _getMainItems: function _getMainItems(dataExprs, schedulerInst, triggerResize, changeSize, allowTimeZoneEditing) {\n    var _this3 = this;\n\n    return [{\n      dataField: dataExprs.textExpr,\n      editorType: \"dxTextBox\",\n      colSpan: 2,\n      label: {\n        text: _message2.default.format(\"dxScheduler-editorLabelTitle\")\n      }\n    }, {\n      itemType: \"group\",\n      colSpan: 2,\n      colCountByScreen: {\n        lg: 2,\n        xs: 1\n      },\n      items: this._getDateBoxItems(dataExprs, schedulerInst, allowTimeZoneEditing)\n    }, {\n      itemType: \"group\",\n      colCountByScreen: {\n        lg: 3,\n        xs: 3\n      },\n      colSpan: 2,\n      items: [{\n        dataField: dataExprs.allDayExpr,\n        cssClass: \"dx-appointment-form-switch\",\n        editorType: \"dxSwitch\",\n        label: {\n          text: _message2.default.format(\"dxScheduler-allDay\"),\n          location: \"right\"\n        },\n        editorOptions: {\n          onValueChanged: function onValueChanged(args) {\n            var value = args.value;\n\n            var startDateEditor = _this3._appointmentForm.getEditor(dataExprs.startDateExpr);\n\n            var endDateEditor = _this3._appointmentForm.getEditor(dataExprs.endDateExpr);\n\n            var startDate = _date_serialization2.default.deserializeDate(startDateEditor.option(\"value\"));\n\n            if (!_this3._appointmentForm._lockDateShiftFlag && startDate) {\n              if (value) {\n                var allDayStartDate = _this3._getAllDayStartDate(startDate);\n\n                startDateEditor.option(\"value\", allDayStartDate);\n                endDateEditor.option(\"value\", _this3._getAllDayEndDate(allDayStartDate));\n              } else {\n                var startDateWithStartHour = _this3._getStartDateWithStartHour(startDate, schedulerInst.option(\"startDayHour\"));\n\n                var endDate = schedulerInst._workSpace.calculateEndDate(startDateWithStartHour);\n\n                startDateEditor.option(\"value\", startDateWithStartHour);\n                endDateEditor.option(\"value\", endDate);\n              }\n            }\n\n            startDateEditor.option(\"type\", value ? \"date\" : \"datetime\");\n            endDateEditor.option(\"type\", value ? \"date\" : \"datetime\");\n          }\n        }\n      }, {\n        editorType: \"dxSwitch\",\n        dataField: \"repeat\",\n        cssClass: \"dx-appointment-form-switch\",\n        name: \"visibilityChanged\",\n        label: {\n          text: _message2.default.format(\"dxScheduler-editorLabelRecurrence\"),\n          location: \"right\"\n        },\n        editorOptions: {\n          onValueChanged: function onValueChanged(args) {\n            var form = _this3._appointmentForm;\n            var colSpan = args.value ? 1 : 2;\n            form.itemOption(APPOINTMENT_FORM_GROUP_NAMES.Main, \"colSpan\", colSpan);\n            form.itemOption(APPOINTMENT_FORM_GROUP_NAMES.Recurrence, \"colSpan\", colSpan);\n\n            _this3._updateRecurrenceItemVisibility(dataExprs.recurrenceRuleExpr, args.value, form);\n\n            changeSize(args.value);\n            triggerResize();\n          }\n        }\n      }]\n    }, {\n      itemType: \"empty\",\n      colSpan: 2\n    }, {\n      dataField: dataExprs.descriptionExpr,\n      editorType: \"dxTextArea\",\n      colSpan: 2,\n      label: {\n        text: _message2.default.format(\"dxScheduler-editorLabelDescription\")\n      }\n    }, {\n      itemType: \"empty\",\n      colSpan: 2\n    }];\n  },\n  _updateRecurrenceItemVisibility: function _updateRecurrenceItemVisibility(recurrenceRuleExpr, value, form) {\n    var _form$getEditor;\n\n    form.itemOption(APPOINTMENT_FORM_GROUP_NAMES.Recurrence, \"visible\", value);\n    !value && form.updateData(recurrenceRuleExpr, \"\");\n    null === (_form$getEditor = form.getEditor(recurrenceRuleExpr)) || void 0 === _form$getEditor ? void 0 : _form$getEditor.changeValueByVisibility(value);\n  },\n  prepareAppointmentFormEditors: function prepareAppointmentFormEditors(dataExprs, schedulerInst, triggerResize, changeSize, appointmentData, allowTimeZoneEditing, readOnly) {\n    var recurrenceEditorVisibility = !!this.getRecurrenceRule(appointmentData, dataExprs);\n    changeSize(recurrenceEditorVisibility);\n    this._editors = [{\n      itemType: \"group\",\n      name: APPOINTMENT_FORM_GROUP_NAMES.Main,\n      colCountByScreen: {\n        lg: 2,\n        xs: 1\n      },\n      colSpan: recurrenceEditorVisibility ? 1 : 2,\n      items: this._getMainItems(dataExprs, schedulerInst, triggerResize, changeSize, allowTimeZoneEditing)\n    }, {\n      itemType: \"group\",\n      name: APPOINTMENT_FORM_GROUP_NAMES.Recurrence,\n      visible: recurrenceEditorVisibility,\n      colSpan: recurrenceEditorVisibility ? 1 : 2,\n      items: this._createRecurrenceEditor(dataExprs, schedulerInst, recurrenceEditorVisibility, readOnly)\n    }];\n    return this._editors;\n  },\n  _createRecurrenceEditor: function _createRecurrenceEditor(dataExprs, schedulerInst, recurrenceEditorVisibility, readOnly) {\n    return [{\n      dataField: dataExprs.recurrenceRuleExpr,\n      editorType: \"dxRecurrenceEditor\",\n      editorOptions: {\n        readOnly: readOnly,\n        firstDayOfWeek: schedulerInst.option(\"firstDayOfWeek\")\n      },\n      label: {\n        text: \" \",\n        visible: false\n      }\n    }];\n  },\n  getRecurrenceRule: function getRecurrenceRule(data, dataExprs) {\n    return data[dataExprs.recurrenceRuleExpr];\n  },\n  concatResources: function concatResources(resources) {\n    this._editors[0].items = this._editors[0].items.concat(resources);\n  },\n  setEditorsType: function setEditorsType(form, startDateExpr, endDateExpr, allDay) {\n    var startDateItemPath = \"\".concat(APPOINTMENT_FORM_GROUP_NAMES.Main, \".\").concat(startDateExpr);\n    var endDateItemPath = \"\".concat(APPOINTMENT_FORM_GROUP_NAMES.Recurrence, \".\").concat(endDateExpr);\n    var startDateFormItem = form.itemOption(startDateItemPath);\n    var endDateFormItem = form.itemOption(endDateItemPath);\n\n    if (startDateFormItem && endDateFormItem) {\n      var startDateEditorOptions = startDateFormItem.editorOptions;\n      var endDateEditorOptions = endDateFormItem.editorOptions;\n      startDateEditorOptions.type = endDateEditorOptions.type = allDay ? \"date\" : \"datetime\";\n      form.itemOption(startDateItemPath, \"editorOptions\", startDateEditorOptions);\n      form.itemOption(endDateItemPath, \"editorOptions\", endDateEditorOptions);\n    }\n  },\n  updateFormData: function updateFormData(appointmentForm, formData) {\n    appointmentForm._lockDateShiftFlag = true;\n    appointmentForm.option(\"formData\", formData);\n    appointmentForm._lockDateShiftFlag = false;\n  }\n};\nmodule.exports = {\n  AppointmentForm: SchedulerAppointmentForm,\n  APPOINTMENT_FORM_GROUP_NAMES: APPOINTMENT_FORM_GROUP_NAMES\n};","map":{"version":3,"sources":["/Users/tracyvy/Desktop/UCB_Coding_Bootcamp/project_3/calendar/client/node_modules/devextreme/ui/scheduler/ui.scheduler.appointment_form.js"],"names":["_form","require","_form2","_interopRequireDefault","_date_serialization","_date_serialization2","_message","_message2","_devices","_devices2","obj","__esModule","SCREEN_SIZE_OF_SINGLE_COLUMN","APPOINTMENT_FORM_GROUP_NAMES","Main","Recurrence","SchedulerAppointmentForm","_appointmentForm","_lockDateShiftFlag","_validateAppointmentFormDate","editor","value","previousValue","isCurrentDateCorrect","isPreviousDateCorrect","option","_getAllDayStartDate","startDate","Date","setHours","_getAllDayEndDate","setDate","getDate","_getStartDateWithStartHour","startDayHour","create","componentCreator","$container","isReadOnly","formData","default","items","_editors","readOnly","showValidationSummary","scrollingEnabled","colCount","colCountByScreen","lg","xs","showColonAfterLabel","labelLocation","screenByWidth","width","current","deviceType","_dateBoxValueChanged","args","dateExpr","isNeedCorrect","component","deserializeDate","dateEditor","getEditor","dateValue","duration","getTime","_getTimezoneEditor","timeZoneExpr","secondTimeZoneExpr","visibleIndex","colSpan","schedulerInst","isMainTimeZone","_this","isShow","arguments","length","dataField","editorType","label","text","editorOptions","observer","onValueChanged","form","secondTimezoneEditor","visible","_getDateBoxEditor","dataExpr","firstDayOfWeek","callback","format","validationRules","type","calendarOptions","_getDateBoxItems","dataExprs","allowTimeZoneEditing","_this2","startDateExpr","endDateExpr","endValue","startValue","startDateTimeZoneExpr","endDateTimeZoneExpr","_getMainItems","triggerResize","changeSize","_this3","textExpr","itemType","allDayExpr","cssClass","location","startDateEditor","endDateEditor","allDayStartDate","startDateWithStartHour","endDate","_workSpace","calculateEndDate","name","itemOption","_updateRecurrenceItemVisibility","recurrenceRuleExpr","descriptionExpr","_form$getEditor","updateData","changeValueByVisibility","prepareAppointmentFormEditors","appointmentData","recurrenceEditorVisibility","getRecurrenceRule","_createRecurrenceEditor","data","concatResources","resources","concat","setEditorsType","allDay","startDateItemPath","endDateItemPath","startDateFormItem","endDateFormItem","startDateEditorOptions","endDateEditorOptions","updateFormData","appointmentForm","module","exports","AppointmentForm"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.appointment_form.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _form = require(\"../form\");\r\nvar _form2 = _interopRequireDefault(_form);\r\nvar _date_serialization = require(\"../../core/utils/date_serialization\");\r\nvar _date_serialization2 = _interopRequireDefault(_date_serialization);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _devices = require(\"../../core/devices\");\r\nvar _devices2 = _interopRequireDefault(_devices);\r\nrequire(\"./ui.scheduler.recurrence_editor\");\r\nrequire(\"./timezones/ui.scheduler.timezone_editor\");\r\nrequire(\"../text_area\");\r\nrequire(\"../tag_box\");\r\nrequire(\"../switch\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar SCREEN_SIZE_OF_SINGLE_COLUMN = 600;\r\nvar APPOINTMENT_FORM_GROUP_NAMES = {\r\n    Main: \"mainGroup\",\r\n    Recurrence: \"recurrenceGroup\"\r\n};\r\nvar SchedulerAppointmentForm = {\r\n    _appointmentForm: {},\r\n    _lockDateShiftFlag: false,\r\n    _validateAppointmentFormDate: function(editor, value, previousValue) {\r\n        var isCurrentDateCorrect = null === value || !!value;\r\n        var isPreviousDateCorrect = null === previousValue || !!previousValue;\r\n        if (!isCurrentDateCorrect && isPreviousDateCorrect) {\r\n            editor.option(\"value\", previousValue)\r\n        }\r\n    },\r\n    _getAllDayStartDate: function(startDate) {\r\n        return new Date(new Date(startDate).setHours(0, 0, 0, 0))\r\n    },\r\n    _getAllDayEndDate: function(startDate) {\r\n        return new Date(new Date(startDate).setDate(startDate.getDate() + 1))\r\n    },\r\n    _getStartDateWithStartHour: function(startDate, startDayHour) {\r\n        return new Date(new Date(startDate).setHours(startDayHour))\r\n    },\r\n    create: function(componentCreator, $container, isReadOnly, formData) {\r\n        this._appointmentForm = componentCreator($container, _form2.default, {\r\n            items: this._editors,\r\n            readOnly: isReadOnly,\r\n            showValidationSummary: true,\r\n            scrollingEnabled: true,\r\n            colCount: \"auto\",\r\n            colCountByScreen: {\r\n                lg: 2,\r\n                xs: 1\r\n            },\r\n            formData: formData,\r\n            showColonAfterLabel: false,\r\n            labelLocation: \"top\",\r\n            screenByWidth: function(width) {\r\n                return width < SCREEN_SIZE_OF_SINGLE_COLUMN || \"desktop\" !== _devices2.default.current().deviceType ? \"xs\" : \"lg\"\r\n            }\r\n        });\r\n        return this._appointmentForm\r\n    },\r\n    _dateBoxValueChanged: function(args, dateExpr, isNeedCorrect) {\r\n        this._validateAppointmentFormDate(args.component, args.value, args.previousValue);\r\n        var value = _date_serialization2.default.deserializeDate(args.value);\r\n        var previousValue = _date_serialization2.default.deserializeDate(args.previousValue);\r\n        var dateEditor = this._appointmentForm.getEditor(dateExpr);\r\n        var dateValue = _date_serialization2.default.deserializeDate(dateEditor.option(\"value\"));\r\n        if (!this._appointmentForm._lockDateShiftFlag && dateValue && value && isNeedCorrect(dateValue, value)) {\r\n            var duration = previousValue ? dateValue.getTime() - previousValue.getTime() : 0;\r\n            dateEditor.option(\"value\", new Date(value.getTime() + duration))\r\n        }\r\n    },\r\n    _getTimezoneEditor: function(timeZoneExpr, secondTimeZoneExpr, visibleIndex, colSpan, schedulerInst, isMainTimeZone) {\r\n        var _this = this;\r\n        var isShow = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : false;\r\n        return {\r\n            dataField: timeZoneExpr,\r\n            editorType: \"dxSchedulerTimezoneEditor\",\r\n            visibleIndex: visibleIndex,\r\n            colSpan: colSpan,\r\n            label: {\r\n                text: \" \"\r\n            },\r\n            editorOptions: {\r\n                observer: schedulerInst,\r\n                onValueChanged: function(args) {\r\n                    var form = _this._appointmentForm;\r\n                    var secondTimezoneEditor = form.getEditor(secondTimeZoneExpr);\r\n                    if (isMainTimeZone) {\r\n                        secondTimezoneEditor.option(\"value\", args.value)\r\n                    }\r\n                }\r\n            },\r\n            visible: isShow\r\n        }\r\n    },\r\n    _getDateBoxEditor: function(dataExpr, colSpan, firstDayOfWeek, label, callback) {\r\n        return {\r\n            dataField: dataExpr,\r\n            editorType: \"dxDateBox\",\r\n            colSpan: colSpan,\r\n            label: {\r\n                text: _message2.default.format(label)\r\n            },\r\n            validationRules: [{\r\n                type: \"required\"\r\n            }],\r\n            editorOptions: {\r\n                width: \"100%\",\r\n                calendarOptions: {\r\n                    firstDayOfWeek: firstDayOfWeek\r\n                },\r\n                onValueChanged: callback\r\n            }\r\n        }\r\n    },\r\n    _getDateBoxItems: function(dataExprs, schedulerInst, allowTimeZoneEditing) {\r\n        var _this2 = this;\r\n        var colSpan = allowTimeZoneEditing ? 2 : 1;\r\n        var firstDayOfWeek = schedulerInst.option(\"firstDayOfWeek\");\r\n        return [this._getDateBoxEditor(dataExprs.startDateExpr, colSpan, firstDayOfWeek, \"dxScheduler-editorLabelStartDate\", function(args) {\r\n            _this2._dateBoxValueChanged(args, dataExprs.endDateExpr, function(endValue, startValue) {\r\n                return endValue < startValue\r\n            })\r\n        }), this._getTimezoneEditor(dataExprs.startDateTimeZoneExpr, dataExprs.endDateTimeZoneExpr, 1, colSpan, schedulerInst, true, allowTimeZoneEditing), this._getDateBoxEditor(dataExprs.endDateExpr, colSpan, firstDayOfWeek, \"dxScheduler-editorLabelEndDate\", function(args) {\r\n            _this2._dateBoxValueChanged(args, dataExprs.startDateExpr, function(startValue, endValue) {\r\n                return endValue < startValue\r\n            })\r\n        }), this._getTimezoneEditor(dataExprs.endDateTimeZoneExpr, dataExprs.startDateTimeZoneExpr, 3, colSpan, schedulerInst, false, allowTimeZoneEditing)]\r\n    },\r\n    _getMainItems: function(dataExprs, schedulerInst, triggerResize, changeSize, allowTimeZoneEditing) {\r\n        var _this3 = this;\r\n        return [{\r\n            dataField: dataExprs.textExpr,\r\n            editorType: \"dxTextBox\",\r\n            colSpan: 2,\r\n            label: {\r\n                text: _message2.default.format(\"dxScheduler-editorLabelTitle\")\r\n            }\r\n        }, {\r\n            itemType: \"group\",\r\n            colSpan: 2,\r\n            colCountByScreen: {\r\n                lg: 2,\r\n                xs: 1\r\n            },\r\n            items: this._getDateBoxItems(dataExprs, schedulerInst, allowTimeZoneEditing)\r\n        }, {\r\n            itemType: \"group\",\r\n            colCountByScreen: {\r\n                lg: 3,\r\n                xs: 3\r\n            },\r\n            colSpan: 2,\r\n            items: [{\r\n                dataField: dataExprs.allDayExpr,\r\n                cssClass: \"dx-appointment-form-switch\",\r\n                editorType: \"dxSwitch\",\r\n                label: {\r\n                    text: _message2.default.format(\"dxScheduler-allDay\"),\r\n                    location: \"right\"\r\n                },\r\n                editorOptions: {\r\n                    onValueChanged: function(args) {\r\n                        var value = args.value;\r\n                        var startDateEditor = _this3._appointmentForm.getEditor(dataExprs.startDateExpr);\r\n                        var endDateEditor = _this3._appointmentForm.getEditor(dataExprs.endDateExpr);\r\n                        var startDate = _date_serialization2.default.deserializeDate(startDateEditor.option(\"value\"));\r\n                        if (!_this3._appointmentForm._lockDateShiftFlag && startDate) {\r\n                            if (value) {\r\n                                var allDayStartDate = _this3._getAllDayStartDate(startDate);\r\n                                startDateEditor.option(\"value\", allDayStartDate);\r\n                                endDateEditor.option(\"value\", _this3._getAllDayEndDate(allDayStartDate))\r\n                            } else {\r\n                                var startDateWithStartHour = _this3._getStartDateWithStartHour(startDate, schedulerInst.option(\"startDayHour\"));\r\n                                var endDate = schedulerInst._workSpace.calculateEndDate(startDateWithStartHour);\r\n                                startDateEditor.option(\"value\", startDateWithStartHour);\r\n                                endDateEditor.option(\"value\", endDate)\r\n                            }\r\n                        }\r\n                        startDateEditor.option(\"type\", value ? \"date\" : \"datetime\");\r\n                        endDateEditor.option(\"type\", value ? \"date\" : \"datetime\")\r\n                    }\r\n                }\r\n            }, {\r\n                editorType: \"dxSwitch\",\r\n                dataField: \"repeat\",\r\n                cssClass: \"dx-appointment-form-switch\",\r\n                name: \"visibilityChanged\",\r\n                label: {\r\n                    text: _message2.default.format(\"dxScheduler-editorLabelRecurrence\"),\r\n                    location: \"right\"\r\n                },\r\n                editorOptions: {\r\n                    onValueChanged: function(args) {\r\n                        var form = _this3._appointmentForm;\r\n                        var colSpan = args.value ? 1 : 2;\r\n                        form.itemOption(APPOINTMENT_FORM_GROUP_NAMES.Main, \"colSpan\", colSpan);\r\n                        form.itemOption(APPOINTMENT_FORM_GROUP_NAMES.Recurrence, \"colSpan\", colSpan);\r\n                        _this3._updateRecurrenceItemVisibility(dataExprs.recurrenceRuleExpr, args.value, form);\r\n                        changeSize(args.value);\r\n                        triggerResize()\r\n                    }\r\n                }\r\n            }]\r\n        }, {\r\n            itemType: \"empty\",\r\n            colSpan: 2\r\n        }, {\r\n            dataField: dataExprs.descriptionExpr,\r\n            editorType: \"dxTextArea\",\r\n            colSpan: 2,\r\n            label: {\r\n                text: _message2.default.format(\"dxScheduler-editorLabelDescription\")\r\n            }\r\n        }, {\r\n            itemType: \"empty\",\r\n            colSpan: 2\r\n        }]\r\n    },\r\n    _updateRecurrenceItemVisibility: function(recurrenceRuleExpr, value, form) {\r\n        var _form$getEditor;\r\n        form.itemOption(APPOINTMENT_FORM_GROUP_NAMES.Recurrence, \"visible\", value);\r\n        !value && form.updateData(recurrenceRuleExpr, \"\");\r\n        null === (_form$getEditor = form.getEditor(recurrenceRuleExpr)) || void 0 === _form$getEditor ? void 0 : _form$getEditor.changeValueByVisibility(value)\r\n    },\r\n    prepareAppointmentFormEditors: function(dataExprs, schedulerInst, triggerResize, changeSize, appointmentData, allowTimeZoneEditing, readOnly) {\r\n        var recurrenceEditorVisibility = !!this.getRecurrenceRule(appointmentData, dataExprs);\r\n        changeSize(recurrenceEditorVisibility);\r\n        this._editors = [{\r\n            itemType: \"group\",\r\n            name: APPOINTMENT_FORM_GROUP_NAMES.Main,\r\n            colCountByScreen: {\r\n                lg: 2,\r\n                xs: 1\r\n            },\r\n            colSpan: recurrenceEditorVisibility ? 1 : 2,\r\n            items: this._getMainItems(dataExprs, schedulerInst, triggerResize, changeSize, allowTimeZoneEditing)\r\n        }, {\r\n            itemType: \"group\",\r\n            name: APPOINTMENT_FORM_GROUP_NAMES.Recurrence,\r\n            visible: recurrenceEditorVisibility,\r\n            colSpan: recurrenceEditorVisibility ? 1 : 2,\r\n            items: this._createRecurrenceEditor(dataExprs, schedulerInst, recurrenceEditorVisibility, readOnly)\r\n        }];\r\n        return this._editors\r\n    },\r\n    _createRecurrenceEditor: function(dataExprs, schedulerInst, recurrenceEditorVisibility, readOnly) {\r\n        return [{\r\n            dataField: dataExprs.recurrenceRuleExpr,\r\n            editorType: \"dxRecurrenceEditor\",\r\n            editorOptions: {\r\n                readOnly: readOnly,\r\n                firstDayOfWeek: schedulerInst.option(\"firstDayOfWeek\")\r\n            },\r\n            label: {\r\n                text: \" \",\r\n                visible: false\r\n            }\r\n        }]\r\n    },\r\n    getRecurrenceRule: function(data, dataExprs) {\r\n        return data[dataExprs.recurrenceRuleExpr]\r\n    },\r\n    concatResources: function(resources) {\r\n        this._editors[0].items = this._editors[0].items.concat(resources)\r\n    },\r\n    setEditorsType: function(form, startDateExpr, endDateExpr, allDay) {\r\n        var startDateItemPath = \"\".concat(APPOINTMENT_FORM_GROUP_NAMES.Main, \".\").concat(startDateExpr);\r\n        var endDateItemPath = \"\".concat(APPOINTMENT_FORM_GROUP_NAMES.Recurrence, \".\").concat(endDateExpr);\r\n        var startDateFormItem = form.itemOption(startDateItemPath);\r\n        var endDateFormItem = form.itemOption(endDateItemPath);\r\n        if (startDateFormItem && endDateFormItem) {\r\n            var startDateEditorOptions = startDateFormItem.editorOptions;\r\n            var endDateEditorOptions = endDateFormItem.editorOptions;\r\n            startDateEditorOptions.type = endDateEditorOptions.type = allDay ? \"date\" : \"datetime\";\r\n            form.itemOption(startDateItemPath, \"editorOptions\", startDateEditorOptions);\r\n            form.itemOption(endDateItemPath, \"editorOptions\", endDateEditorOptions)\r\n        }\r\n    },\r\n    updateFormData: function(appointmentForm, formData) {\r\n        appointmentForm._lockDateShiftFlag = true;\r\n        appointmentForm.option(\"formData\", formData);\r\n        appointmentForm._lockDateShiftFlag = false\r\n    }\r\n};\r\nmodule.exports = {\r\n    AppointmentForm: SchedulerAppointmentForm,\r\n    APPOINTMENT_FORM_GROUP_NAMES: APPOINTMENT_FORM_GROUP_NAMES\r\n};\r\n"]},"metadata":{},"sourceType":"script"}