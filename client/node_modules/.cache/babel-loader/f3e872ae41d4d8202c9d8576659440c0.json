{"ast":null,"code":"/**\r\n * DevExtreme (data/proxy_url_formatter.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar each = require(\"../core/utils/iterator\").each;\n\nvar domAdapter = require(\"../core/dom_adapter\");\n\nvar window = require(\"../core/utils/window\").getWindow();\n\nvar callOnce = require(\"../core/utils/call_once\");\n\nvar DXPROXY_HOST = \"dxproxy.devexpress.com:8000\";\nvar urlMapping = {};\nvar getUrlParser = callOnce(function () {\n  var a = domAdapter.createElement(\"a\");\n  var props = [\"protocol\", \"hostname\", \"port\", \"pathname\", \"search\", \"hash\"];\n\n  var normalizePath = function (value) {\n    if (\"/\" !== value.charAt(0)) {\n      value = \"/\" + value;\n    }\n\n    return value;\n  };\n\n  return function (url) {\n    a.href = url;\n    var result = {};\n    each(props, function () {\n      result[this] = a[this];\n    });\n    result.pathname = normalizePath(result.pathname);\n    return result;\n  };\n});\n\nvar parseUrl = function (url) {\n  var urlParser = getUrlParser();\n  return urlParser(url);\n};\n\nvar extractProxyAppId = function () {\n  return window.location.pathname.split(\"/\")[1];\n};\n\nmodule.exports = {\n  parseUrl: parseUrl,\n  isProxyUsed: function () {\n    return window.location.host === DXPROXY_HOST;\n  },\n  formatProxyUrl: function (localUrl) {\n    var urlData = parseUrl(localUrl);\n\n    if (!/^(localhost$|127\\.)/i.test(urlData.hostname)) {\n      return localUrl;\n    }\n\n    var proxyUrlPart = DXPROXY_HOST + \"/\" + extractProxyAppId() + \"_\" + urlData.port;\n    urlMapping[proxyUrlPart] = urlData.hostname + \":\" + urlData.port;\n    var resultUrl = \"http://\" + proxyUrlPart + urlData.pathname + urlData.search;\n    return resultUrl;\n  },\n  formatLocalUrl: function (proxyUrl) {\n    if (proxyUrl.indexOf(DXPROXY_HOST) < 0) {\n      return proxyUrl;\n    }\n\n    var resultUrl = proxyUrl;\n\n    for (var proxyUrlPart in urlMapping) {\n      if (Object.prototype.hasOwnProperty.call(urlMapping, proxyUrlPart)) {\n        if (proxyUrl.indexOf(proxyUrlPart) >= 0) {\n          resultUrl = proxyUrl.replace(proxyUrlPart, urlMapping[proxyUrlPart]);\n          break;\n        }\n      }\n    }\n\n    return resultUrl;\n  }\n};","map":{"version":3,"sources":["/Users/tracyvy/Desktop/calendar/client/node_modules/devextreme/data/proxy_url_formatter.js"],"names":["each","require","domAdapter","window","getWindow","callOnce","DXPROXY_HOST","urlMapping","getUrlParser","a","createElement","props","normalizePath","value","charAt","url","href","result","pathname","parseUrl","urlParser","extractProxyAppId","location","split","module","exports","isProxyUsed","host","formatProxyUrl","localUrl","urlData","test","hostname","proxyUrlPart","port","resultUrl","search","formatLocalUrl","proxyUrl","indexOf","Object","prototype","hasOwnProperty","call","replace"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (data/proxy_url_formatter.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar each = require(\"../core/utils/iterator\").each;\r\nvar domAdapter = require(\"../core/dom_adapter\");\r\nvar window = require(\"../core/utils/window\").getWindow();\r\nvar callOnce = require(\"../core/utils/call_once\");\r\nvar DXPROXY_HOST = \"dxproxy.devexpress.com:8000\";\r\nvar urlMapping = {};\r\nvar getUrlParser = callOnce(function() {\r\n    var a = domAdapter.createElement(\"a\");\r\n    var props = [\"protocol\", \"hostname\", \"port\", \"pathname\", \"search\", \"hash\"];\r\n    var normalizePath = function(value) {\r\n        if (\"/\" !== value.charAt(0)) {\r\n            value = \"/\" + value\r\n        }\r\n        return value\r\n    };\r\n    return function(url) {\r\n        a.href = url;\r\n        var result = {};\r\n        each(props, function() {\r\n            result[this] = a[this]\r\n        });\r\n        result.pathname = normalizePath(result.pathname);\r\n        return result\r\n    }\r\n});\r\nvar parseUrl = function(url) {\r\n    var urlParser = getUrlParser();\r\n    return urlParser(url)\r\n};\r\nvar extractProxyAppId = function() {\r\n    return window.location.pathname.split(\"/\")[1]\r\n};\r\nmodule.exports = {\r\n    parseUrl: parseUrl,\r\n    isProxyUsed: function() {\r\n        return window.location.host === DXPROXY_HOST\r\n    },\r\n    formatProxyUrl: function(localUrl) {\r\n        var urlData = parseUrl(localUrl);\r\n        if (!/^(localhost$|127\\.)/i.test(urlData.hostname)) {\r\n            return localUrl\r\n        }\r\n        var proxyUrlPart = DXPROXY_HOST + \"/\" + extractProxyAppId() + \"_\" + urlData.port;\r\n        urlMapping[proxyUrlPart] = urlData.hostname + \":\" + urlData.port;\r\n        var resultUrl = \"http://\" + proxyUrlPart + urlData.pathname + urlData.search;\r\n        return resultUrl\r\n    },\r\n    formatLocalUrl: function(proxyUrl) {\r\n        if (proxyUrl.indexOf(DXPROXY_HOST) < 0) {\r\n            return proxyUrl\r\n        }\r\n        var resultUrl = proxyUrl;\r\n        for (var proxyUrlPart in urlMapping) {\r\n            if (Object.prototype.hasOwnProperty.call(urlMapping, proxyUrlPart)) {\r\n                if (proxyUrl.indexOf(proxyUrlPart) >= 0) {\r\n                    resultUrl = proxyUrl.replace(proxyUrlPart, urlMapping[proxyUrlPart]);\r\n                    break\r\n                }\r\n            }\r\n        }\r\n        return resultUrl\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}