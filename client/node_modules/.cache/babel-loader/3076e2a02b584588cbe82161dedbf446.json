{"ast":null,"code":"/**\r\n * DevExtreme (data/odata/utils.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OData__internals = exports.escapeServiceOperationParams = exports.formatFunctionInvocationUrl = exports.generateExpand = exports.generateSelect = exports.convertPrimitiveValue = exports.keyConverters = exports.serializeKey = exports.serializeValue = exports.serializePropName = exports.EdmLiteral = exports.sendRequest = void 0;\n\nvar _class = require(\"../../core/class\");\n\nvar _class2 = _interopRequireDefault(_class);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _ajax = require(\"../../core/utils/ajax\");\n\nvar _ajax2 = _interopRequireDefault(_ajax);\n\nvar _guid = require(\"../../core/guid\");\n\nvar _guid2 = _interopRequireDefault(_guid);\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _errors = require(\"../errors\");\n\nvar _utils = require(\"../utils\");\n\nvar _string = require(\"../../core/utils/string\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar GUID_REGEX = /^(\\{{0,1}([0-9a-fA-F]){8}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){12}\\}{0,1})$/;\nvar VERBOSE_DATE_REGEX = /^\\/Date\\((-?\\d+)((\\+|-)?(\\d+)?)\\)\\/$/;\nvar ISO8601_DATE_REGEX = /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(Z|[-+]{1}\\d{2}(:?)(\\d{2})?)?$/;\nvar JSON_VERBOSE_MIME_TYPE = \"application/json;odata=verbose\";\n\nvar makeArray = function (value) {\n  return \"string\" === (0, _type.type)(value) ? value.split() : value;\n};\n\nvar hasDot = function (x) {\n  return /\\./.test(x);\n};\n\nvar pad = function (text, length, right) {\n  text = String(text);\n\n  while (text.length < length) {\n    text = right ? \"\".concat(text, \"0\") : \"0\".concat(text);\n  }\n\n  return text;\n};\n\nvar formatISO8601 = function (date, skipZeroTime, skipTimezone) {\n  var bag = [];\n\n  var isZeroTime = function () {\n    return date.getHours() + date.getMinutes() + date.getSeconds() + date.getMilliseconds() < 1;\n  };\n\n  var padLeft2 = function (text) {\n    return pad(text, 2);\n  };\n\n  bag.push(date.getFullYear());\n  bag.push(\"-\");\n  bag.push(padLeft2(date.getMonth() + 1));\n  bag.push(\"-\");\n  bag.push(padLeft2(date.getDate()));\n\n  if (!(skipZeroTime && isZeroTime())) {\n    bag.push(\"T\");\n    bag.push(padLeft2(date.getHours()));\n    bag.push(\":\");\n    bag.push(padLeft2(date.getMinutes()));\n    bag.push(\":\");\n    bag.push(padLeft2(date.getSeconds()));\n\n    if (date.getMilliseconds()) {\n      bag.push(\".\");\n      bag.push(pad(date.getMilliseconds(), 3));\n    }\n\n    if (!skipTimezone) {\n      bag.push(\"Z\");\n    }\n  }\n\n  return bag.join(\"\");\n};\n\nvar parseISO8601 = function (isoString) {\n  var result = new Date(60 * new Date(0).getTimezoneOffset() * 1e3);\n  var chunks = isoString.replace(\"Z\", \"\").split(\"T\");\n  var date = /(\\d{4})-(\\d{2})-(\\d{2})/.exec(chunks[0]);\n  var time = /(\\d{2}):(\\d{2}):(\\d{2})\\.?(\\d{0,7})?/.exec(chunks[1]);\n  result.setFullYear(Number(date[1]));\n  result.setMonth(Number(date[2]) - 1);\n  result.setDate(Number(date[3]));\n\n  if (Array.isArray(time) && time.length) {\n    result.setHours(Number(time[1]));\n    result.setMinutes(Number(time[2]));\n    result.setSeconds(Number(time[3]));\n    var fractional = (time[4] || \"\").slice(0, 3);\n    fractional = pad(fractional, 3, true);\n    result.setMilliseconds(Number(fractional));\n  }\n\n  return result;\n};\n\nvar isAbsoluteUrl = function (url) {\n  return /^(?:[a-z]+:)?\\/\\//i.test(url);\n};\n\nvar stripParams = function (url) {\n  var index = url.indexOf(\"?\");\n\n  if (index > -1) {\n    return url.substr(0, index);\n  }\n\n  return url;\n};\n\nvar toAbsoluteUrl = function (basePath, relativePath) {\n  var part;\n  var baseParts = stripParams(basePath).split(\"/\");\n  var relativeParts = relativePath.split(\"/\");\n  baseParts.pop();\n\n  while (relativeParts.length) {\n    part = relativeParts.shift();\n\n    if (\"..\" === part) {\n      baseParts.pop();\n    } else {\n      baseParts.push(part);\n    }\n  }\n\n  return baseParts.join(\"/\");\n};\n\nvar param = function (params) {\n  var result = [];\n\n  for (var name in params) {\n    result.push(name + \"=\" + params[name]);\n  }\n\n  return result.join(\"&\");\n};\n\nvar ajaxOptionsForRequest = function (protocolVersion, request) {\n  var _options$beforeSend;\n\n  var options = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\n\n  var formatPayload = function (payload) {\n    return JSON.stringify(payload, function (key, value) {\n      if (!(this[key] instanceof Date)) {\n        return value;\n      }\n\n      value = formatISO8601(this[key]);\n\n      switch (protocolVersion) {\n        case 2:\n          return value.substr(0, value.length - 1);\n\n        case 3:\n        case 4:\n          return value;\n\n        default:\n          throw _errors.errors.Error(\"E4002\");\n      }\n    });\n  };\n\n  request = (0, _extend.extend)({\n    async: true,\n    method: \"get\",\n    url: \"\",\n    params: {},\n    payload: null,\n    headers: {},\n    timeout: 3e4\n  }, request);\n  null === (_options$beforeSend = options.beforeSend) || void 0 === _options$beforeSend ? void 0 : _options$beforeSend.call(options, request);\n  var _request = request,\n      async = _request.async,\n      timeout = _request.timeout,\n      headers = _request.headers;\n  var _request2 = request,\n      url = _request2.url,\n      method = _request2.method;\n  var jsonp = options.jsonp,\n      withCredentials = options.withCredentials;\n  method = (method || \"get\").toLowerCase();\n  var isGet = \"get\" === method;\n  var useJsonp = isGet && jsonp;\n  var params = (0, _extend.extend)({}, request.params);\n  var ajaxData = isGet ? params : formatPayload(request.payload);\n  var qs = !isGet && param(params);\n  var contentType = !isGet && JSON_VERBOSE_MIME_TYPE;\n\n  if (qs) {\n    url += (url.indexOf(\"?\") > -1 ? \"&\" : \"?\") + qs;\n  }\n\n  if (useJsonp) {\n    ajaxData.$format = \"json\";\n  }\n\n  return {\n    url: url,\n    data: ajaxData,\n    dataType: useJsonp ? \"jsonp\" : \"json\",\n    jsonp: useJsonp && \"$callback\",\n    method: method,\n    async: async,\n    timeout: timeout,\n    headers: headers,\n    contentType: contentType,\n    accepts: {\n      json: [JSON_VERBOSE_MIME_TYPE, \"text/plain\"].join()\n    },\n    xhrFields: {\n      withCredentials: withCredentials\n    }\n  };\n};\n\nvar sendRequest = exports.sendRequest = function sendRequest(protocolVersion, request, options) {\n  var deserializeDates = options.deserializeDates,\n      fieldTypes = options.fieldTypes,\n      countOnly = options.countOnly,\n      isPaged = options.isPaged;\n  var d = new _deferred.Deferred();\n  var ajaxOptions = ajaxOptionsForRequest(protocolVersion, request, options);\n\n  _ajax2.default.sendRequest(ajaxOptions).always(function (obj, textStatus) {\n    var transformOptions = {\n      deserializeDates: deserializeDates,\n      fieldTypes: fieldTypes\n    };\n    var tuple = interpretJsonFormat(obj, textStatus, transformOptions, ajaxOptions);\n    var error = tuple.error,\n        data = tuple.data,\n        count = tuple.count;\n    var nextUrl = tuple.nextUrl;\n\n    if (error) {\n      if (error.message !== _utils.XHR_ERROR_UNLOAD) {\n        d.reject(error);\n      }\n    } else {\n      if (countOnly) {\n        if (isFinite(count)) {\n          d.resolve(count);\n        } else {\n          d.reject(new _errors.errors.Error(\"E4018\"));\n        }\n      } else {\n        if (nextUrl && !isPaged) {\n          if (!isAbsoluteUrl(nextUrl)) {\n            nextUrl = toAbsoluteUrl(ajaxOptions.url, nextUrl);\n          }\n\n          sendRequest(protocolVersion, {\n            url: nextUrl\n          }, options).fail(d.reject).done(function (nextData) {\n            return d.resolve(data.concat(nextData));\n          });\n        } else {\n          var extra = isFinite(count) ? {\n            totalCount: count\n          } : void 0;\n          d.resolve(data, extra);\n        }\n      }\n    }\n  });\n\n  return d.promise();\n};\n\nvar formatDotNetError = function (errorObj) {\n  var message;\n  var currentError = errorObj;\n\n  if (\"message\" in errorObj) {\n    var _errorObj$message;\n\n    message = (null === (_errorObj$message = errorObj.message) || void 0 === _errorObj$message ? void 0 : _errorObj$message.value) || errorObj.message;\n  }\n\n  while (currentError = currentError.innererror || currentError.internalexception) {\n    message = currentError.message;\n\n    if (currentError.internalexception && message.indexOf(\"inner exception\") === -1) {\n      break;\n    }\n  }\n\n  return message;\n};\n\nvar errorFromResponse = function (obj, textStatus, ajaxOptions) {\n  var _response, _response2, _response3, _response4;\n\n  if (\"nocontent\" === textStatus) {\n    return null;\n  }\n\n  var message = \"Unknown error\";\n  var response = obj;\n  var httpStatus = 200;\n  var errorData = {\n    requestOptions: ajaxOptions\n  };\n\n  if (\"success\" !== textStatus) {\n    var status = obj.status,\n        responseText = obj.responseText;\n    httpStatus = status;\n    message = (0, _utils.errorMessageFromXhr)(obj, textStatus);\n\n    try {\n      response = JSON.parse(responseText);\n    } catch (x) {}\n  }\n\n  var errorObj = (null === (_response = response) || void 0 === _response ? void 0 : _response.then) || (null === (_response2 = response) || void 0 === _response2 ? void 0 : _response2.error) || (null === (_response3 = response) || void 0 === _response3 ? void 0 : _response3[\"odata.error\"]) || (null === (_response4 = response) || void 0 === _response4 ? void 0 : _response4[\"@odata.error\"]);\n\n  if (errorObj) {\n    message = formatDotNetError(errorObj) || message;\n    errorData.errorDetails = errorObj;\n\n    if (200 === httpStatus) {\n      httpStatus = 500;\n    }\n\n    var customCode = Number(errorObj.code);\n\n    if (isFinite(customCode) && customCode >= 400) {\n      httpStatus = customCode;\n    }\n  }\n\n  if (httpStatus >= 400 || 0 === httpStatus) {\n    errorData.httpStatus = httpStatus;\n    return (0, _extend.extend)(Error(message), errorData);\n  }\n\n  return null;\n};\n\nvar interpretJsonFormat = function (obj, textStatus, transformOptions, ajaxOptions) {\n  var error = errorFromResponse(obj, textStatus, ajaxOptions);\n\n  if (error) {\n    return {\n      error: error\n    };\n  }\n\n  if (!(0, _type.isPlainObject)(obj)) {\n    return {\n      data: obj\n    };\n  }\n\n  var value = \"d\" in obj && (Array.isArray(obj.d) || (0, _type.isObject)(obj.d)) ? interpretVerboseJsonFormat(obj, textStatus) : interpretLightJsonFormat(obj, textStatus);\n  transformTypes(value, transformOptions);\n  return value;\n};\n\nvar interpretVerboseJsonFormat = function (_ref) {\n  var _data$results;\n\n  var data = _ref.d;\n\n  if (!(0, _type.isDefined)(data)) {\n    return {\n      error: Error(\"Malformed or unsupported JSON response received\")\n    };\n  }\n\n  return {\n    data: null !== (_data$results = data.results) && void 0 !== _data$results ? _data$results : data,\n    nextUrl: data.__next,\n    count: parseInt(data.__count, 10)\n  };\n};\n\nvar interpretLightJsonFormat = function (obj) {\n  var _obj$value;\n\n  return {\n    data: null !== (_obj$value = obj.value) && void 0 !== _obj$value ? _obj$value : obj,\n    nextUrl: obj[\"@odata.nextLink\"],\n    count: parseInt(obj[\"@odata.count\"], 10)\n  };\n};\n\nvar EdmLiteral = exports.EdmLiteral = _class2.default.inherit({\n  ctor: function (value) {\n    this._value = value;\n  },\n  valueOf: function () {\n    return this._value;\n  }\n});\n\nvar transformTypes = function transformTypes(obj) {\n  var options = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\n  (0, _iterator.each)(obj, function (key, value) {\n    if (null !== value && \"object\" === _typeof(value)) {\n      if (\"results\" in value) {\n        obj[key] = value.results;\n      }\n\n      transformTypes(obj[key], options);\n    } else {\n      if (\"string\" === typeof value) {\n        var fieldTypes = options.fieldTypes,\n            deserializeDates = options.deserializeDates;\n        var canBeGuid = !fieldTypes || \"String\" !== fieldTypes[key];\n\n        if (canBeGuid && GUID_REGEX.test(value)) {\n          obj[key] = new _guid2.default(value);\n        }\n\n        if (false !== deserializeDates) {\n          if (value.match(VERBOSE_DATE_REGEX)) {\n            var date = new Date(Number(RegExp.$1) + 60 * RegExp.$2 * 1e3);\n            obj[key] = new Date(date.valueOf() + 60 * date.getTimezoneOffset() * 1e3);\n          } else {\n            if (ISO8601_DATE_REGEX.test(value)) {\n              obj[key] = new Date(parseISO8601(obj[key]).valueOf());\n            }\n          }\n        }\n      }\n    }\n  });\n};\n\nvar serializeDate = function (date) {\n  return \"datetime'\".concat(formatISO8601(date, true, true), \"'\");\n};\n\nvar serializeString = function (value) {\n  return \"'\".concat(value.replace(/'/g, \"''\"), \"'\");\n};\n\nvar serializePropName = exports.serializePropName = function (propName) {\n  return propName instanceof EdmLiteral ? propName.valueOf() : propName.replace(/\\./g, \"/\");\n};\n\nvar serializeValueV4 = function serializeValueV4(value) {\n  if (value instanceof Date) {\n    return formatISO8601(value, false, false);\n  }\n\n  if (value instanceof _guid2.default) {\n    return value.valueOf();\n  }\n\n  if (Array.isArray(value)) {\n    return \"[\".concat(value.map(function (item) {\n      return serializeValueV4(item);\n    }).join(\",\"), \"]\");\n  }\n\n  return serializeValueV2(value);\n};\n\nvar serializeValueV2 = function (value) {\n  if (value instanceof Date) {\n    return serializeDate(value);\n  }\n\n  if (value instanceof _guid2.default) {\n    return \"guid'\".concat(value, \"'\");\n  }\n\n  if (value instanceof EdmLiteral) {\n    return value.valueOf();\n  }\n\n  if (\"string\" === typeof value) {\n    return serializeString(value);\n  }\n\n  return String(value);\n};\n\nvar serializeValue = exports.serializeValue = function (value, protocolVersion) {\n  switch (protocolVersion) {\n    case 2:\n    case 3:\n      return serializeValueV2(value);\n\n    case 4:\n      return serializeValueV4(value);\n\n    default:\n      throw _errors.errors.Error(\"E4002\");\n  }\n};\n\nvar serializeKey = exports.serializeKey = function (key, protocolVersion) {\n  if ((0, _type.isPlainObject)(key)) {\n    var parts = [];\n    (0, _iterator.each)(key, function (k, v) {\n      return parts.push(\"\".concat(serializePropName(k), \"=\").concat(serializeValue(v, protocolVersion)));\n    });\n    return parts.join();\n  }\n\n  return serializeValue(key, protocolVersion);\n};\n\nvar keyConverters = exports.keyConverters = {\n  String: function (value) {\n    return \"\".concat(value);\n  },\n  Int32: function (value) {\n    return Math.floor(value);\n  },\n  Int64: function (value) {\n    return value instanceof EdmLiteral ? value : new EdmLiteral(\"\".concat(value, \"L\"));\n  },\n  Guid: function (value) {\n    return value instanceof _guid2.default ? value : new _guid2.default(value);\n  },\n  Boolean: function (value) {\n    return !!value;\n  },\n  Single: function (value) {\n    return value instanceof EdmLiteral ? value : new EdmLiteral(value + \"f\");\n  },\n  Decimal: function (value) {\n    return value instanceof EdmLiteral ? value : new EdmLiteral(value + \"m\");\n  }\n};\n\nvar convertPrimitiveValue = exports.convertPrimitiveValue = function (type, value) {\n  if (null === value) {\n    return null;\n  }\n\n  var converter = keyConverters[type];\n\n  if (!converter) {\n    throw _errors.errors.Error(\"E4014\", type);\n  }\n\n  return converter(value);\n};\n\nvar generateSelect = exports.generateSelect = function (oDataVersion, select) {\n  if (!select) {\n    return;\n  }\n\n  return oDataVersion < 4 ? serializePropName(select.join()) : (0, _common.grep)(select, hasDot, true).join();\n};\n\nvar formatCore = function formatCore(hash) {\n  var result = \"\";\n  var selectValue = [];\n  var expandValue = [];\n  (0, _iterator.each)(hash, function (key, value) {\n    if (Array.isArray(value)) {\n      [].push.apply(selectValue, value);\n    }\n\n    if ((0, _type.isPlainObject)(value)) {\n      expandValue.push(\"\".concat(key).concat(formatCore(value)));\n    }\n  });\n\n  if (selectValue.length || expandValue.length) {\n    result += \"(\";\n\n    if (selectValue.length) {\n      result += \"$select=\".concat((0, _iterator.map)(selectValue, serializePropName).join());\n    }\n\n    if (expandValue.length) {\n      if (selectValue.length) {\n        result += \";\";\n      }\n\n      result += \"$expand=\".concat((0, _iterator.map)(expandValue, serializePropName).join());\n    }\n\n    result += \")\";\n  }\n\n  return result;\n};\n\nvar format = function (hash) {\n  var result = [];\n  (0, _iterator.each)(hash, function (key, value) {\n    return result.push(\"\".concat(key).concat(formatCore(value)));\n  });\n  return result.join();\n};\n\nvar parseCore = function parseCore(exprParts, root, stepper) {\n  var result = stepper(root, exprParts.shift(), exprParts);\n\n  if (false === result) {\n    return;\n  }\n\n  parseCore(exprParts, result, stepper);\n};\n\nvar parseTree = function (exprs, root, stepper) {\n  return (0, _iterator.each)(exprs, function (_, x) {\n    return parseCore(x.split(\".\"), root, stepper);\n  });\n};\n\nvar generatorV2 = function (expand, select) {\n  var hash = {};\n\n  if (expand) {\n    (0, _iterator.each)(makeArray(expand), function () {\n      hash[serializePropName(this)] = 1;\n    });\n  }\n\n  if (select) {\n    (0, _iterator.each)(makeArray(select), function () {\n      var path = this.split(\".\");\n\n      if (path.length < 2) {\n        return;\n      }\n\n      path.pop();\n      hash[serializePropName(path.join(\".\"))] = 1;\n    });\n  }\n\n  return (0, _iterator.map)(hash, function (_, v) {\n    return v;\n  }).join();\n};\n\nvar generatorV4 = function (expand, select) {\n  var hash = {};\n\n  if (expand || select) {\n    if (expand) {\n      parseTree(makeArray(expand), hash, function (node, key, path) {\n        node[key] = node[key] || {};\n        return !path.length ? false : node[key];\n      });\n    }\n\n    if (select) {\n      parseTree((0, _common.grep)(makeArray(select), hasDot), hash, function (node, key, path) {\n        if (!path.length) {\n          node[key] = node[key] || [];\n          node[key].push(key);\n          return false;\n        }\n\n        return node[key] = node[key] || {};\n      });\n    }\n\n    return format(hash);\n  }\n};\n\nvar generateExpand = exports.generateExpand = function (oDataVersion, expand, select) {\n  return oDataVersion < 4 ? generatorV2(expand, select) : generatorV4(expand, select);\n};\n\nvar formatFunctionInvocationUrl = exports.formatFunctionInvocationUrl = function (baseUrl, args) {\n  return (0, _string.format)(\"{0}({1})\", baseUrl, (0, _iterator.map)(args || {}, function (value, key) {\n    return (0, _string.format)(\"{0}={1}\", key, value);\n  }).join(\",\"));\n};\n\nvar escapeServiceOperationParams = exports.escapeServiceOperationParams = function (params, version) {\n  if (!params) {\n    return params;\n  }\n\n  var result = {};\n  (0, _iterator.each)(params, function (k, v) {\n    result[k] = serializeValue(v, version);\n  });\n  return result;\n};","map":{"version":3,"sources":["/Users/tracyvy/Desktop/calendar/client/node_modules/devextreme/data/odata/utils.js"],"names":["Object","defineProperty","exports","value","OData__internals","escapeServiceOperationParams","formatFunctionInvocationUrl","generateExpand","generateSelect","convertPrimitiveValue","keyConverters","serializeKey","serializeValue","serializePropName","EdmLiteral","sendRequest","_class","require","_class2","_interopRequireDefault","_extend","_type","_iterator","_ajax","_ajax2","_guid","_guid2","_common","_deferred","_errors","_utils","_string","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","GUID_REGEX","VERBOSE_DATE_REGEX","ISO8601_DATE_REGEX","JSON_VERBOSE_MIME_TYPE","makeArray","type","split","hasDot","x","test","pad","text","length","right","String","concat","formatISO8601","date","skipZeroTime","skipTimezone","bag","isZeroTime","getHours","getMinutes","getSeconds","getMilliseconds","padLeft2","push","getFullYear","getMonth","getDate","join","parseISO8601","isoString","result","Date","getTimezoneOffset","chunks","replace","exec","time","setFullYear","Number","setMonth","setDate","Array","isArray","setHours","setMinutes","setSeconds","fractional","slice","setMilliseconds","isAbsoluteUrl","url","stripParams","index","indexOf","substr","toAbsoluteUrl","basePath","relativePath","part","baseParts","relativeParts","pop","shift","param","params","name","ajaxOptionsForRequest","protocolVersion","request","_options$beforeSend","options","arguments","formatPayload","payload","JSON","stringify","key","errors","Error","extend","async","method","headers","timeout","beforeSend","call","_request","_request2","jsonp","withCredentials","toLowerCase","isGet","useJsonp","ajaxData","qs","contentType","$format","data","dataType","accepts","json","xhrFields","deserializeDates","fieldTypes","countOnly","isPaged","d","Deferred","ajaxOptions","default","always","textStatus","transformOptions","tuple","interpretJsonFormat","error","count","nextUrl","message","XHR_ERROR_UNLOAD","reject","isFinite","resolve","fail","done","nextData","extra","totalCount","promise","formatDotNetError","errorObj","currentError","_errorObj$message","innererror","internalexception","errorFromResponse","_response","_response2","_response3","_response4","response","httpStatus","errorData","requestOptions","status","responseText","errorMessageFromXhr","parse","then","errorDetails","customCode","code","isPlainObject","isObject","interpretVerboseJsonFormat","interpretLightJsonFormat","transformTypes","_ref","_data$results","isDefined","results","__next","parseInt","__count","_obj$value","inherit","ctor","_value","valueOf","each","canBeGuid","match","RegExp","$1","$2","serializeDate","serializeString","propName","serializeValueV4","map","item","serializeValueV2","parts","k","v","Int32","Math","floor","Int64","Guid","Boolean","Single","Decimal","converter","oDataVersion","select","grep","formatCore","hash","selectValue","expandValue","apply","format","parseCore","exprParts","root","stepper","parseTree","exprs","_","generatorV2","expand","path","generatorV4","node","baseUrl","args","version"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (data/odata/utils.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nexports.OData__internals = exports.escapeServiceOperationParams = exports.formatFunctionInvocationUrl = exports.generateExpand = exports.generateSelect = exports.convertPrimitiveValue = exports.keyConverters = exports.serializeKey = exports.serializeValue = exports.serializePropName = exports.EdmLiteral = exports.sendRequest = void 0;\r\nvar _class = require(\"../../core/class\");\r\nvar _class2 = _interopRequireDefault(_class);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _ajax = require(\"../../core/utils/ajax\");\r\nvar _ajax2 = _interopRequireDefault(_ajax);\r\nvar _guid = require(\"../../core/guid\");\r\nvar _guid2 = _interopRequireDefault(_guid);\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _errors = require(\"../errors\");\r\nvar _utils = require(\"../utils\");\r\nvar _string = require(\"../../core/utils/string\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nvar GUID_REGEX = /^(\\{{0,1}([0-9a-fA-F]){8}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){12}\\}{0,1})$/;\r\nvar VERBOSE_DATE_REGEX = /^\\/Date\\((-?\\d+)((\\+|-)?(\\d+)?)\\)\\/$/;\r\nvar ISO8601_DATE_REGEX = /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(Z|[-+]{1}\\d{2}(:?)(\\d{2})?)?$/;\r\nvar JSON_VERBOSE_MIME_TYPE = \"application/json;odata=verbose\";\r\nvar makeArray = function(value) {\r\n    return \"string\" === (0, _type.type)(value) ? value.split() : value\r\n};\r\nvar hasDot = function(x) {\r\n    return /\\./.test(x)\r\n};\r\nvar pad = function(text, length, right) {\r\n    text = String(text);\r\n    while (text.length < length) {\r\n        text = right ? \"\".concat(text, \"0\") : \"0\".concat(text)\r\n    }\r\n    return text\r\n};\r\nvar formatISO8601 = function(date, skipZeroTime, skipTimezone) {\r\n    var bag = [];\r\n    var isZeroTime = function() {\r\n        return date.getHours() + date.getMinutes() + date.getSeconds() + date.getMilliseconds() < 1\r\n    };\r\n    var padLeft2 = function(text) {\r\n        return pad(text, 2)\r\n    };\r\n    bag.push(date.getFullYear());\r\n    bag.push(\"-\");\r\n    bag.push(padLeft2(date.getMonth() + 1));\r\n    bag.push(\"-\");\r\n    bag.push(padLeft2(date.getDate()));\r\n    if (!(skipZeroTime && isZeroTime())) {\r\n        bag.push(\"T\");\r\n        bag.push(padLeft2(date.getHours()));\r\n        bag.push(\":\");\r\n        bag.push(padLeft2(date.getMinutes()));\r\n        bag.push(\":\");\r\n        bag.push(padLeft2(date.getSeconds()));\r\n        if (date.getMilliseconds()) {\r\n            bag.push(\".\");\r\n            bag.push(pad(date.getMilliseconds(), 3))\r\n        }\r\n        if (!skipTimezone) {\r\n            bag.push(\"Z\")\r\n        }\r\n    }\r\n    return bag.join(\"\")\r\n};\r\nvar parseISO8601 = function(isoString) {\r\n    var result = new Date(60 * new Date(0).getTimezoneOffset() * 1e3);\r\n    var chunks = isoString.replace(\"Z\", \"\").split(\"T\");\r\n    var date = /(\\d{4})-(\\d{2})-(\\d{2})/.exec(chunks[0]);\r\n    var time = /(\\d{2}):(\\d{2}):(\\d{2})\\.?(\\d{0,7})?/.exec(chunks[1]);\r\n    result.setFullYear(Number(date[1]));\r\n    result.setMonth(Number(date[2]) - 1);\r\n    result.setDate(Number(date[3]));\r\n    if (Array.isArray(time) && time.length) {\r\n        result.setHours(Number(time[1]));\r\n        result.setMinutes(Number(time[2]));\r\n        result.setSeconds(Number(time[3]));\r\n        var fractional = (time[4] || \"\").slice(0, 3);\r\n        fractional = pad(fractional, 3, true);\r\n        result.setMilliseconds(Number(fractional))\r\n    }\r\n    return result\r\n};\r\nvar isAbsoluteUrl = function(url) {\r\n    return /^(?:[a-z]+:)?\\/\\//i.test(url)\r\n};\r\nvar stripParams = function(url) {\r\n    var index = url.indexOf(\"?\");\r\n    if (index > -1) {\r\n        return url.substr(0, index)\r\n    }\r\n    return url\r\n};\r\nvar toAbsoluteUrl = function(basePath, relativePath) {\r\n    var part;\r\n    var baseParts = stripParams(basePath).split(\"/\");\r\n    var relativeParts = relativePath.split(\"/\");\r\n    baseParts.pop();\r\n    while (relativeParts.length) {\r\n        part = relativeParts.shift();\r\n        if (\"..\" === part) {\r\n            baseParts.pop()\r\n        } else {\r\n            baseParts.push(part)\r\n        }\r\n    }\r\n    return baseParts.join(\"/\")\r\n};\r\nvar param = function(params) {\r\n    var result = [];\r\n    for (var name in params) {\r\n        result.push(name + \"=\" + params[name])\r\n    }\r\n    return result.join(\"&\")\r\n};\r\nvar ajaxOptionsForRequest = function(protocolVersion, request) {\r\n    var _options$beforeSend;\r\n    var options = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\r\n    var formatPayload = function(payload) {\r\n        return JSON.stringify(payload, function(key, value) {\r\n            if (!(this[key] instanceof Date)) {\r\n                return value\r\n            }\r\n            value = formatISO8601(this[key]);\r\n            switch (protocolVersion) {\r\n                case 2:\r\n                    return value.substr(0, value.length - 1);\r\n                case 3:\r\n                case 4:\r\n                    return value;\r\n                default:\r\n                    throw _errors.errors.Error(\"E4002\")\r\n            }\r\n        })\r\n    };\r\n    request = (0, _extend.extend)({\r\n        async: true,\r\n        method: \"get\",\r\n        url: \"\",\r\n        params: {},\r\n        payload: null,\r\n        headers: {},\r\n        timeout: 3e4\r\n    }, request);\r\n    null === (_options$beforeSend = options.beforeSend) || void 0 === _options$beforeSend ? void 0 : _options$beforeSend.call(options, request);\r\n    var _request = request,\r\n        async = _request.async, timeout = _request.timeout, headers = _request.headers;\r\n    var _request2 = request,\r\n        url = _request2.url,\r\n        method = _request2.method;\r\n    var jsonp = options.jsonp,\r\n        withCredentials = options.withCredentials;\r\n    method = (method || \"get\").toLowerCase();\r\n    var isGet = \"get\" === method;\r\n    var useJsonp = isGet && jsonp;\r\n    var params = (0, _extend.extend)({}, request.params);\r\n    var ajaxData = isGet ? params : formatPayload(request.payload);\r\n    var qs = !isGet && param(params);\r\n    var contentType = !isGet && JSON_VERBOSE_MIME_TYPE;\r\n    if (qs) {\r\n        url += (url.indexOf(\"?\") > -1 ? \"&\" : \"?\") + qs\r\n    }\r\n    if (useJsonp) {\r\n        ajaxData.$format = \"json\"\r\n    }\r\n    return {\r\n        url: url,\r\n        data: ajaxData,\r\n        dataType: useJsonp ? \"jsonp\" : \"json\",\r\n        jsonp: useJsonp && \"$callback\",\r\n        method: method,\r\n        async: async,\r\n        timeout: timeout,\r\n        headers: headers,\r\n        contentType: contentType,\r\n        accepts: {\r\n            json: [JSON_VERBOSE_MIME_TYPE, \"text/plain\"].join()\r\n        },\r\n        xhrFields: {\r\n            withCredentials: withCredentials\r\n        }\r\n    }\r\n};\r\nvar sendRequest = exports.sendRequest = function sendRequest(protocolVersion, request, options) {\r\n    var deserializeDates = options.deserializeDates,\r\n        fieldTypes = options.fieldTypes,\r\n        countOnly = options.countOnly,\r\n        isPaged = options.isPaged;\r\n    var d = new _deferred.Deferred;\r\n    var ajaxOptions = ajaxOptionsForRequest(protocolVersion, request, options);\r\n    _ajax2.default.sendRequest(ajaxOptions).always(function(obj, textStatus) {\r\n        var transformOptions = {\r\n            deserializeDates: deserializeDates,\r\n            fieldTypes: fieldTypes\r\n        };\r\n        var tuple = interpretJsonFormat(obj, textStatus, transformOptions, ajaxOptions);\r\n        var error = tuple.error,\r\n            data = tuple.data,\r\n            count = tuple.count;\r\n        var nextUrl = tuple.nextUrl;\r\n        if (error) {\r\n            if (error.message !== _utils.XHR_ERROR_UNLOAD) {\r\n                d.reject(error)\r\n            }\r\n        } else {\r\n            if (countOnly) {\r\n                if (isFinite(count)) {\r\n                    d.resolve(count)\r\n                } else {\r\n                    d.reject(new _errors.errors.Error(\"E4018\"))\r\n                }\r\n            } else {\r\n                if (nextUrl && !isPaged) {\r\n                    if (!isAbsoluteUrl(nextUrl)) {\r\n                        nextUrl = toAbsoluteUrl(ajaxOptions.url, nextUrl)\r\n                    }\r\n                    sendRequest(protocolVersion, {\r\n                        url: nextUrl\r\n                    }, options).fail(d.reject).done(function(nextData) {\r\n                        return d.resolve(data.concat(nextData))\r\n                    })\r\n                } else {\r\n                    var extra = isFinite(count) ? {\r\n                        totalCount: count\r\n                    } : void 0;\r\n                    d.resolve(data, extra)\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return d.promise()\r\n};\r\nvar formatDotNetError = function(errorObj) {\r\n    var message;\r\n    var currentError = errorObj;\r\n    if (\"message\" in errorObj) {\r\n        var _errorObj$message;\r\n        message = (null === (_errorObj$message = errorObj.message) || void 0 === _errorObj$message ? void 0 : _errorObj$message.value) || errorObj.message\r\n    }\r\n    while (currentError = currentError.innererror || currentError.internalexception) {\r\n        message = currentError.message;\r\n        if (currentError.internalexception && message.indexOf(\"inner exception\") === -1) {\r\n            break\r\n        }\r\n    }\r\n    return message\r\n};\r\nvar errorFromResponse = function(obj, textStatus, ajaxOptions) {\r\n    var _response, _response2, _response3, _response4;\r\n    if (\"nocontent\" === textStatus) {\r\n        return null\r\n    }\r\n    var message = \"Unknown error\";\r\n    var response = obj;\r\n    var httpStatus = 200;\r\n    var errorData = {\r\n        requestOptions: ajaxOptions\r\n    };\r\n    if (\"success\" !== textStatus) {\r\n        var status = obj.status,\r\n            responseText = obj.responseText;\r\n        httpStatus = status;\r\n        message = (0, _utils.errorMessageFromXhr)(obj, textStatus);\r\n        try {\r\n            response = JSON.parse(responseText)\r\n        } catch (x) {}\r\n    }\r\n    var errorObj = (null === (_response = response) || void 0 === _response ? void 0 : _response.then) || (null === (_response2 = response) || void 0 === _response2 ? void 0 : _response2.error) || (null === (_response3 = response) || void 0 === _response3 ? void 0 : _response3[\"odata.error\"]) || (null === (_response4 = response) || void 0 === _response4 ? void 0 : _response4[\"@odata.error\"]);\r\n    if (errorObj) {\r\n        message = formatDotNetError(errorObj) || message;\r\n        errorData.errorDetails = errorObj;\r\n        if (200 === httpStatus) {\r\n            httpStatus = 500\r\n        }\r\n        var customCode = Number(errorObj.code);\r\n        if (isFinite(customCode) && customCode >= 400) {\r\n            httpStatus = customCode\r\n        }\r\n    }\r\n    if (httpStatus >= 400 || 0 === httpStatus) {\r\n        errorData.httpStatus = httpStatus;\r\n        return (0, _extend.extend)(Error(message), errorData)\r\n    }\r\n    return null\r\n};\r\nvar interpretJsonFormat = function(obj, textStatus, transformOptions, ajaxOptions) {\r\n    var error = errorFromResponse(obj, textStatus, ajaxOptions);\r\n    if (error) {\r\n        return {\r\n            error: error\r\n        }\r\n    }\r\n    if (!(0, _type.isPlainObject)(obj)) {\r\n        return {\r\n            data: obj\r\n        }\r\n    }\r\n    var value = \"d\" in obj && (Array.isArray(obj.d) || (0, _type.isObject)(obj.d)) ? interpretVerboseJsonFormat(obj, textStatus) : interpretLightJsonFormat(obj, textStatus);\r\n    transformTypes(value, transformOptions);\r\n    return value\r\n};\r\nvar interpretVerboseJsonFormat = function(_ref) {\r\n    var _data$results;\r\n    var data = _ref.d;\r\n    if (!(0, _type.isDefined)(data)) {\r\n        return {\r\n            error: Error(\"Malformed or unsupported JSON response received\")\r\n        }\r\n    }\r\n    return {\r\n        data: null !== (_data$results = data.results) && void 0 !== _data$results ? _data$results : data,\r\n        nextUrl: data.__next,\r\n        count: parseInt(data.__count, 10)\r\n    }\r\n};\r\nvar interpretLightJsonFormat = function(obj) {\r\n    var _obj$value;\r\n    return {\r\n        data: null !== (_obj$value = obj.value) && void 0 !== _obj$value ? _obj$value : obj,\r\n        nextUrl: obj[\"@odata.nextLink\"],\r\n        count: parseInt(obj[\"@odata.count\"], 10)\r\n    }\r\n};\r\nvar EdmLiteral = exports.EdmLiteral = _class2.default.inherit({\r\n    ctor: function(value) {\r\n        this._value = value\r\n    },\r\n    valueOf: function() {\r\n        return this._value\r\n    }\r\n});\r\nvar transformTypes = function transformTypes(obj) {\r\n    var options = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\r\n    (0, _iterator.each)(obj, function(key, value) {\r\n        if (null !== value && \"object\" === _typeof(value)) {\r\n            if (\"results\" in value) {\r\n                obj[key] = value.results\r\n            }\r\n            transformTypes(obj[key], options)\r\n        } else {\r\n            if (\"string\" === typeof value) {\r\n                var fieldTypes = options.fieldTypes,\r\n                    deserializeDates = options.deserializeDates;\r\n                var canBeGuid = !fieldTypes || \"String\" !== fieldTypes[key];\r\n                if (canBeGuid && GUID_REGEX.test(value)) {\r\n                    obj[key] = new _guid2.default(value)\r\n                }\r\n                if (false !== deserializeDates) {\r\n                    if (value.match(VERBOSE_DATE_REGEX)) {\r\n                        var date = new Date(Number(RegExp.$1) + 60 * RegExp.$2 * 1e3);\r\n                        obj[key] = new Date(date.valueOf() + 60 * date.getTimezoneOffset() * 1e3)\r\n                    } else {\r\n                        if (ISO8601_DATE_REGEX.test(value)) {\r\n                            obj[key] = new Date(parseISO8601(obj[key]).valueOf())\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    })\r\n};\r\nvar serializeDate = function(date) {\r\n    return \"datetime'\".concat(formatISO8601(date, true, true), \"'\")\r\n};\r\nvar serializeString = function(value) {\r\n    return \"'\".concat(value.replace(/'/g, \"''\"), \"'\")\r\n};\r\nvar serializePropName = exports.serializePropName = function(propName) {\r\n    return propName instanceof EdmLiteral ? propName.valueOf() : propName.replace(/\\./g, \"/\")\r\n};\r\nvar serializeValueV4 = function serializeValueV4(value) {\r\n    if (value instanceof Date) {\r\n        return formatISO8601(value, false, false)\r\n    }\r\n    if (value instanceof _guid2.default) {\r\n        return value.valueOf()\r\n    }\r\n    if (Array.isArray(value)) {\r\n        return \"[\".concat(value.map(function(item) {\r\n            return serializeValueV4(item)\r\n        }).join(\",\"), \"]\")\r\n    }\r\n    return serializeValueV2(value)\r\n};\r\nvar serializeValueV2 = function(value) {\r\n    if (value instanceof Date) {\r\n        return serializeDate(value)\r\n    }\r\n    if (value instanceof _guid2.default) {\r\n        return \"guid'\".concat(value, \"'\")\r\n    }\r\n    if (value instanceof EdmLiteral) {\r\n        return value.valueOf()\r\n    }\r\n    if (\"string\" === typeof value) {\r\n        return serializeString(value)\r\n    }\r\n    return String(value)\r\n};\r\nvar serializeValue = exports.serializeValue = function(value, protocolVersion) {\r\n    switch (protocolVersion) {\r\n        case 2:\r\n        case 3:\r\n            return serializeValueV2(value);\r\n        case 4:\r\n            return serializeValueV4(value);\r\n        default:\r\n            throw _errors.errors.Error(\"E4002\")\r\n    }\r\n};\r\nvar serializeKey = exports.serializeKey = function(key, protocolVersion) {\r\n    if ((0, _type.isPlainObject)(key)) {\r\n        var parts = [];\r\n        (0, _iterator.each)(key, function(k, v) {\r\n            return parts.push(\"\".concat(serializePropName(k), \"=\").concat(serializeValue(v, protocolVersion)))\r\n        });\r\n        return parts.join()\r\n    }\r\n    return serializeValue(key, protocolVersion)\r\n};\r\nvar keyConverters = exports.keyConverters = {\r\n    String: function(value) {\r\n        return \"\".concat(value)\r\n    },\r\n    Int32: function(value) {\r\n        return Math.floor(value)\r\n    },\r\n    Int64: function(value) {\r\n        return value instanceof EdmLiteral ? value : new EdmLiteral(\"\".concat(value, \"L\"))\r\n    },\r\n    Guid: function(value) {\r\n        return value instanceof _guid2.default ? value : new _guid2.default(value)\r\n    },\r\n    Boolean: function(value) {\r\n        return !!value\r\n    },\r\n    Single: function(value) {\r\n        return value instanceof EdmLiteral ? value : new EdmLiteral(value + \"f\")\r\n    },\r\n    Decimal: function(value) {\r\n        return value instanceof EdmLiteral ? value : new EdmLiteral(value + \"m\")\r\n    }\r\n};\r\nvar convertPrimitiveValue = exports.convertPrimitiveValue = function(type, value) {\r\n    if (null === value) {\r\n        return null\r\n    }\r\n    var converter = keyConverters[type];\r\n    if (!converter) {\r\n        throw _errors.errors.Error(\"E4014\", type)\r\n    }\r\n    return converter(value)\r\n};\r\nvar generateSelect = exports.generateSelect = function(oDataVersion, select) {\r\n    if (!select) {\r\n        return\r\n    }\r\n    return oDataVersion < 4 ? serializePropName(select.join()) : (0, _common.grep)(select, hasDot, true).join()\r\n};\r\nvar formatCore = function formatCore(hash) {\r\n    var result = \"\";\r\n    var selectValue = [];\r\n    var expandValue = [];\r\n    (0, _iterator.each)(hash, function(key, value) {\r\n        if (Array.isArray(value)) {\r\n            [].push.apply(selectValue, value)\r\n        }\r\n        if ((0, _type.isPlainObject)(value)) {\r\n            expandValue.push(\"\".concat(key).concat(formatCore(value)))\r\n        }\r\n    });\r\n    if (selectValue.length || expandValue.length) {\r\n        result += \"(\";\r\n        if (selectValue.length) {\r\n            result += \"$select=\".concat((0, _iterator.map)(selectValue, serializePropName).join())\r\n        }\r\n        if (expandValue.length) {\r\n            if (selectValue.length) {\r\n                result += \";\"\r\n            }\r\n            result += \"$expand=\".concat((0, _iterator.map)(expandValue, serializePropName).join())\r\n        }\r\n        result += \")\"\r\n    }\r\n    return result\r\n};\r\nvar format = function(hash) {\r\n    var result = [];\r\n    (0, _iterator.each)(hash, function(key, value) {\r\n        return result.push(\"\".concat(key).concat(formatCore(value)))\r\n    });\r\n    return result.join()\r\n};\r\nvar parseCore = function parseCore(exprParts, root, stepper) {\r\n    var result = stepper(root, exprParts.shift(), exprParts);\r\n    if (false === result) {\r\n        return\r\n    }\r\n    parseCore(exprParts, result, stepper)\r\n};\r\nvar parseTree = function(exprs, root, stepper) {\r\n    return (0, _iterator.each)(exprs, function(_, x) {\r\n        return parseCore(x.split(\".\"), root, stepper)\r\n    })\r\n};\r\nvar generatorV2 = function(expand, select) {\r\n    var hash = {};\r\n    if (expand) {\r\n        (0, _iterator.each)(makeArray(expand), function() {\r\n            hash[serializePropName(this)] = 1\r\n        })\r\n    }\r\n    if (select) {\r\n        (0, _iterator.each)(makeArray(select), function() {\r\n            var path = this.split(\".\");\r\n            if (path.length < 2) {\r\n                return\r\n            }\r\n            path.pop();\r\n            hash[serializePropName(path.join(\".\"))] = 1\r\n        })\r\n    }\r\n    return (0, _iterator.map)(hash, function(_, v) {\r\n        return v\r\n    }).join()\r\n};\r\nvar generatorV4 = function(expand, select) {\r\n    var hash = {};\r\n    if (expand || select) {\r\n        if (expand) {\r\n            parseTree(makeArray(expand), hash, function(node, key, path) {\r\n                node[key] = node[key] || {};\r\n                return !path.length ? false : node[key]\r\n            })\r\n        }\r\n        if (select) {\r\n            parseTree((0, _common.grep)(makeArray(select), hasDot), hash, function(node, key, path) {\r\n                if (!path.length) {\r\n                    node[key] = node[key] || [];\r\n                    node[key].push(key);\r\n                    return false\r\n                }\r\n                return node[key] = node[key] || {}\r\n            })\r\n        }\r\n        return format(hash)\r\n    }\r\n};\r\nvar generateExpand = exports.generateExpand = function(oDataVersion, expand, select) {\r\n    return oDataVersion < 4 ? generatorV2(expand, select) : generatorV4(expand, select)\r\n};\r\nvar formatFunctionInvocationUrl = exports.formatFunctionInvocationUrl = function(baseUrl, args) {\r\n    return (0, _string.format)(\"{0}({1})\", baseUrl, (0, _iterator.map)(args || {}, function(value, key) {\r\n        return (0, _string.format)(\"{0}={1}\", key, value)\r\n    }).join(\",\"))\r\n};\r\nvar escapeServiceOperationParams = exports.escapeServiceOperationParams = function(params, version) {\r\n    if (!params) {\r\n        return params\r\n    }\r\n    var result = {};\r\n    (0, _iterator.each)(params, function(k, v) {\r\n        result[k] = serializeValue(v, version)\r\n    });\r\n    return result\r\n};\r\n"]},"metadata":{},"sourceType":"script"}